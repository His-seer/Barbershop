[{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\scripts\\check-crm.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\scripts\\check-crm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\actions\\booking.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\actions\\get-availability.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\actions\\review.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\admin\\dashboard\\calendar\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CalendarIcon' is defined but never used.","line":6,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":29,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CalendarIcon"},"fix":{"range":[144,169],"text":""},"desc":"Remove unused variable \"CalendarIcon\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DollarSign' is defined but never used.","line":11,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"DollarSign"},"fix":{"range":[229,246],"text":""},"desc":"Remove unused variable \"DollarSign\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'viewMode' is assigned a value but never used.","line":65,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setViewMode' is assigned a value but never used.","line":65,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":33},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":96,"column":8,"nodeType":"ArrayExpression","endLine":96,"endColumn":43,"suggestions":[{"desc":"Update the dependencies array to be: [weekStart, weekEnd, selectedStaff, fetchData]","fix":{"range":[2942,2977],"text":"[weekStart, weekEnd, selectedStaff, fetchData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect, useMemo } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    Calendar as CalendarIcon,\r\n    ChevronLeft,\r\n    ChevronRight,\r\n    Users,\r\n    Clock,\r\n    DollarSign,\r\n    Phone,\r\n    Mail,\r\n    X,\r\n    Loader2,\r\n    CheckCircle,\r\n    AlertCircle\r\n} from 'lucide-react';\r\nimport { getBookingsForCalendar, getStaff } from '@/utils/supabase/queries';\r\nimport type { Staff } from '@/types/database';\r\n\r\ninterface CalendarBooking {\r\n    id: string;\r\n    customer_name: string;\r\n    customer_email: string;\r\n    customer_phone: string;\r\n    booking_date: string;\r\n    start_time: string;\r\n    end_time: string;\r\n    total_price: number;\r\n    status: string;\r\n    payment_status: string;\r\n    notes: string | null;\r\n    staff: { id: string; name: string; avatar_url: string | null } | null;\r\n    services: { service: { id: string; name: string; duration_minutes: number } }[];\r\n}\r\n\r\ntype CalendarBookingRaw = Omit<CalendarBooking, 'staff'> & {\r\n    staff: { id: string; name: string; avatar_url: string | null } | { id: string; name: string; avatar_url: string | null }[] | null;\r\n};\r\n\r\n// Generate time slots from 8 AM to 10 PM\r\nconst TIME_SLOTS = Array.from({ length: 15 }, (_, i) => {\r\n    const hour = i + 8;\r\n    return {\r\n        value: `${hour.toString().padStart(2, '0')}:00`,\r\n        label: hour <= 12 ? `${hour}AM` : `${hour - 12}PM`\r\n    };\r\n});\r\n\r\n// Staff colors for visual differentiation\r\nconst STAFF_COLORS = [\r\n    'bg-blue-500',\r\n    'bg-purple-500',\r\n    'bg-green-500',\r\n    'bg-orange-500',\r\n    'bg-pink-500',\r\n    'bg-cyan-500',\r\n    'bg-amber-500',\r\n];\r\n\r\nexport default function CalendarPage() {\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [currentDate, setCurrentDate] = useState(new Date());\r\n    const [viewMode, setViewMode] = useState<'week' | 'day'>('week');\r\n    const [selectedStaff, setSelectedStaff] = useState<string>('all');\r\n    const [bookings, setBookings] = useState<CalendarBooking[]>([]);\r\n    const [staff, setStaff] = useState<Staff[]>([]);\r\n    const [selectedBooking, setSelectedBooking] = useState<CalendarBooking | null>(null);\r\n\r\n    // Get week boundaries\r\n    const weekStart = useMemo(() => {\r\n        const date = new Date(currentDate);\r\n        const day = date.getDay();\r\n        date.setDate(date.getDate() - day + 1); // Monday\r\n        return date;\r\n    }, [currentDate]);\r\n\r\n    const weekEnd = useMemo(() => {\r\n        const date = new Date(weekStart);\r\n        date.setDate(date.getDate() + 6); // Sunday\r\n        return date;\r\n    }, [weekStart]);\r\n\r\n    // Get days of the week\r\n    const weekDays = useMemo(() => {\r\n        return Array.from({ length: 7 }, (_, i) => {\r\n            const date = new Date(weekStart);\r\n            date.setDate(date.getDate() + i);\r\n            return date;\r\n        });\r\n    }, [weekStart]);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [weekStart, weekEnd, selectedStaff]);\r\n\r\n    async function fetchData() {\r\n        setIsLoading(true);\r\n        try {\r\n            const startStr = weekStart.toISOString().split('T')[0];\r\n            const endStr = weekEnd.toISOString().split('T')[0];\r\n\r\n            const [bookingsData, staffData] = await Promise.all([\r\n                getBookingsForCalendar(startStr, endStr, selectedStaff),\r\n                getStaff()\r\n            ]);\r\n\r\n            // Normalize query result shape (staff can come back as an object or 1-element array depending on Supabase join)\r\n            const normalizedBookings: CalendarBooking[] = (bookingsData as CalendarBookingRaw[]).map((b) => ({\r\n                ...b,\r\n                staff: Array.isArray(b.staff) ? (b.staff[0] ?? null) : b.staff,\r\n            }));\r\n\r\n            setBookings(normalizedBookings);\r\n            setStaff(staffData);\r\n        } catch (error) {\r\n            console.error('Error fetching calendar data:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    const goToPreviousWeek = () => {\r\n        const newDate = new Date(currentDate);\r\n        newDate.setDate(newDate.getDate() - 7);\r\n        setCurrentDate(newDate);\r\n    };\r\n\r\n    const goToNextWeek = () => {\r\n        const newDate = new Date(currentDate);\r\n        newDate.setDate(newDate.getDate() + 7);\r\n        setCurrentDate(newDate);\r\n    };\r\n\r\n    const goToToday = () => {\r\n        setCurrentDate(new Date());\r\n    };\r\n\r\n    const getStaffColor = (staffId: string) => {\r\n        const index = staff.findIndex(s => s.id === staffId);\r\n        return STAFF_COLORS[index % STAFF_COLORS.length];\r\n    };\r\n\r\n    const getBookingsForSlot = (date: Date, timeSlot: string) => {\r\n        const dateStr = date.toISOString().split('T')[0];\r\n        return bookings.filter(b => {\r\n            if (b.booking_date !== dateStr) return false;\r\n            const bookingHour = parseInt(b.start_time.split(':')[0]);\r\n            const slotHour = parseInt(timeSlot.split(':')[0]);\r\n            return bookingHour === slotHour;\r\n        });\r\n    };\r\n\r\n    const formatCurrency = (amount: number) => {\r\n        return new Intl.NumberFormat('en-GH', { style: 'currency', currency: 'GHS' }).format(amount);\r\n    };\r\n\r\n    const isToday = (date: Date) => {\r\n        const today = new Date();\r\n        return date.toDateString() === today.toDateString();\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-white\">Booking Calendar</h1>\r\n                    <p className=\"text-white/40 text-sm mt-1\">View and manage appointments</p>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-3\">\r\n                    {/* Staff Filter */}\r\n                    <select\r\n                        value={selectedStaff}\r\n                        onChange={(e) => setSelectedStaff(e.target.value)}\r\n                        className=\"bg-richblack-800 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm\"\r\n                    >\r\n                        <option value=\"all\">All Staff</option>\r\n                        {staff.map(s => (\r\n                            <option key={s.id} value={s.id}>{s.name}</option>\r\n                        ))}\r\n                    </select>\r\n\r\n                    {/* Today Button */}\r\n                    <button\r\n                        onClick={goToToday}\r\n                        className=\"px-4 py-2.5 bg-gold-500/10 text-gold-500 border border-gold-500/20 rounded-xl text-sm font-medium hover:bg-gold-500/20 transition-colors\"\r\n                    >\r\n                        Today\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Navigation */}\r\n            <div className=\"flex items-center justify-between bg-richblack-800 border border-white/5 rounded-2xl p-4\">\r\n                <button\r\n                    onClick={goToPreviousWeek}\r\n                    className=\"p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg transition-colors\"\r\n                >\r\n                    <ChevronLeft className=\"w-5 h-5\" />\r\n                </button>\r\n\r\n                <div className=\"text-center\">\r\n                    <h2 className=\"text-white font-bold text-lg\">\r\n                        {weekStart.toLocaleDateString('en-US', { month: 'long', day: 'numeric' })} - {weekEnd.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}\r\n                    </h2>\r\n                </div>\r\n\r\n                <button\r\n                    onClick={goToNextWeek}\r\n                    className=\"p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg transition-colors\"\r\n                >\r\n                    <ChevronRight className=\"w-5 h-5\" />\r\n                </button>\r\n            </div>\r\n\r\n            {/* Calendar Grid */}\r\n            {isLoading ? (\r\n                <div className=\"flex items-center justify-center py-20\">\r\n                    <Loader2 className=\"w-8 h-8 text-gold-500 animate-spin\" />\r\n                </div>\r\n            ) : (\r\n                <div className=\"bg-richblack-800 border border-white/5 rounded-2xl overflow-hidden\">\r\n                    {/* Day Headers */}\r\n                    <div className=\"grid grid-cols-8 border-b border-white/5\">\r\n                        <div className=\"p-3 text-white/40 text-xs uppercase border-r border-white/5\">\r\n                            Time\r\n                        </div>\r\n                        {weekDays.map((day, idx) => (\r\n                            <div\r\n                                key={idx}\r\n                                className={`p-3 text-center border-r border-white/5 last:border-r-0 ${isToday(day) ? 'bg-gold-500/10' : ''\r\n                                    }`}\r\n                            >\r\n                                <p className=\"text-white/40 text-xs uppercase\">\r\n                                    {day.toLocaleDateString('en-US', { weekday: 'short' })}\r\n                                </p>\r\n                                <p className={`text-lg font-bold ${isToday(day) ? 'text-gold-500' : 'text-white'}`}>\r\n                                    {day.getDate()}\r\n                                </p>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Time Slots */}\r\n                    <div className=\"max-h-[600px] overflow-y-auto\">\r\n                        {TIME_SLOTS.map((slot) => (\r\n                            <div key={slot.value} className=\"grid grid-cols-8 border-b border-white/5 last:border-b-0 min-h-[60px]\">\r\n                                {/* Time Label */}\r\n                                <div className=\"p-2 text-white/40 text-xs border-r border-white/5 flex items-start justify-center pt-3\">\r\n                                    {slot.label}\r\n                                </div>\r\n\r\n                                {/* Day Cells */}\r\n                                {weekDays.map((day, dayIdx) => {\r\n                                    const slotBookings = getBookingsForSlot(day, slot.value);\r\n                                    return (\r\n                                        <div\r\n                                            key={dayIdx}\r\n                                            className={`p-1 border-r border-white/5 last:border-r-0 min-h-[60px] ${isToday(day) ? 'bg-gold-500/5' : ''\r\n                                                }`}\r\n                                        >\r\n                                            {slotBookings.map((booking) => (\r\n                                                <button\r\n                                                    key={booking.id}\r\n                                                    onClick={() => setSelectedBooking(booking)}\r\n                                                    className={`w-full p-1.5 rounded-lg text-left text-xs text-white mb-1 hover:opacity-80 transition-opacity ${booking.staff ? getStaffColor(booking.staff.id) : 'bg-gray-500'\r\n                                                        }`}\r\n                                                >\r\n                                                    <p className=\"font-medium truncate\">{booking.customer_name}</p>\r\n                                                    <p className=\"opacity-75 truncate text-[10px]\">\r\n                                                        {booking.start_time.slice(0, 5)}\r\n                                                    </p>\r\n                                                </button>\r\n                                            ))}\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Staff Legend */}\r\n            {staff.length > 0 && (\r\n                <div className=\"bg-richblack-800 border border-white/5 rounded-2xl p-4\">\r\n                    <p className=\"text-white/40 text-xs uppercase tracking-wider mb-3\">Staff Legend</p>\r\n                    <div className=\"flex flex-wrap gap-3\">\r\n                        {staff.map((s) => (\r\n                            <div key={s.id} className=\"flex items-center gap-2\">\r\n                                <div className={`w-3 h-3 rounded-full ${getStaffColor(s.id)}`} />\r\n                                <span className=\"text-white text-sm\">{s.name}</span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Booking Detail Modal */}\r\n            <AnimatePresence>\r\n                {selectedBooking && (\r\n                    <BookingDetailModal\r\n                        booking={selectedBooking}\r\n                        onClose={() => setSelectedBooking(null)}\r\n                        formatCurrency={formatCurrency}\r\n                    />\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n\r\n// =====================================================\r\n// BOOKING DETAIL MODAL\r\n// =====================================================\r\nfunction BookingDetailModal({ booking, onClose, formatCurrency }: {\r\n    booking: CalendarBooking;\r\n    onClose: () => void;\r\n    formatCurrency: (n: number) => string;\r\n}) {\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70\"\r\n            onClick={onClose}\r\n        >\r\n            <motion.div\r\n                initial={{ opacity: 0, scale: 0.95 }}\r\n                animate={{ opacity: 1, scale: 1 }}\r\n                exit={{ opacity: 0, scale: 0.95 }}\r\n                onClick={(e) => e.stopPropagation()}\r\n                className=\"bg-richblack-800 border border-white/10 rounded-2xl p-6 w-full max-w-md\"\r\n            >\r\n                {/* Header */}\r\n                <div className=\"flex items-start justify-between mb-6\">\r\n                    <div>\r\n                        <h2 className=\"text-xl font-bold text-white\">{booking.customer_name}</h2>\r\n                        <p className=\"text-white/40 text-sm\">\r\n                            {new Date(booking.booking_date).toLocaleDateString('en-US', {\r\n                                weekday: 'long',\r\n                                month: 'long',\r\n                                day: 'numeric'\r\n                            })}\r\n                        </p>\r\n                    </div>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"p-2 text-white/40 hover:text-white hover:bg-white/5 rounded-lg transition-colors\"\r\n                    >\r\n                        <X className=\"w-5 h-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Details */}\r\n                <div className=\"space-y-4\">\r\n                    {/* Time & Staff */}\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"flex items-center gap-2 text-white/60\">\r\n                            <Clock className=\"w-4 h-4\" />\r\n                            <span>{booking.start_time.slice(0, 5)} - {booking.end_time.slice(0, 5)}</span>\r\n                        </div>\r\n                        {booking.staff && (\r\n                            <div className=\"flex items-center gap-2 text-white/60\">\r\n                                <Users className=\"w-4 h-4\" />\r\n                                <span>{booking.staff.name}</span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Contact */}\r\n                    <div className=\"space-y-2\">\r\n                        <div className=\"flex items-center gap-2 text-white/60\">\r\n                            <Mail className=\"w-4 h-4\" />\r\n                            <span className=\"text-sm\">{booking.customer_email}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2 text-white/60\">\r\n                            <Phone className=\"w-4 h-4\" />\r\n                            <span className=\"text-sm\">{booking.customer_phone}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Services */}\r\n                    <div>\r\n                        <p className=\"text-white/40 text-xs uppercase mb-2\">Services</p>\r\n                        <div className=\"space-y-1\">\r\n                            {booking.services.map((s, idx) => (\r\n                                <p key={idx} className=\"text-white text-sm\">\r\n                                    • {s.service.name} ({s.service.duration_minutes} min)\r\n                                </p>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Price & Status */}\r\n                    <div className=\"flex items-center justify-between pt-4 border-t border-white/10\">\r\n                        <div>\r\n                            <p className=\"text-white/40 text-xs\">Total</p>\r\n                            <p className=\"text-gold-500 text-xl font-bold\">{formatCurrency(booking.total_price)}</p>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            {booking.payment_status === 'paid' ? (\r\n                                <div className=\"flex items-center gap-1.5 px-3 py-1.5 bg-green-500/10 text-green-500 rounded-full text-xs font-medium\">\r\n                                    <CheckCircle className=\"w-3.5 h-3.5\" />\r\n                                    Paid\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"flex items-center gap-1.5 px-3 py-1.5 bg-yellow-500/10 text-yellow-500 rounded-full text-xs font-medium\">\r\n                                    <AlertCircle className=\"w-3.5 h-3.5\" />\r\n                                    {booking.payment_status}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Notes */}\r\n                    {booking.notes && (\r\n                        <div className=\"pt-4 border-t border-white/10\">\r\n                            <p className=\"text-white/40 text-xs uppercase mb-1\">Notes</p>\r\n                            <p className=\"text-white/60 text-sm\">{booking.notes}</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </motion.div>\r\n        </motion.div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\admin\\dashboard\\content\\page.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":118,"column":33,"nodeType":"JSXOpeningElement","endLine":122,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    Image as ImageIcon,\r\n    Plus,\r\n    Trash2,\r\n    Eye,\r\n    EyeOff,\r\n    Loader2,\r\n    X,\r\n    Save,\r\n    Monitor\r\n} from 'lucide-react';\r\nimport { ImageUpload } from '@/components/ui/ImageUpload';\r\nimport { getAllHeroSlides, createHeroSlide, updateHeroSlide, deleteHeroSlide } from '@/utils/supabase/queries';\r\nimport type { HeroSlide } from '@/types/database';\r\n\r\nexport default function ContentPage() {\r\n    const [slides, setSlides] = useState<HeroSlide[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [showAddModal, setShowAddModal] = useState(false);\r\n\r\n    useEffect(() => {\r\n        loadSlides();\r\n    }, []);\r\n\r\n    async function loadSlides() {\r\n        setIsLoading(true);\r\n        try {\r\n            const data = await getAllHeroSlides();\r\n            setSlides(data);\r\n        } catch (error) {\r\n            console.error('Failed to load slides:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    async function handleToggleActive(slide: HeroSlide) {\r\n        const result = await updateHeroSlide(slide.id, { is_active: !slide.is_active });\r\n        if (result.success) {\r\n            setSlides(slides.map(s => s.id === slide.id ? { ...s, is_active: !s.is_active } : s));\r\n        }\r\n    }\r\n\r\n    async function handleDelete(id: string) {\r\n        if (!confirm('Delete this slide?')) return;\r\n        const result = await deleteHeroSlide(id);\r\n        if (result.success) {\r\n            setSlides(slides.filter(s => s.id !== id));\r\n        }\r\n    }\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"h-[60vh] flex items-center justify-center\">\r\n                <Loader2 className=\"w-8 h-8 text-gold-500 animate-spin\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"max-w-5xl mx-auto space-y-6 pb-20\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-display font-bold text-white mb-2\">Hero Carousel</h1>\r\n                    <p className=\"text-white/40\">Manage the rotating images on your landing page.</p>\r\n                </div>\r\n                <button\r\n                    onClick={() => setShowAddModal(true)}\r\n                    className=\"flex items-center gap-2 bg-gold-500 hover:bg-gold-400 text-black font-bold px-6 py-3 rounded-xl transition-all shadow-lg shadow-gold-500/20\"\r\n                >\r\n                    <Plus className=\"w-5 h-5\" />\r\n                    Add Slide\r\n                </button>\r\n            </div>\r\n\r\n            {/* Info Banner */}\r\n            <div className=\"bg-blue-900/20 border border-blue-500/30 rounded-xl p-4 flex items-start gap-3\">\r\n                <Monitor className=\"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0\" />\r\n                <p className=\"text-sm text-blue-300/80\">\r\n                    Upload high-quality images (1920×1080 recommended). Active slides will automatically cycle every 5 seconds on the landing page.\r\n                </p>\r\n            </div>\r\n\r\n            {/* Slides Grid */}\r\n            {slides.length === 0 ? (\r\n                <div className=\"bg-richblack-800 border border-white/5 rounded-2xl p-12 text-center\">\r\n                    <div className=\"w-16 h-16 mx-auto rounded-full bg-white/5 flex items-center justify-center mb-4\">\r\n                        <ImageIcon className=\"w-8 h-8 text-white/20\" />\r\n                    </div>\r\n                    <h3 className=\"text-lg font-bold text-white mb-2\">No Slides Yet</h3>\r\n                    <p className=\"text-white/40 mb-6\">Add your first hero image to start the carousel.</p>\r\n                    <button\r\n                        onClick={() => setShowAddModal(true)}\r\n                        className=\"inline-flex items-center gap-2 bg-gold-500 hover:bg-gold-400 text-black font-bold px-6 py-3 rounded-xl transition-all\"\r\n                    >\r\n                        <Plus className=\"w-5 h-5\" />\r\n                        Add First Slide\r\n                    </button>\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {slides.map((slide, index) => (\r\n                        <motion.div\r\n                            key={slide.id}\r\n                            initial={{ opacity: 0, y: 10 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ delay: index * 0.05 }}\r\n                            className={`relative group bg-richblack-800 border rounded-xl overflow-hidden ${slide.is_active ? 'border-gold-500/50' : 'border-white/10 opacity-60'\r\n                                }`}\r\n                        >\r\n                            {/* Image */}\r\n                            <div className=\"aspect-video relative\">\r\n                                <img\r\n                                    src={slide.image_url}\r\n                                    alt={slide.title || 'Slide'}\r\n                                    className=\"w-full h-full object-cover\"\r\n                                />\r\n                                {/* Overlay on hover */}\r\n                                <div className=\"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3\">\r\n                                    <button\r\n                                        onClick={() => handleToggleActive(slide)}\r\n                                        className={`p-3 rounded-full transition-colors ${slide.is_active\r\n                                            ? 'bg-white/10 hover:bg-white/20 text-white'\r\n                                            : 'bg-gold-500/20 hover:bg-gold-500/40 text-gold-500'\r\n                                            }`}\r\n                                        title={slide.is_active ? 'Hide' : 'Show'}\r\n                                    >\r\n                                        {slide.is_active ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => handleDelete(slide.id)}\r\n                                        className=\"p-3 rounded-full bg-red-500/20 hover:bg-red-500/40 text-red-500 transition-colors\"\r\n                                        title=\"Delete\"\r\n                                    >\r\n                                        <Trash2 className=\"w-5 h-5\" />\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {/* Order Badge */}\r\n                                <div className=\"absolute top-2 left-2 bg-black/70 px-2 py-1 rounded text-xs font-mono text-white/60\">\r\n                                    #{index + 1}\r\n                                </div>\r\n\r\n                                {/* Active Badge */}\r\n                                {slide.is_active && (\r\n                                    <div className=\"absolute top-2 right-2 bg-gold-500/90 px-2 py-1 rounded text-xs font-bold text-black\">\r\n                                        ACTIVE\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Info */}\r\n                            {(slide.title || slide.subtitle) && (\r\n                                <div className=\"p-4 border-t border-white/5\">\r\n                                    {slide.title && <h4 className=\"font-bold text-white text-sm truncate\">{slide.title}</h4>}\r\n                                    {slide.subtitle && <p className=\"text-white/40 text-xs truncate\">{slide.subtitle}</p>}\r\n                                </div>\r\n                            )}\r\n                        </motion.div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Add Slide Modal */}\r\n            <AnimatePresence>\r\n                {showAddModal && (\r\n                    <AddSlideModal\r\n                        onClose={() => setShowAddModal(false)}\r\n                        onSuccess={() => {\r\n                            setShowAddModal(false);\r\n                            loadSlides();\r\n                        }}\r\n                    />\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction AddSlideModal({ onClose, onSuccess }: { onClose: () => void; onSuccess: () => void }) {\r\n    const [imageUrl, setImageUrl] = useState('');\r\n    const [title, setTitle] = useState('');\r\n    const [subtitle, setSubtitle] = useState('');\r\n    const [isSaving, setIsSaving] = useState(false);\r\n\r\n    async function handleSave() {\r\n        if (!imageUrl) {\r\n            alert('Please upload an image first');\r\n            return;\r\n        }\r\n\r\n        setIsSaving(true);\r\n        try {\r\n            const result = await createHeroSlide({ image_url: imageUrl, title, subtitle });\r\n            if (result.success) {\r\n                onSuccess();\r\n            } else {\r\n                alert('Failed to save: ' + result.error);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error saving slide:', error);\r\n            alert('An unexpected error occurred');\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\r\n            onClick={onClose}\r\n        >\r\n            <motion.div\r\n                initial={{ scale: 0.95, opacity: 0 }}\r\n                animate={{ scale: 1, opacity: 1 }}\r\n                exit={{ scale: 0.95, opacity: 0 }}\r\n                className=\"bg-richblack-800 border border-white/10 rounded-2xl w-full max-w-lg p-6 space-y-6\"\r\n                onClick={e => e.stopPropagation()}\r\n            >\r\n                {/* Header */}\r\n                <div className=\"flex items-center justify-between\">\r\n                    <h2 className=\"text-xl font-display font-bold text-white\">Add New Slide</h2>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-white/10 rounded-lg text-white/40 hover:text-white\">\r\n                        <X className=\"w-5 h-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Image Upload */}\r\n                <div>\r\n                    <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-3\">Slide Image</label>\r\n                    <div className=\"h-48\">\r\n                        <ImageUpload\r\n                            bucketName=\"shop-assets\"\r\n                            folderPath=\"hero-slides\"\r\n                            currentImage={imageUrl}\r\n                            onUploadComplete={setImageUrl}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Optional Fields */}\r\n                <div className=\"space-y-4\">\r\n                    <div>\r\n                        <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">\r\n                            Title (Optional)\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={title}\r\n                            onChange={e => setTitle(e.target.value)}\r\n                            className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-gold-500 focus:outline-none\"\r\n                            placeholder=\"e.g., Premium Cuts\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">\r\n                            Subtitle (Optional)\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={subtitle}\r\n                            onChange={e => setSubtitle(e.target.value)}\r\n                            className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-gold-500 focus:outline-none\"\r\n                            placeholder=\"e.g., Experience the best in grooming\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex gap-3 pt-4\">\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"flex-1 px-4 py-3 border border-white/10 rounded-xl text-white font-bold hover:bg-white/5 transition-colors\"\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                    <button\r\n                        onClick={handleSave}\r\n                        disabled={isSaving || !imageUrl}\r\n                        className=\"flex-1 flex items-center justify-center gap-2 bg-gold-500 hover:bg-gold-400 text-black font-bold px-4 py-3 rounded-xl transition-all disabled:opacity-50\"\r\n                    >\r\n                        {isSaving ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : <Save className=\"w-5 h-5\" />}\r\n                        {isSaving ? 'Saving...' : 'Save Slide'}\r\n                    </button>\r\n                </div>\r\n            </motion.div>\r\n        </motion.div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\admin\\dashboard\\customers\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'User' is defined but never used.","line":6,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"User"},"fix":{"range":[134,139],"text":""},"desc":"Remove unused variable \"User\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":14,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":16,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckCircle"},"fix":{"range":[235,253],"text":""},"desc":"Remove unused variable \"CheckCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'XCircle' is defined but never used.","line":15,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":12,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"XCircle"},"fix":{"range":[253,267],"text":""},"desc":"Remove unused variable \"XCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":25,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":17},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array.","line":36,"column":8,"nodeType":"ArrayExpression","endLine":36,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [id, loadData]","fix":{"range":[1080,1084],"text":"[id, loadData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport {\r\n    User,\r\n    Phone,\r\n    Mail,\r\n    Calendar,\r\n    MessageSquare,\r\n    Save,\r\n    ArrowLeft,\r\n    Clock,\r\n    CheckCircle,\r\n    XCircle,\r\n    Loader2\r\n} from 'lucide-react';\r\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\r\nimport { getCustomerById, getBookings, updateCustomerNotes } from '@/utils/supabase/queries';\r\nimport { Customer, BookingWithDetails } from '@/types/database';\r\nimport Link from 'next/link';\r\n\r\nexport default function CustomerDetailPage() {\r\n    const params = useParams();\r\n    const router = useRouter();\r\n    const id = params.id as string;\r\n\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [customer, setCustomer] = useState<Customer | null>(null);\r\n    const [bookings, setBookings] = useState<BookingWithDetails[]>([]);\r\n    const [notes, setNotes] = useState('');\r\n    const [isSavingNotes, setIsSavingNotes] = useState(false);\r\n\r\n    useEffect(() => {\r\n        loadData();\r\n    }, [id]);\r\n\r\n    async function loadData() {\r\n        setIsLoading(true);\r\n        try {\r\n            const customerData = await getCustomerById(id);\r\n            if (!customerData) {\r\n                // Handle 404\r\n                return;\r\n            }\r\n            setCustomer(customerData);\r\n            setNotes(customerData.notes || '');\r\n\r\n            // Fetch bookings for this customer\r\n            const customerBookings = await getBookings({\r\n                customer_email: customerData.email\r\n            });\r\n            setBookings(customerBookings);\r\n\r\n        } catch (error) {\r\n            console.error('Failed to load customer data', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    async function handleSaveNotes() {\r\n        if (!customer) return;\r\n        setIsSavingNotes(true);\r\n        try {\r\n            const result = await updateCustomerNotes(customer.id, notes);\r\n            if (result.success) {\r\n                // Optional: Show toast\r\n            } else {\r\n                alert('Failed to save notes');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error saving notes:', error);\r\n        } finally {\r\n            setIsSavingNotes(false);\r\n        }\r\n    }\r\n\r\n    if (isLoading) return <div className=\"h-[60vh] flex items-center justify-center\"><LoadingSpinner /></div>;\r\n    if (!customer) return <div className=\"text-white text-center py-20\">Customer not found</div>;\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto space-y-8\">\r\n            {/* Back Button */}\r\n            <Link href=\"/admin/dashboard/customers\" className=\"inline-flex items-center gap-2 text-white/40 hover:text-white transition-colors\">\r\n                <ArrowLeft className=\"w-4 h-4\" />\r\n                Back to Customers\r\n            </Link>\r\n\r\n            {/* Header */}\r\n            <div className=\"flex flex-col md:flex-row md:items-start justify-between gap-6\">\r\n                <div className=\"flex items-center gap-6\">\r\n                    <div className=\"w-20 h-20 rounded-full bg-gradient-to-br from-gold-500 to-gold-600 flex items-center justify-center text-black font-bold text-3xl shadow-lg shadow-gold-500/10\">\r\n                        {customer.full_name.charAt(0).toUpperCase()}\r\n                    </div>\r\n                    <div>\r\n                        <h1 className=\"text-3xl font-display font-bold text-white mb-1\">{customer.full_name}</h1>\r\n                        <div className=\"flex items-center gap-4 text-sm text-white/60\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <Mail className=\"w-4 h-4 text-gold-500/50\" />\r\n                                {customer.email}\r\n                            </div>\r\n                            {customer.phone && (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <Phone className=\"w-4 h-4 text-gold-500/50\" />\r\n                                    {customer.phone}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex gap-4\">\r\n                    <div className=\"bg-richblack-800 border border-white/5 rounded-xl px-6 py-4 text-center\">\r\n                        <div className=\"text-2xl font-bold text-white\">{customer.total_bookings}</div>\r\n                        <div className=\"text-xs uppercase tracking-wider text-white/40\">Total Visits</div>\r\n                    </div>\r\n                    {/* Could add Total Spend here later */}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                {/* Left Column: Notes & Info */}\r\n                <div className=\"space-y-8\">\r\n                    {/* Private Notes */}\r\n                    <div className=\"bg-richblack-800 border border-white/5 rounded-2xl overflow-hidden\">\r\n                        <div className=\"p-4 border-b border-white/5 flex items-center justify-between bg-white/5\">\r\n                            <div className=\"flex items-center gap-2 text-white font-bold\">\r\n                                <MessageSquare className=\"w-4 h-4 text-gold-500\" />\r\n                                Private Notes\r\n                            </div>\r\n                            <button\r\n                                onClick={handleSaveNotes}\r\n                                disabled={isSavingNotes}\r\n                                className=\"text-xs bg-gold-500 text-black font-bold px-3 py-1.5 rounded-lg flex items-center gap-2 hover:bg-gold-400 disabled:opacity-50 transition-all\"\r\n                            >\r\n                                {isSavingNotes ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : <Save className=\"w-3 h-3\" />}\r\n                                Save\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"p-4\">\r\n                            <textarea\r\n                                value={notes}\r\n                                onChange={(e) => setNotes(e.target.value)}\r\n                                className=\"w-full h-40 bg-richblack-900 border border-white/10 rounded-xl p-4 text-white text-sm focus:border-gold-500/50 focus:outline-none resize-none\"\r\n                                placeholder=\"Add private notes about this client (preferences, allergies, topics to avoid, etc)...\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Right Column: Booking History */}\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n                    <h2 className=\"text-xl font-bold text-white flex items-center gap-2\">\r\n                        <Calendar className=\"w-5 h-5 text-gold-500\" />\r\n                        Booking History\r\n                    </h2>\r\n\r\n                    <div className=\"space-y-4\">\r\n                        {bookings.map((booking) => (\r\n                            <div key={booking.id} className=\"bg-richblack-800 border border-white/5 rounded-2xl p-6 hover:border-white/10 transition-all\">\r\n                                <div className=\"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-4\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"bg-white/5 p-2.5 rounded-lg text-white\">\r\n                                            <Calendar className=\"w-5 h-5\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <div className=\"font-bold text-white\">\r\n                                                {new Date(booking.booking_date).toLocaleDateString('en-GB', {\r\n                                                    weekday: 'short',\r\n                                                    day: 'numeric',\r\n                                                    month: 'long',\r\n                                                    year: 'numeric'\r\n                                                })}\r\n                                            </div>\r\n                                            <div className=\"text-sm text-white/40 flex items-center gap-2\">\r\n                                                <Clock className=\"w-3 h-3\" />\r\n                                                {booking.booking_time.substring(0, 5)}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className={`px-3 py-1 text-xs font-bold rounded-full border ${booking.status === 'confirmed' ? 'bg-green-500/10 text-green-400 border-green-500/20' :\r\n                                            booking.status === 'completed' ? 'bg-blue-500/10 text-blue-400 border-blue-500/20' :\r\n                                                'bg-red-500/10 text-red-400 border-red-500/20'\r\n                                        }`}>\r\n                                        {booking.status.toUpperCase()}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"border-t border-white/5 pt-4 grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                                    <div>\r\n                                        <div className=\"text-xs uppercase tracking-wider text-white/40 mb-1\">Service</div>\r\n                                        <div className=\"text-white font-medium\">{booking.service?.name || 'Unknown Service'}</div>\r\n                                        {booking.addons && booking.addons.length > 0 && (\r\n                                            <div className=\"text-sm text-white/60 mt-1\">\r\n                                                + {booking.addons.map(a => a.name).join(', ')}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                    <div>\r\n                                        <div className=\"text-xs uppercase tracking-wider text-white/40 mb-1\">Barber</div>\r\n                                        <div className=\"text-white font-medium\">{booking.staff?.name || 'Any Barber'}</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n\r\n                        {bookings.length === 0 && (\r\n                            <div className=\"text-center py-10 text-white/40 bg-white/5 rounded-2xl border border-dashed border-white/10\">\r\n                                <p>No booking history found.</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\admin\\dashboard\\customers\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":7,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Filter"},"fix":{"range":[95,108],"text":""},"desc":"Remove unused variable \"Filter\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageSquare' is defined but never used.","line":12,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":18,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"MessageSquare"},"fix":{"range":[163,183],"text":""},"desc":"Remove unused variable \"MessageSquare\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Loader2' is defined but never used.","line":13,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":12,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Loader2"},"fix":{"range":[183,197],"text":""},"desc":"Remove unused variable \"Loader2\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport {\r\n    Users,\r\n    Search,\r\n    Filter,\r\n    ArrowRight,\r\n    Phone,\r\n    Mail,\r\n    Calendar,\r\n    MessageSquare,\r\n    Loader2\r\n} from 'lucide-react';\r\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\r\nimport { getCustomers } from '@/utils/supabase/queries';\r\nimport { Customer } from '@/types/database';\r\nimport Link from 'next/link';\r\n\r\nexport default function CustomersPage() {\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [customers, setCustomers] = useState<Customer[]>([]);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n\r\n    useEffect(() => {\r\n        loadCustomers();\r\n    }, []);\r\n\r\n    async function loadCustomers() {\r\n        setIsLoading(true);\r\n        try {\r\n            const data = await getCustomers();\r\n            setCustomers(data);\r\n        } catch (error) {\r\n            console.error('Failed to load customers', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    const filteredCustomers = customers.filter(c =>\r\n        c.full_name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        c.email.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        (c.phone && c.phone.includes(searchQuery))\r\n    );\r\n\r\n    function formatDate(dateString: string | null) {\r\n        if (!dateString) return 'Never';\r\n        return new Date(dateString).toLocaleDateString('en-GB', {\r\n            day: 'numeric',\r\n            month: 'short',\r\n            year: 'numeric'\r\n        });\r\n    }\r\n\r\n    if (isLoading) return <div className=\"h-[60vh] flex items-center justify-center\"><LoadingSpinner /></div>;\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto space-y-8\">\r\n\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-display font-bold text-white mb-2\">Customer Management</h1>\r\n                    <p className=\"text-white/40\">View and manage your client relationships.</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <div className=\"bg-richblack-800 border border-white/5 p-4 rounded-xl flex items-center gap-4\">\r\n                <div className=\"flex-1 relative\">\r\n                    <Search className=\"absolute left-3 top-3 w-5 h-5 text-white/20\" />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search customers by name, email, or phone...\"\r\n                        className=\"w-full bg-richblack-900 border border-white/10 rounded-lg pl-10 pr-4 py-2.5 text-white focus:border-gold-500/50 focus:outline-none\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                    />\r\n                </div>\r\n                <div className=\"text-sm text-white/40 px-3\">\r\n                    {filteredCustomers.length} {filteredCustomers.length === 1 ? 'Customer' : 'Customers'}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Customers List */}\r\n            <div className=\"space-y-4\">\r\n                {filteredCustomers.map((customer) => (\r\n                    <Link\r\n                        key={customer.id}\r\n                        href={`/admin/dashboard/customers/${customer.id}`}\r\n                        className=\"block bg-richblack-800 border border-white/5 rounded-xl hover:border-gold-500/30 hover:bg-white/5 transition-all group\"\r\n                    >\r\n                        <div className=\"p-6 flex flex-col md:flex-row md:items-center gap-6\">\r\n\r\n                            {/* Avatar / Initials */}\r\n                            <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-gold-500/20 to-gold-600/20 flex items-center justify-center text-gold-500 font-bold text-xl border border-gold-500/20\">\r\n                                {customer.full_name.charAt(0).toUpperCase()}\r\n                            </div>\r\n\r\n                            {/* Info */}\r\n                            <div className=\"flex-1 grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                                <div>\r\n                                    <h3 className=\"font-bold text-white text-lg group-hover:text-gold-400 transition-colors\">\r\n                                        {customer.full_name}\r\n                                    </h3>\r\n                                    <div className=\"flex items-center gap-2 text-sm text-white/40 mt-1\">\r\n                                        <Mail className=\"w-3 h-3\" />\r\n                                        {customer.email}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"space-y-1\">\r\n                                    <div className=\"flex items-center gap-2 text-sm text-white/60\">\r\n                                        <Phone className=\"w-3 h-3 text-gold-500/50\" />\r\n                                        {customer.phone || 'No phone'}\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2 text-sm text-white/60\">\r\n                                        <Calendar className=\"w-3 h-3 text-gold-500/50\" />\r\n                                        Last Visit: {formatDate(customer.last_booking_date)}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center justify-between md:justify-end gap-6 text-sm\">\r\n                                    <div className=\"text-right\">\r\n                                        <div className=\"text-white font-bold text-lg\">{customer.total_bookings}</div>\r\n                                        <div className=\"text-white/40 text-xs uppercase tracking-wider\">Bookings</div>\r\n                                    </div>\r\n                                    <ArrowRight className=\"w-5 h-5 text-white/20 group-hover:text-gold-500 group-hover:translate-x-1 transition-all\" />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </Link>\r\n                ))}\r\n\r\n                {filteredCustomers.length === 0 && (\r\n                    <div className=\"py-20 text-center text-white/40\">\r\n                        <Users className=\"w-16 h-16 mx-auto mb-4 opacity-20\" />\r\n                        <p className=\"text-lg\">No customers found.</p>\r\n                        {searchQuery && <p className=\"text-sm mt-2\">Try adjusting your search terms.</p>}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\admin\\dashboard\\finance\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":12,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Filter"},"fix":{"range":[220,233],"text":""},"desc":"Remove unused variable \"Filter\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":13,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Download"},"fix":{"range":[233,248],"text":""},"desc":"Remove unused variable \"Download\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Edit' is defined but never used.","line":25,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Edit"},"fix":{"range":[410,421],"text":""},"desc":"Remove unused variable \"Edit\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":70,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2243,2246],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2243,2246],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":81,"column":8,"nodeType":"ArrayExpression","endLine":81,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [dateRange, fetchData]","fix":{"range":[2668,2679],"text":"[dateRange, fetchData]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":224,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":224,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9045,9048],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9045,9048],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":297,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":297,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12725,12728],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12725,12728],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'staff' is defined but never used.","line":374,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":374,"endColumn":37},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":428,"column":97,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":428,"endColumn":100,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19452,19455],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19452,19455],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    DollarSign,\r\n    Receipt,\r\n    Users,\r\n    TrendingUp,\r\n    TrendingDown,\r\n    Wallet,\r\n    Filter,\r\n    Download,\r\n    Plus,\r\n    Loader2,\r\n    Calendar,\r\n    Building2,\r\n    ShoppingBag,\r\n    Zap,\r\n    MoreHorizontal,\r\n    CheckCircle,\r\n    Clock,\r\n    XCircle,\r\n    Trash2,\r\n    Edit,\r\n    X\r\n} from 'lucide-react';\r\nimport {\r\n    getTransactions,\r\n    getPayrollRecords,\r\n    getExpenses,\r\n    getFinancialSummary,\r\n    createExpense,\r\n    deleteExpense,\r\n    createPayrollRecord,\r\n    updatePayrollRecord,\r\n    deletePayrollRecord,\r\n    getStaff\r\n} from '@/utils/supabase/queries';\r\nimport type { StaffPayroll, Expense, ExpenseCategory, Staff } from '@/types/database';\r\n\r\ntype TabId = 'overview' | 'transactions' | 'payroll' | 'expenses';\r\n\r\nconst TABS = [\r\n    { id: 'overview' as TabId, label: 'Overview', icon: TrendingUp },\r\n    { id: 'transactions' as TabId, label: 'Transactions', icon: Receipt },\r\n    { id: 'payroll' as TabId, label: 'Payroll', icon: Users },\r\n    { id: 'expenses' as TabId, label: 'Expenses', icon: Wallet },\r\n];\r\n\r\nconst EXPENSE_CATEGORIES: { value: ExpenseCategory; label: string; icon: typeof Building2 }[] = [\r\n    { value: 'rent', label: 'Rent', icon: Building2 },\r\n    { value: 'supplies', label: 'Supplies', icon: ShoppingBag },\r\n    { value: 'utilities', label: 'Utilities', icon: Zap },\r\n    { value: 'equipment', label: 'Equipment', icon: MoreHorizontal },\r\n    { value: 'marketing', label: 'Marketing', icon: TrendingUp },\r\n    { value: 'other', label: 'Other', icon: MoreHorizontal },\r\n];\r\n\r\nexport default function FinancePage() {\r\n    const [activeTab, setActiveTab] = useState<TabId>('overview');\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [dateRange, setDateRange] = useState({\r\n        start: new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString().split('T')[0],\r\n        end: new Date().toISOString().split('T')[0],\r\n    });\r\n\r\n    // Data states\r\n    const [summary, setSummary] = useState({ revenue: 0, expenses: 0, payroll: 0, profit: 0, bookingCount: 0 });\r\n    const [transactions, setTransactions] = useState<any[]>([]);\r\n    const [payrollRecords, setPayrollRecords] = useState<StaffPayroll[]>([]);\r\n    const [expenseRecords, setExpenses] = useState<Expense[]>([]);\r\n    const [staff, setStaff] = useState<Staff[]>([]);\r\n\r\n    // Modals\r\n    const [showExpenseModal, setShowExpenseModal] = useState(false);\r\n    const [showPayrollModal, setShowPayrollModal] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [dateRange]);\r\n\r\n    async function fetchData() {\r\n        setIsLoading(true);\r\n        try {\r\n            const [summaryData, txData, payrollData, expenseData, staffData] = await Promise.all([\r\n                getFinancialSummary(dateRange.start, dateRange.end),\r\n                getTransactions({ startDate: dateRange.start, endDate: dateRange.end }),\r\n                getPayrollRecords({ startDate: dateRange.start, endDate: dateRange.end }),\r\n                getExpenses({ startDate: dateRange.start, endDate: dateRange.end }),\r\n                getStaff(),\r\n            ]);\r\n            setSummary(summaryData);\r\n            setTransactions(txData);\r\n            setPayrollRecords(payrollData);\r\n            setExpenses(expenseData);\r\n            setStaff(staffData);\r\n        } catch (error) {\r\n            console.error('Error fetching financial data:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    const formatCurrency = (amount: number) => {\r\n        return new Intl.NumberFormat('en-GH', { style: 'currency', currency: 'GHS' }).format(amount);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-white\">Financial Management</h1>\r\n                    <p className=\"text-white/40 text-sm mt-1\">Track revenue, expenses, and payroll</p>\r\n                </div>\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"flex items-center gap-2 bg-richblack-800 border border-white/10 rounded-xl px-3 py-2\">\r\n                        <Calendar className=\"w-4 h-4 text-white/40\" />\r\n                        <input\r\n                            type=\"date\"\r\n                            value={dateRange.start}\r\n                            onChange={(e) => setDateRange(prev => ({ ...prev, start: e.target.value }))}\r\n                            className=\"bg-transparent text-white text-sm border-none outline-none\"\r\n                        />\r\n                        <span className=\"text-white/40\">to</span>\r\n                        <input\r\n                            type=\"date\"\r\n                            value={dateRange.end}\r\n                            onChange={(e) => setDateRange(prev => ({ ...prev, end: e.target.value }))}\r\n                            className=\"bg-transparent text-white text-sm border-none outline-none\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Tabs */}\r\n            <div className=\"flex gap-1 bg-richblack-800 p-1 rounded-xl border border-white/5 overflow-x-auto\">\r\n                {TABS.map((tab) => {\r\n                    const Icon = tab.icon;\r\n                    return (\r\n                        <button\r\n                            key={tab.id}\r\n                            onClick={() => setActiveTab(tab.id)}\r\n                            className={`flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${activeTab === tab.id\r\n                                    ? 'bg-gold-500 text-richblack-900'\r\n                                    : 'text-white/60 hover:text-white hover:bg-white/5'\r\n                                }`}\r\n                        >\r\n                            <Icon className=\"w-4 h-4\" />\r\n                            {tab.label}\r\n                        </button>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {isLoading ? (\r\n                <div className=\"flex items-center justify-center py-20\">\r\n                    <Loader2 className=\"w-8 h-8 text-gold-500 animate-spin\" />\r\n                </div>\r\n            ) : (\r\n                <AnimatePresence mode=\"wait\">\r\n                    {activeTab === 'overview' && (\r\n                        <OverviewTab\r\n                            key=\"overview\"\r\n                            summary={summary}\r\n                            formatCurrency={formatCurrency}\r\n                            transactions={transactions}\r\n                        />\r\n                    )}\r\n                    {activeTab === 'transactions' && (\r\n                        <TransactionsTab\r\n                            key=\"transactions\"\r\n                            transactions={transactions}\r\n                            formatCurrency={formatCurrency}\r\n                        />\r\n                    )}\r\n                    {activeTab === 'payroll' && (\r\n                        <PayrollTab\r\n                            key=\"payroll\"\r\n                            records={payrollRecords}\r\n                            staff={staff}\r\n                            formatCurrency={formatCurrency}\r\n                            onAdd={() => setShowPayrollModal(true)}\r\n                            onRefresh={fetchData}\r\n                        />\r\n                    )}\r\n                    {activeTab === 'expenses' && (\r\n                        <ExpensesTab\r\n                            key=\"expenses\"\r\n                            expenses={expenseRecords}\r\n                            formatCurrency={formatCurrency}\r\n                            onAdd={() => setShowExpenseModal(true)}\r\n                            onRefresh={fetchData}\r\n                        />\r\n                    )}\r\n                </AnimatePresence>\r\n            )}\r\n\r\n            {/* Add Expense Modal */}\r\n            <ExpenseModal\r\n                isOpen={showExpenseModal}\r\n                onClose={() => setShowExpenseModal(false)}\r\n                onSuccess={fetchData}\r\n            />\r\n\r\n            {/* Add Payroll Modal */}\r\n            <PayrollModal\r\n                isOpen={showPayrollModal}\r\n                onClose={() => setShowPayrollModal(false)}\r\n                onSuccess={fetchData}\r\n                staff={staff}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\n// =====================================================\r\n// OVERVIEW TAB\r\n// =====================================================\r\nfunction OverviewTab({ summary, formatCurrency, transactions }: {\r\n    summary: { revenue: number; expenses: number; payroll: number; profit: number; bookingCount: number };\r\n    formatCurrency: (n: number) => string;\r\n    transactions: any[];\r\n}) {\r\n    const cards = [\r\n        { label: 'Revenue', value: summary.revenue, icon: TrendingUp, color: 'text-green-500', bg: 'bg-green-500/10' },\r\n        { label: 'Expenses', value: summary.expenses, icon: TrendingDown, color: 'text-red-500', bg: 'bg-red-500/10' },\r\n        { label: 'Payroll', value: summary.payroll, icon: Users, color: 'text-blue-500', bg: 'bg-blue-500/10' },\r\n        { label: 'Profit', value: summary.profit, icon: DollarSign, color: summary.profit >= 0 ? 'text-gold-500' : 'text-red-500', bg: summary.profit >= 0 ? 'bg-gold-500/10' : 'bg-red-500/10' },\r\n    ];\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -10 }}\r\n            className=\"space-y-6\"\r\n        >\r\n            {/* Summary Cards */}\r\n            <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                {cards.map((card) => {\r\n                    const Icon = card.icon;\r\n                    return (\r\n                        <div\r\n                            key={card.label}\r\n                            className=\"bg-richblack-800 border border-white/5 rounded-2xl p-5\"\r\n                        >\r\n                            <div className={`w-10 h-10 ${card.bg} rounded-xl flex items-center justify-center mb-3`}>\r\n                                <Icon className={`w-5 h-5 ${card.color}`} />\r\n                            </div>\r\n                            <p className=\"text-white/40 text-xs uppercase tracking-wider\">{card.label}</p>\r\n                            <p className={`text-2xl font-bold ${card.color} mt-1`}>\r\n                                {formatCurrency(card.value)}\r\n                            </p>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Quick Stats */}\r\n            <div className=\"bg-richblack-800 border border-white/5 rounded-2xl p-6\">\r\n                <h3 className=\"text-white font-bold mb-4\">Quick Stats</h3>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-6\">\r\n                    <div>\r\n                        <p className=\"text-white/40 text-sm\">Total Bookings</p>\r\n                        <p className=\"text-2xl font-bold text-white\">{summary.bookingCount}</p>\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-white/40 text-sm\">Avg. Booking Value</p>\r\n                        <p className=\"text-2xl font-bold text-white\">\r\n                            {formatCurrency(summary.bookingCount > 0 ? summary.revenue / summary.bookingCount : 0)}\r\n                        </p>\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-white/40 text-sm\">Paid Transactions</p>\r\n                        <p className=\"text-2xl font-bold text-green-500\">\r\n                            {transactions.filter(t => t.payment_status === 'paid').length}\r\n                        </p>\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-white/40 text-sm\">Pending Payments</p>\r\n                        <p className=\"text-2xl font-bold text-yellow-500\">\r\n                            {transactions.filter(t => t.payment_status === 'pending').length}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </motion.div>\r\n    );\r\n}\r\n\r\n// =====================================================\r\n// TRANSACTIONS TAB\r\n// =====================================================\r\nfunction TransactionsTab({ transactions, formatCurrency }: {\r\n    transactions: any[];\r\n    formatCurrency: (n: number) => string;\r\n}) {\r\n    const statusConfig: Record<string, { color: string; icon: typeof CheckCircle }> = {\r\n        paid: { color: 'text-green-500 bg-green-500/10', icon: CheckCircle },\r\n        pending: { color: 'text-yellow-500 bg-yellow-500/10', icon: Clock },\r\n        failed: { color: 'text-red-500 bg-red-500/10', icon: XCircle },\r\n    };\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -10 }}\r\n            className=\"bg-richblack-800 border border-white/5 rounded-2xl overflow-hidden\"\r\n        >\r\n            <div className=\"p-4 border-b border-white/5 flex items-center justify-between\">\r\n                <h3 className=\"text-white font-bold\">All Transactions</h3>\r\n                <span className=\"text-white/40 text-sm\">{transactions.length} records</span>\r\n            </div>\r\n\r\n            {transactions.length === 0 ? (\r\n                <div className=\"p-12 text-center\">\r\n                    <Receipt className=\"w-12 h-12 text-white/20 mx-auto mb-4\" />\r\n                    <p className=\"text-white/40\">No transactions in this period</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full\">\r\n                        <thead>\r\n                            <tr className=\"bg-white/5 text-white/40 text-xs uppercase\">\r\n                                <th className=\"text-left px-4 py-3\">Customer</th>\r\n                                <th className=\"text-left px-4 py-3\">Date</th>\r\n                                <th className=\"text-left px-4 py-3\">Staff</th>\r\n                                <th className=\"text-right px-4 py-3\">Amount</th>\r\n                                <th className=\"text-center px-4 py-3\">Status</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {transactions.map((tx) => {\r\n                                const status = statusConfig[tx.payment_status] || statusConfig.pending;\r\n                                const StatusIcon = status.icon;\r\n                                return (\r\n                                    <tr key={tx.id} className=\"border-t border-white/5 hover:bg-white/5\">\r\n                                        <td className=\"px-4 py-3\">\r\n                                            <p className=\"text-white font-medium\">{tx.customer_name}</p>\r\n                                            <p className=\"text-white/40 text-xs\">{tx.customer_email}</p>\r\n                                        </td>\r\n                                        <td className=\"px-4 py-3 text-white/60 text-sm\">\r\n                                            {new Date(tx.booking_date).toLocaleDateString()}\r\n                                        </td>\r\n                                        <td className=\"px-4 py-3 text-white/60 text-sm\">\r\n                                            {tx.staff?.name || '-'}\r\n                                        </td>\r\n                                        <td className=\"px-4 py-3 text-right font-mono text-white\">\r\n                                            {formatCurrency(tx.total_price)}\r\n                                        </td>\r\n                                        <td className=\"px-4 py-3\">\r\n                                            <div className={`inline-flex items-center gap-1.5 px-2 py-1 rounded-full text-xs font-medium ${status.color}`}>\r\n                                                <StatusIcon className=\"w-3 h-3\" />\r\n                                                {tx.payment_status}\r\n                                            </div>\r\n                                        </td>\r\n                                    </tr>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n        </motion.div>\r\n    );\r\n}\r\n\r\n// =====================================================\r\n// PAYROLL TAB\r\n// =====================================================\r\nfunction PayrollTab({ records, staff, formatCurrency, onAdd, onRefresh }: {\r\n    records: StaffPayroll[];\r\n    staff: Staff[];\r\n    formatCurrency: (n: number) => string;\r\n    onAdd: () => void;\r\n    onRefresh: () => void;\r\n}) {\r\n    const handleDelete = async (id: string) => {\r\n        if (!confirm('Delete this payroll record?')) return;\r\n        await deletePayrollRecord(id);\r\n        onRefresh();\r\n    };\r\n\r\n    const handleMarkPaid = async (id: string) => {\r\n        await updatePayrollRecord(id, { status: 'paid', paid_at: new Date().toISOString() });\r\n        onRefresh();\r\n    };\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -10 }}\r\n            className=\"space-y-4\"\r\n        >\r\n            <div className=\"flex items-center justify-between\">\r\n                <h3 className=\"text-white font-bold\">Payroll Records</h3>\r\n                <button\r\n                    onClick={onAdd}\r\n                    className=\"flex items-center gap-2 px-4 py-2 bg-gold-500 text-richblack-900 rounded-xl font-medium text-sm hover:bg-gold-400 transition-colors\"\r\n                >\r\n                    <Plus className=\"w-4 h-4\" />\r\n                    Add Payroll\r\n                </button>\r\n            </div>\r\n\r\n            {records.length === 0 ? (\r\n                <div className=\"bg-richblack-800 border border-white/5 rounded-2xl p-12 text-center\">\r\n                    <Users className=\"w-12 h-12 text-white/20 mx-auto mb-4\" />\r\n                    <p className=\"text-white/40\">No payroll records in this period</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid gap-4\">\r\n                    {records.map((record) => (\r\n                        <div\r\n                            key={record.id}\r\n                            className=\"bg-richblack-800 border border-white/5 rounded-2xl p-5\"\r\n                        >\r\n                            <div className=\"flex items-start justify-between mb-4\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"w-10 h-10 bg-gold-500/10 rounded-full flex items-center justify-center\">\r\n                                        <Users className=\"w-5 h-5 text-gold-500\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <p className=\"text-white font-medium\">{(record.staff as any)?.name || 'Staff'}</p>\r\n                                        <p className=\"text-white/40 text-xs\">\r\n                                            {new Date(record.pay_period_start).toLocaleDateString()} - {new Date(record.pay_period_end).toLocaleDateString()}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className={`px-2 py-1 rounded-full text-xs font-medium ${record.status === 'paid' ? 'bg-green-500/10 text-green-500' :\r\n                                        record.status === 'approved' ? 'bg-blue-500/10 text-blue-500' :\r\n                                            'bg-yellow-500/10 text-yellow-500'\r\n                                    }`}>\r\n                                    {record.status}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm\">\r\n                                <div>\r\n                                    <p className=\"text-white/40\">Base Salary</p>\r\n                                    <p className=\"text-white font-mono\">{formatCurrency(record.base_salary)}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-white/40\">Commission</p>\r\n                                    <p className=\"text-green-500 font-mono\">{formatCurrency(record.commission_earned)}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-white/40\">Bonus</p>\r\n                                    <p className=\"text-gold-500 font-mono\">{formatCurrency(record.bonus)}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-white/40\">Deductions</p>\r\n                                    <p className=\"text-red-500 font-mono\">-{formatCurrency(record.deductions)}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-white/40\">Total Pay</p>\r\n                                    <p className=\"text-white font-bold font-mono\">{formatCurrency(record.total_pay)}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {record.status !== 'paid' && (\r\n                                <div className=\"flex items-center gap-2 mt-4 pt-4 border-t border-white/5\">\r\n                                    <button\r\n                                        onClick={() => handleMarkPaid(record.id)}\r\n                                        className=\"flex items-center gap-1.5 px-3 py-1.5 bg-green-500/10 text-green-500 rounded-lg text-xs font-medium hover:bg-green-500/20 transition-colors\"\r\n                                    >\r\n                                        <CheckCircle className=\"w-3.5 h-3.5\" />\r\n                                        Mark as Paid\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => handleDelete(record.id)}\r\n                                        className=\"flex items-center gap-1.5 px-3 py-1.5 bg-red-500/10 text-red-500 rounded-lg text-xs font-medium hover:bg-red-500/20 transition-colors\"\r\n                                    >\r\n                                        <Trash2 className=\"w-3.5 h-3.5\" />\r\n                                        Delete\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </motion.div>\r\n    );\r\n}\r\n\r\n// =====================================================\r\n// EXPENSES TAB\r\n// =====================================================\r\nfunction ExpensesTab({ expenses, formatCurrency, onAdd, onRefresh }: {\r\n    expenses: Expense[];\r\n    formatCurrency: (n: number) => string;\r\n    onAdd: () => void;\r\n    onRefresh: () => void;\r\n}) {\r\n    const handleDelete = async (id: string) => {\r\n        if (!confirm('Delete this expense?')) return;\r\n        await deleteExpense(id);\r\n        onRefresh();\r\n    };\r\n\r\n    const getCategoryIcon = (category: string) => {\r\n        const cat = EXPENSE_CATEGORIES.find(c => c.value === category);\r\n        return cat?.icon || MoreHorizontal;\r\n    };\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -10 }}\r\n            className=\"space-y-4\"\r\n        >\r\n            <div className=\"flex items-center justify-between\">\r\n                <h3 className=\"text-white font-bold\">Expenses</h3>\r\n                <button\r\n                    onClick={onAdd}\r\n                    className=\"flex items-center gap-2 px-4 py-2 bg-gold-500 text-richblack-900 rounded-xl font-medium text-sm hover:bg-gold-400 transition-colors\"\r\n                >\r\n                    <Plus className=\"w-4 h-4\" />\r\n                    Add Expense\r\n                </button>\r\n            </div>\r\n\r\n            {expenses.length === 0 ? (\r\n                <div className=\"bg-richblack-800 border border-white/5 rounded-2xl p-12 text-center\">\r\n                    <Wallet className=\"w-12 h-12 text-white/20 mx-auto mb-4\" />\r\n                    <p className=\"text-white/40\">No expenses recorded in this period</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"bg-richblack-800 border border-white/5 rounded-2xl overflow-hidden\">\r\n                    <table className=\"w-full\">\r\n                        <thead>\r\n                            <tr className=\"bg-white/5 text-white/40 text-xs uppercase\">\r\n                                <th className=\"text-left px-4 py-3\">Category</th>\r\n                                <th className=\"text-left px-4 py-3\">Description</th>\r\n                                <th className=\"text-left px-4 py-3\">Date</th>\r\n                                <th className=\"text-right px-4 py-3\">Amount</th>\r\n                                <th className=\"text-center px-4 py-3\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {expenses.map((expense) => {\r\n                                const Icon = getCategoryIcon(expense.category);\r\n                                return (\r\n                                    <tr key={expense.id} className=\"border-t border-white/5 hover:bg-white/5\">\r\n                                        <td className=\"px-4 py-3\">\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <div className=\"w-8 h-8 bg-red-500/10 rounded-lg flex items-center justify-center\">\r\n                                                    <Icon className=\"w-4 h-4 text-red-500\" />\r\n                                                </div>\r\n                                                <span className=\"text-white capitalize\">{expense.category}</span>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-4 py-3 text-white/60 text-sm\">\r\n                                            {expense.description || '-'}\r\n                                        </td>\r\n                                        <td className=\"px-4 py-3 text-white/60 text-sm\">\r\n                                            {new Date(expense.expense_date).toLocaleDateString()}\r\n                                        </td>\r\n                                        <td className=\"px-4 py-3 text-right font-mono text-red-500\">\r\n                                            -{formatCurrency(expense.amount)}\r\n                                        </td>\r\n                                        <td className=\"px-4 py-3 text-center\">\r\n                                            <button\r\n                                                onClick={() => handleDelete(expense.id)}\r\n                                                className=\"p-1.5 text-red-500/50 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-colors\"\r\n                                            >\r\n                                                <Trash2 className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n        </motion.div>\r\n    );\r\n}\r\n\r\n// =====================================================\r\n// EXPENSE MODAL\r\n// =====================================================\r\nfunction ExpenseModal({ isOpen, onClose, onSuccess }: {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSuccess: () => void;\r\n}) {\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [form, setForm] = useState({\r\n        category: 'supplies' as ExpenseCategory,\r\n        amount: '',\r\n        description: '',\r\n        expense_date: new Date().toISOString().split('T')[0],\r\n    });\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!form.amount) return;\r\n\r\n        setIsSubmitting(true);\r\n        const result = await createExpense({\r\n            category: form.category,\r\n            amount: parseFloat(form.amount),\r\n            description: form.description,\r\n            expense_date: form.expense_date,\r\n        });\r\n\r\n        if (result.success) {\r\n            onSuccess();\r\n            onClose();\r\n            setForm({ category: 'supplies', amount: '', description: '', expense_date: new Date().toISOString().split('T')[0] });\r\n        }\r\n        setIsSubmitting(false);\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70\">\r\n            <motion.div\r\n                initial={{ opacity: 0, scale: 0.95 }}\r\n                animate={{ opacity: 1, scale: 1 }}\r\n                className=\"bg-richblack-800 border border-white/10 rounded-2xl p-6 w-full max-w-md\"\r\n            >\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                    <h2 className=\"text-xl font-bold text-white\">Add Expense</h2>\r\n                    <button onClick={onClose} className=\"text-white/40 hover:text-white\">\r\n                        <X className=\"w-5 h-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div>\r\n                        <label className=\"block text-white/40 text-xs uppercase mb-2\">Category</label>\r\n                        <select\r\n                            value={form.category}\r\n                            onChange={(e) => setForm(prev => ({ ...prev, category: e.target.value as ExpenseCategory }))}\r\n                            className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white\"\r\n                        >\r\n                            {EXPENSE_CATEGORIES.map(cat => (\r\n                                <option key={cat.value} value={cat.value}>{cat.label}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-white/40 text-xs uppercase mb-2\">Amount (GHS)</label>\r\n                        <input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={form.amount}\r\n                            onChange={(e) => setForm(prev => ({ ...prev, amount: e.target.value }))}\r\n                            className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white\"\r\n                            placeholder=\"0.00\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-white/40 text-xs uppercase mb-2\">Description</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={form.description}\r\n                            onChange={(e) => setForm(prev => ({ ...prev, description: e.target.value }))}\r\n                            className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white\"\r\n                            placeholder=\"Optional description\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-white/40 text-xs uppercase mb-2\">Date</label>\r\n                        <input\r\n                            type=\"date\"\r\n                            value={form.expense_date}\r\n                            onChange={(e) => setForm(prev => ({ ...prev, expense_date: e.target.value }))}\r\n                            className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-3 pt-4\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={onClose}\r\n                            className=\"flex-1 px-4 py-3 border border-white/10 rounded-xl text-white hover:bg-white/5 transition-colors\"\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={isSubmitting}\r\n                            className=\"flex-1 px-4 py-3 bg-gold-500 text-richblack-900 rounded-xl font-medium hover:bg-gold-400 transition-colors disabled:opacity-50\"\r\n                        >\r\n                            {isSubmitting ? <Loader2 className=\"w-5 h-5 animate-spin mx-auto\" /> : 'Save Expense'}\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// =====================================================\r\n// PAYROLL MODAL\r\n// =====================================================\r\nfunction PayrollModal({ isOpen, onClose, onSuccess, staff }: {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSuccess: () => void;\r\n    staff: Staff[];\r\n}) {\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const today = new Date();\r\n    const firstOfMonth = new Date(today.getFullYear(), today.getMonth(), 1).toISOString().split('T')[0];\r\n    const lastOfMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0).toISOString().split('T')[0];\r\n\r\n    const [form, setForm] = useState({\r\n        staff_id: '',\r\n        pay_period_start: firstOfMonth,\r\n        pay_period_end: lastOfMonth,\r\n        base_salary: '',\r\n        commission_earned: '',\r\n        bonus: '',\r\n        deductions: '',\r\n        notes: '',\r\n    });\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!form.staff_id || !form.base_salary) return;\r\n\r\n        setIsSubmitting(true);\r\n        const result = await createPayrollRecord({\r\n            staff_id: form.staff_id,\r\n            pay_period_start: form.pay_period_start,\r\n            pay_period_end: form.pay_period_end,\r\n            base_salary: parseFloat(form.base_salary) || 0,\r\n            commission_earned: parseFloat(form.commission_earned) || 0,\r\n            bonus: parseFloat(form.bonus) || 0,\r\n            deductions: parseFloat(form.deductions) || 0,\r\n            notes: form.notes,\r\n        });\r\n\r\n        if (result.success) {\r\n            onSuccess();\r\n            onClose();\r\n            setForm({\r\n                staff_id: '',\r\n                pay_period_start: firstOfMonth,\r\n                pay_period_end: lastOfMonth,\r\n                base_salary: '',\r\n                commission_earned: '',\r\n                bonus: '',\r\n                deductions: '',\r\n                notes: '',\r\n            });\r\n        }\r\n        setIsSubmitting(false);\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70\">\r\n            <motion.div\r\n                initial={{ opacity: 0, scale: 0.95 }}\r\n                animate={{ opacity: 1, scale: 1 }}\r\n                className=\"bg-richblack-800 border border-white/10 rounded-2xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto\"\r\n            >\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                    <h2 className=\"text-xl font-bold text-white\">Add Payroll</h2>\r\n                    <button onClick={onClose} className=\"text-white/40 hover:text-white\">\r\n                        <X className=\"w-5 h-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div>\r\n                        <label className=\"block text-white/40 text-xs uppercase mb-2\">Staff Member</label>\r\n                        <select\r\n                            value={form.staff_id}\r\n                            onChange={(e) => setForm(prev => ({ ...prev, staff_id: e.target.value }))}\r\n                            className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white\"\r\n                            required\r\n                        >\r\n                            <option value=\"\">Select staff...</option>\r\n                            {staff.map(s => (\r\n                                <option key={s.id} value={s.id}>{s.name}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div>\r\n                            <label className=\"block text-white/40 text-xs uppercase mb-2\">Period Start</label>\r\n                            <input\r\n                                type=\"date\"\r\n                                value={form.pay_period_start}\r\n                                onChange={(e) => setForm(prev => ({ ...prev, pay_period_start: e.target.value }))}\r\n                                className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white\"\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"block text-white/40 text-xs uppercase mb-2\">Period End</label>\r\n                            <input\r\n                                type=\"date\"\r\n                                value={form.pay_period_end}\r\n                                onChange={(e) => setForm(prev => ({ ...prev, pay_period_end: e.target.value }))}\r\n                                className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-white/40 text-xs uppercase mb-2\">Base Salary (GHS)</label>\r\n                        <input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={form.base_salary}\r\n                            onChange={(e) => setForm(prev => ({ ...prev, base_salary: e.target.value }))}\r\n                            className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white\"\r\n                            placeholder=\"0.00\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-3 gap-3\">\r\n                        <div>\r\n                            <label className=\"block text-white/40 text-xs uppercase mb-2\">Commission</label>\r\n                            <input\r\n                                type=\"number\"\r\n                                step=\"0.01\"\r\n                                value={form.commission_earned}\r\n                                onChange={(e) => setForm(prev => ({ ...prev, commission_earned: e.target.value }))}\r\n                                className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-3 py-3 text-white text-sm\"\r\n                                placeholder=\"0\"\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"block text-white/40 text-xs uppercase mb-2\">Bonus</label>\r\n                            <input\r\n                                type=\"number\"\r\n                                step=\"0.01\"\r\n                                value={form.bonus}\r\n                                onChange={(e) => setForm(prev => ({ ...prev, bonus: e.target.value }))}\r\n                                className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-3 py-3 text-white text-sm\"\r\n                                placeholder=\"0\"\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"block text-white/40 text-xs uppercase mb-2\">Deductions</label>\r\n                            <input\r\n                                type=\"number\"\r\n                                step=\"0.01\"\r\n                                value={form.deductions}\r\n                                onChange={(e) => setForm(prev => ({ ...prev, deductions: e.target.value }))}\r\n                                className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-3 py-3 text-white text-sm\"\r\n                                placeholder=\"0\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-white/40 text-xs uppercase mb-2\">Notes</label>\r\n                        <textarea\r\n                            value={form.notes}\r\n                            onChange={(e) => setForm(prev => ({ ...prev, notes: e.target.value }))}\r\n                            className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white resize-none\"\r\n                            rows={2}\r\n                            placeholder=\"Optional notes...\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-3 pt-4\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={onClose}\r\n                            className=\"flex-1 px-4 py-3 border border-white/10 rounded-xl text-white hover:bg-white/5 transition-colors\"\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={isSubmitting}\r\n                            className=\"flex-1 px-4 py-3 bg-gold-500 text-richblack-900 rounded-xl font-medium hover:bg-gold-400 transition-colors disabled:opacity-50\"\r\n                        >\r\n                            {isSubmitting ? <Loader2 className=\"w-5 h-5 animate-spin mx-auto\" /> : 'Save Payroll'}\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\admin\\dashboard\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\admin\\dashboard\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":7,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TrendingUp"},"fix":{"range":[118,135],"text":""},"desc":"Remove unused variable \"TrendingUp\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PieChart' is defined but never used.","line":24,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"PieChart"},"fix":{"range":[377,392],"text":""},"desc":"Remove unused variable \"PieChart\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Pie' is defined but never used.","line":25,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":8,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Pie"},"fix":{"range":[392,402],"text":""},"desc":"Remove unused variable \"Pie\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Cell' is defined but never used.","line":26,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Cell"},"fix":{"range":[402,413],"text":""},"desc":"Remove unused variable \"Cell\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1076,1079],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1076,1079],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'revenueSplit' is assigned a value but never used.","line":137,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":137,"endColumn":23},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":163,"column":74,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5880,5930],"text":"Good evening, Boss. Here&apos;s what's happening today."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5880,5930],"text":"Good evening, Boss. Here&lsquo;s what's happening today."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5880,5930],"text":"Good evening, Boss. Here&#39;s what's happening today."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5880,5930],"text":"Good evening, Boss. Here&rsquo;s what's happening today."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":163,"column":81,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5880,5930],"text":"Good evening, Boss. Here's what&apos;s happening today."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5880,5930],"text":"Good evening, Boss. Here's what&lsquo;s happening today."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5880,5930],"text":"Good evening, Boss. Here's what&#39;s happening today."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5880,5930],"text":"Good evening, Boss. Here's what&rsquo;s happening today."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":184,"column":104,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[7468,7483],"text":"Today&apos;s Revenue"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[7468,7483],"text":"Today&lsquo;s Revenue"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[7468,7483],"text":"Today&#39;s Revenue"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[7468,7483],"text":"Today&rsquo;s Revenue"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport {\r\n    DollarSign,\r\n    TrendingUp,\r\n    Users,\r\n    Clock,\r\n    AlertCircle,\r\n    Plus,\r\n    FileText,\r\n    Scissors,\r\n    CreditCard\r\n} from 'lucide-react';\r\nimport {\r\n    BarChart,\r\n    Bar,\r\n    XAxis,\r\n    YAxis,\r\n    CartesianGrid,\r\n    Tooltip,\r\n    ResponsiveContainer,\r\n    PieChart,\r\n    Pie,\r\n    Cell\r\n} from 'recharts';\r\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\r\nimport { getDashboardStats, getBarberPerformance, getRecentTransactions } from '@/utils/supabase/queries';\r\nimport type { DashboardStats, BarberPerformance, RecentTransaction } from '@/types/database';\r\n\r\nexport default function AdminDashboard() {\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [stats, setStats] = useState<DashboardStats | null>(null);\r\n    const [barberPerf, setBarberPerf] = useState<BarberPerformance[]>([]);\r\n    const [recentTx, setRecentTx] = useState<RecentTransaction[]>([]);\r\n    const [peakTimeData, setPeakTimeData] = useState<any[]>([]);\r\n\r\n    useEffect(() => {\r\n        async function fetchData() {\r\n            try {\r\n                const [statsData, barberData, txData] = await Promise.all([\r\n                    getDashboardStats(),\r\n                    getBarberPerformance(),\r\n                    getRecentTransactions(10)\r\n                ]);\r\n\r\n                setStats(statsData);\r\n                setBarberPerf(barberData);\r\n                setRecentTx(txData);\r\n\r\n                // Calculate peak times from real bookings\r\n                await calculatePeakTimes();\r\n            } catch (error) {\r\n                console.error('Error fetching dashboard data:', error);\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        }\r\n\r\n        fetchData();\r\n    }, []);\r\n\r\n    async function calculatePeakTimes() {\r\n        try {\r\n            const { createClient } = await import('@/utils/supabase/client');\r\n            const supabase = createClient();\r\n\r\n            // Get bookings from last 30 days\r\n            const thirtyDaysAgo = new Date();\r\n            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\r\n\r\n            const { data: bookings } = await supabase\r\n                .from('bookings')\r\n                .select('booking_date, booking_time')\r\n                .gte('booking_date', thirtyDaysAgo.toISOString().split('T')[0]);\r\n\r\n            if (!bookings || bookings.length === 0) {\r\n                // Use minimal default data if no bookings\r\n                setPeakTimeData([\r\n                    { hour: '9am', weekday: 0, weekend: 0 },\r\n                    { hour: '10am', weekday: 0, weekend: 0 },\r\n                    { hour: '11am', weekday: 0, weekend: 0 },\r\n                    { hour: '12pm', weekday: 0, weekend: 0 },\r\n                    { hour: '1pm', weekday: 0, weekend: 0 },\r\n                    { hour: '2pm', weekday: 0, weekend: 0 },\r\n                    { hour: '3pm', weekday: 0, weekend: 0 },\r\n                    { hour: '4pm', weekday: 0, weekend: 0 },\r\n                    { hour: '5pm', weekday: 0, weekend: 0 },\r\n                    { hour: '6pm', weekday: 0, weekend: 0 },\r\n                    { hour: '7pm', weekday: 0, weekend: 0 },\r\n                    { hour: '8pm', weekday: 0, weekend: 0 },\r\n                ]);\r\n                return;\r\n            }\r\n\r\n            // Count bookings by hour and day type\r\n            const hourCounts: { [key: string]: { weekday: number; weekend: number } } = {};\r\n\r\n            bookings.forEach((booking) => {\r\n                const date = new Date(booking.booking_date);\r\n                const isWeekend = date.getDay() === 0 || date.getDay() === 6;\r\n                const hour = parseInt(booking.booking_time.split(':')[0]);\r\n\r\n                // Convert to 12-hour format\r\n                const hourLabel = hour === 0 ? '12am'\r\n                    : hour < 12 ? `${hour}am`\r\n                        : hour === 12 ? '12pm'\r\n                            : `${hour - 12}pm`;\r\n\r\n                if (!hourCounts[hourLabel]) {\r\n                    hourCounts[hourLabel] = { weekday: 0, weekend: 0 };\r\n                }\r\n\r\n                if (isWeekend) {\r\n                    hourCounts[hourLabel].weekend++;\r\n                } else {\r\n                    hourCounts[hourLabel].weekday++;\r\n                }\r\n            });\r\n\r\n            // Format for chart (9am - 8pm)\r\n            const hours = ['9am', '10am', '11am', '12pm', '1pm', '2pm', '3pm', '4pm', '5pm', '6pm', '7pm', '8pm'];\r\n            const chartData = hours.map(hour => ({\r\n                hour,\r\n                weekday: hourCounts[hour]?.weekday || 0,\r\n                weekend: hourCounts[hour]?.weekend || 0\r\n            }));\r\n\r\n            setPeakTimeData(chartData);\r\n        } catch (error) {\r\n            console.error('Error calculating peak times:', error);\r\n        }\r\n    }\r\n\r\n    // Revenue Split (Online vs Walk-In) - STATIC FOR NOW\r\n    const revenueSplit = [\r\n        { name: 'Online', value: 12500, color: '#EAB308' }, // Gold\r\n        { name: 'Walk-In', value: 5900, color: '#3B82F6' }  // Blue\r\n    ];\r\n\r\n    // Seat Utilization - STATIC FOR NOW\r\n    const seatUtil = {\r\n        current: 73.2,\r\n        status: 'Healthy'\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex h-screen items-center justify-center\">\r\n                <LoadingSpinner />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-8 max-w-[1600px] mx-auto\">\r\n\r\n            {/* Header & Quick Actions */}\r\n            <div className=\"flex flex-col lg:flex-row justify-between items-start lg:items-end gap-6\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-display font-bold text-white mb-2\">Dashboard</h1>\r\n                    <p className=\"text-white/40\">Good evening, Boss. Here's what's happening today.</p>\r\n                </div>\r\n\r\n                <div className=\"flex flex-wrap gap-3\">\r\n                    <button className=\"flex items-center gap-2 bg-gold-500 hover:bg-gold-400 text-black font-bold px-4 py-2 rounded-lg transition-colors text-sm\">\r\n                        <Plus className=\"w-4 h-4\" /> New Booking\r\n                    </button>\r\n                    <button className=\"flex items-center gap-2 bg-white/5 hover:bg-white/10 text-white font-medium px-4 py-2 rounded-lg border border-white/10 transition-colors text-sm\">\r\n                        <FileText className=\"w-4 h-4 text-white/60\" /> Reports\r\n                    </button>\r\n                    <Link href=\"/admin/dashboard/staff\" className=\"flex items-center gap-2 bg-white/5 hover:bg-white/10 text-white font-medium px-4 py-2 rounded-lg border border-white/10 transition-colors text-sm\">\r\n                        <Users className=\"w-4 h-4 text-white/60\" /> Team\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n\r\n            {/* 1. Revenue Triumvirate */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                {/* Today */}\r\n                <div className=\"bg-richblack-800 border border-white/5 p-6 rounded-2xl relative overflow-hidden group hover:border-white/10 transition-colors\">\r\n                    <div className=\"absolute top-0 right-0 w-24 h-24 bg-gold-500/5 rounded-full blur-2xl -mr-6 -mt-6\" />\r\n                    <p className=\"text-white/40 text-xs font-bold uppercase tracking-widest mb-1\">Today's Revenue</p>\r\n                    <div className=\"flex items-baseline gap-1 mb-3\">\r\n                        <span className=\"text-2xl font-bold text-white\">\r\n                            GHS {stats?.today.revenue.toLocaleString() || '0'}\r\n                        </span>\r\n                        <span className=\"text-sm text-white/40 ml-2\">({stats?.today.count || 0} appts)</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* This Week */}\r\n                <div className=\"bg-richblack-800 border border-white/5 p-6 rounded-2xl relative overflow-hidden group hover:border-white/10 transition-colors\">\r\n                    <div className=\"absolute top-0 right-0 w-24 h-24 bg-blue-500/5 rounded-full blur-2xl -mr-6 -mt-6\" />\r\n                    <p className=\"text-white/40 text-xs font-bold uppercase tracking-widest mb-1\">This Week</p>\r\n                    <div className=\"flex items-baseline gap-1 mb-3\">\r\n                        <span className=\"text-2xl font-bold text-white\">\r\n                            GHS {stats?.week.revenue.toLocaleString() || '0'}\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 text-xs\">\r\n                        <span className=\"text-white/30\">{stats?.week.count || 0} appointments this week</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* This Month */}\r\n                <div className=\"bg-richblack-800 border border-white/5 p-6 rounded-2xl relative overflow-hidden group hover:border-white/10 transition-colors\">\r\n                    <div className=\"absolute top-0 right-0 w-24 h-24 bg-purple-500/5 rounded-full blur-2xl -mr-6 -mt-6\" />\r\n                    <p className=\"text-white/40 text-xs font-bold uppercase tracking-widest mb-1\">This Month</p>\r\n                    <div className=\"flex items-baseline gap-1 mb-3\">\r\n                        <span className=\"text-2xl font-bold text-white\">\r\n                            GHS {stats?.month.revenue.toLocaleString() || '0'}\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 text-xs\">\r\n                        <span className=\"text-white/30\">{stats?.month.count || 0} appointments this month</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                {/* 2. Main Chart: Peak Times (2/3 width) */}\r\n                <div className=\"lg:col-span-2 bg-richblack-800 border border-white/5 p-6 rounded-2xl\">\r\n                    <div className=\"flex items-center justify-between mb-6\">\r\n                        <div>\r\n                            <h3 className=\"font-bold text-white text-lg flex items-center gap-2\">\r\n                                <Clock className=\"w-5 h-5 text-gold-500\" />\r\n                                Peak Booking Times\r\n                            </h3>\r\n                            <p className=\"text-white/40 text-sm\">Average bookings per hour (Last 30 Days)</p>\r\n                        </div>\r\n                        <div className=\"flex gap-4 text-xs font-bold\">\r\n                            <div className=\"flex items-center gap-2 text-blue-400\">\r\n                                <div className=\"w-3 h-3 bg-blue-500 rounded-full\" /> Weekdays\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 text-gold-400\">\r\n                                <div className=\"w-3 h-3 bg-gold-500 rounded-full\" /> Weekends\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"h-[300px] w-full\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <BarChart data={peakTimeData} barGap={0} barCategoryGap={16}>\r\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#ffffff10\" vertical={false} />\r\n                                <XAxis\r\n                                    dataKey=\"hour\"\r\n                                    stroke=\"#ffffff40\"\r\n                                    fontSize={12}\r\n                                    tickLine={false}\r\n                                    axisLine={false}\r\n                                />\r\n                                <YAxis\r\n                                    stroke=\"#ffffff40\"\r\n                                    fontSize={12}\r\n                                    tickLine={false}\r\n                                    axisLine={false}\r\n                                />\r\n                                <Tooltip\r\n                                    contentStyle={{ backgroundColor: '#1A1D21', borderColor: 'rgba(255,255,255,0.1)', borderRadius: '8px' }}\r\n                                    itemStyle={{ color: '#fff' }}\r\n                                    cursor={{ fill: 'rgba(255,255,255,0.05)' }}\r\n                                />\r\n                                <Bar dataKey=\"weekday\" fill=\"#3B82F6\" radius={[4, 4, 0, 0]} />\r\n                                <Bar dataKey=\"weekend\" fill=\"#EAB308\" radius={[4, 4, 0, 0]} />\r\n                            </BarChart>\r\n                        </ResponsiveContainer>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* 3. Side Stats (1/3 width) */}\r\n                <div className=\"space-y-6\">\r\n\r\n                    {/* Seat Utilization */}\r\n                    <div className=\"bg-richblack-800 border border-white/5 p-6 rounded-2xl\">\r\n                        <div className=\"flex items-center justify-between mb-4\">\r\n                            <h3 className=\"font-bold text-white flex items-center gap-2\">\r\n                                <Users className=\"w-4 h-4 text-white/60\" /> Seat Utilization\r\n                            </h3>\r\n                            <span className={`text-xs font-bold px-2 py-1 rounded bg-green-500/10 text-green-400`}>\r\n                                {seatUtil.status}\r\n                            </span>\r\n                        </div>\r\n\r\n                        <div className=\"relative pt-2 pb-6 flex justify-center\">\r\n                            <div className=\"w-40 h-40 rounded-full border-[12px] border-white/5 flex items-center justify-center relative\">\r\n                                <svg className=\"absolute inset-0 w-full h-full -rotate-90\" viewBox=\"0 0 100 100\">\r\n                                    <circle\r\n                                        cx=\"50\" cy=\"50\" r=\"44\"\r\n                                        fill=\"none\"\r\n                                        stroke=\"#4ade80\"\r\n                                        strokeWidth=\"12\"\r\n                                        strokeDasharray={`${seatUtil.current * 2.76} 276`}\r\n                                        strokeLinecap=\"round\"\r\n                                        className=\"transition-all duration-1000 ease-out\"\r\n                                    />\r\n                                </svg>\r\n                                <div className=\"text-center\">\r\n                                    <span className=\"text-3xl font-bold text-white block\">{seatUtil.current}%</span>\r\n                                    <span className=\"text-[10px] text-white/40 uppercase tracking-widest\">Efficiency</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Revenue Split */}\r\n                    <div className=\"bg-richblack-800 border border-white/5 p-6 rounded-2xl\">\r\n                        <h3 className=\"font-bold text-white mb-4 text-sm flex items-center gap-2\">\r\n                            <DollarSign className=\"w-4 h-4 text-white/60\" /> Revenue Source\r\n                        </h3>\r\n                        <div className=\"h-full flex items-center justify-center text-white/40 text-sm italic\">\r\n                            Coming soon\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* No Show Rate */}\r\n                    <div className=\"bg-richblack-800 border border-white/5 p-6 rounded-2xl flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-white/40 text-xs font-bold uppercase tracking-widest mb-1\">No-Show / Completed</p>\r\n                            <span className=\"text-xl font-bold text-white\">\r\n                                {stats?.noshow.count || 0} / {stats?.noshow.total || 0}\r\n                            </span>\r\n                        </div>\r\n                        <div className={`p-3 rounded-xl bg-white/5 text-white`}>\r\n                            <AlertCircle className=\"w-6 h-6\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n                {/* 4. Barber Performance Leaderboard */}\r\n                <div className=\"bg-richblack-800 border border-white/5 p-6 rounded-2xl\">\r\n                    <div className=\"flex items-center justify-between mb-6\">\r\n                        <h3 className=\"font-bold text-white text-lg flex items-center gap-2\">\r\n                            <Scissors className=\"w-5 h-5 text-gold-500\" />\r\n                            Barber Performance\r\n                        </h3>\r\n                    </div>\r\n\r\n                    <div className=\"overflow-x-auto\">\r\n                        <table className=\"w-full text-sm text-left\">\r\n                            <thead className=\"text-xs text-white/40 uppercase bg-white/5 rounded-lg\">\r\n                                <tr>\r\n                                    <th className=\"px-4 py-3 rounded-l-lg\">Barber</th>\r\n                                    <th className=\"px-4 py-3\">Revenue</th>\r\n                                    <th className=\"px-4 py-3\">Appts</th>\r\n                                    <th className=\"px-4 py-3 text-right rounded-r-lg\">Retention</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-white/5\">\r\n                                {barberPerf.length > 0 ? (\r\n                                    barberPerf.map((barber) => (\r\n                                        <tr key={barber.staff_id} className=\"hover:bg-white/5 transition-colors\">\r\n                                            <td className=\"px-4 py-4 font-medium text-white flex items-center gap-3\">\r\n                                                <div className=\"w-8 h-8 rounded-full bg-gold-500/10 text-gold-500 flex items-center justify-center font-bold text-xs ring-1 ring-gold-500/20\">\r\n                                                    {barber.staff_name.charAt(0)}\r\n                                                </div>\r\n                                                {barber.staff_name}\r\n                                            </td>\r\n                                            <td className=\"px-4 py-4 text-white\">GHS {barber.revenue.toLocaleString()}</td>\r\n                                            <td className=\"px-4 py-4 text-white/60 text-center\">{barber.appointments}</td>\r\n                                            <td className=\"px-4 py-4 text-right\">\r\n                                                <span className=\"px-2 py-1 rounded text-xs font-bold bg-green-500/10 text-green-400\">\r\n                                                    {barber.retention_rate}%\r\n                                                </span>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))\r\n                                ) : (\r\n                                    <tr>\r\n                                        <td colSpan={4} className=\"px-4 py-8 text-center text-white/40\">\r\n                                            No performance data yet\r\n                                        </td>\r\n                                    </tr>\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* 5. Recent Transactions Audit */}\r\n                <div className=\"bg-richblack-800 border border-white/5 p-6 rounded-2xl\">\r\n                    <div className=\"flex items-center justify-between mb-6\">\r\n                        <h3 className=\"font-bold text-white text-lg flex items-center gap-2\">\r\n                            <CreditCard className=\"w-5 h-5 text-blue-500\" />\r\n                            Recent Transactions\r\n                        </h3>\r\n                    </div>\r\n\r\n                    <div className=\"overflow-x-auto\">\r\n                        <table className=\"w-full text-sm text-left\">\r\n                            <thead className=\"text-xs text-white/40 uppercase bg-white/5 rounded-lg\">\r\n                                <tr>\r\n                                    <th className=\"px-4 py-3 rounded-l-lg\">Time</th>\r\n                                    <th className=\"px-4 py-3\">Client</th>\r\n                                    <th className=\"px-4 py-3\">Amount</th>\r\n                                    <th className=\"px-4 py-3 text-right rounded-r-lg\">Status</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-white/5\">\r\n                                {recentTx.length > 0 ? (\r\n                                    recentTx.map((tx) => (\r\n                                        <tr key={tx.id} className=\"hover:bg-white/5 transition-colors\">\r\n                                            <td className=\"px-4 py-4 text-white/60 font-mono text-xs\">\r\n                                                {tx.booking_date} <br /> {tx.booking_time.slice(0, 5)}\r\n                                            </td>\r\n                                            <td className=\"px-4 py-4 text-white font-medium\">{tx.customer_name}</td>\r\n                                            <td className=\"px-4 py-4 text-white\">GHS {tx.total_price}</td>\r\n                                            <td className=\"px-4 py-4 text-right\">\r\n                                                <span className={`px-2 py-1 rounded text-xs font-bold capitalize ${tx.payment_status === 'paid' ? 'bg-green-500/10 text-green-400' :\r\n                                                    tx.payment_status === 'refunded' ? 'bg-red-500/10 text-red-400' :\r\n                                                        'bg-yellow-500/10 text-yellow-400'\r\n                                                    }`}>\r\n                                                    {tx.payment_status}\r\n                                                </span>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))\r\n                                ) : (\r\n                                    <tr>\r\n                                        <td colSpan={4} className=\"px-4 py-8 text-center text-white/40\">\r\n                                            No recent transactions\r\n                                        </td>\r\n                                    </tr>\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\admin\\dashboard\\reviews\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'XCircle' is defined but never used.","line":7,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":12,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"XCircle"},"fix":{"range":[99,113],"text":""},"desc":"Remove unused variable \"XCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":25,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":17},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":158,"column":65,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[7624,7625],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[7624,7625],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[7624,7625],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[7624,7625],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":158,"column":82,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[7641,7642],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[7641,7642],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[7641,7642],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[7641,7642],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":209,"column":83,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[10953,10954],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[10953,10954],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[10953,10954],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[10953,10954],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":209,"column":100,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[10970,10971],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[10970,10971],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[10970,10971],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[10970,10971],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport {\r\n    Star,\r\n    CheckCircle,\r\n    XCircle,\r\n    Trash2,\r\n    Calendar,\r\n    MessageSquare,\r\n    Check,\r\n    Loader2,\r\n    AlertCircle\r\n} from 'lucide-react';\r\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\r\nimport { getPendingReviews, getApprovedReviews, approveReview, deleteReview } from '@/utils/supabase/queries';\r\nimport { Review } from '@/types/database';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function ReviewsPage() {\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [pendingReviews, setPendingReviews] = useState<Review[]>([]);\r\n    const [approvedReviews, setApprovedReviews] = useState<Review[]>([]);\r\n    const [processingId, setProcessingId] = useState<string | null>(null);\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        loadReviews();\r\n    }, []);\r\n\r\n    async function loadReviews() {\r\n        setIsLoading(true);\r\n        try {\r\n            const [pending, approved] = await Promise.all([\r\n                getPendingReviews(),\r\n                getApprovedReviews(50) // Limit to last 50 for admin view initially\r\n            ]);\r\n            setPendingReviews(pending);\r\n            setApprovedReviews(approved);\r\n        } catch (error) {\r\n            console.error('Failed to load reviews', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    async function handleApprove(id: string) {\r\n        setProcessingId(id);\r\n        try {\r\n            await approveReview(id);\r\n            // Refresh local state optimistically\r\n            const review = pendingReviews.find(r => r.id === id);\r\n            if (review) {\r\n                setPendingReviews(prev => prev.filter(r => r.id !== id));\r\n                setApprovedReviews(prev => [{ ...review, is_approved: true }, ...prev]);\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to approve review', error);\r\n            alert('Failed to approve review');\r\n        } finally {\r\n            setProcessingId(null);\r\n        }\r\n    }\r\n\r\n    async function handleDelete(id: string) {\r\n        if (!confirm('Are you sure you want to delete this review permanently?')) return;\r\n\r\n        setProcessingId(id);\r\n        try {\r\n            await deleteReview(id);\r\n            // Refresh local state optimistically\r\n            setPendingReviews(prev => prev.filter(r => r.id !== id));\r\n            setApprovedReviews(prev => prev.filter(r => r.id !== id));\r\n        } catch (error) {\r\n            console.error('Failed to delete review', error);\r\n            alert('Failed to delete review');\r\n        } finally {\r\n            setProcessingId(null);\r\n        }\r\n    }\r\n\r\n    function formatDate(dateString: string) {\r\n        return new Date(dateString).toLocaleDateString('en-GB', {\r\n            day: 'numeric',\r\n            month: 'short',\r\n            year: 'numeric'\r\n        });\r\n    }\r\n\r\n    if (isLoading) return <div className=\"h-[60vh] flex items-center justify-center\"><LoadingSpinner /></div>;\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto space-y-12\">\r\n\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-display font-bold text-white mb-2\">Review Moderation</h1>\r\n                    <p className=\"text-white/40\">Approve or reject customer reviews before they appear on the site.</p>\r\n                </div>\r\n                <div className=\"flex gap-4\">\r\n                    <div className=\"bg-richblack-800 border border-white/5 rounded-xl px-6 py-3 text-center\">\r\n                        <div className=\"text-xl font-bold text-white\">{pendingReviews.length}</div>\r\n                        <div className=\"text-xs uppercase tracking-wider text-white/40\">Pending</div>\r\n                    </div>\r\n                    <div className=\"bg-richblack-800 border border-white/5 rounded-xl px-6 py-3 text-center\">\r\n                        <div className=\"text-xl font-bold text-white\">{approvedReviews.length}</div>\r\n                        <div className=\"text-xs uppercase tracking-wider text-white/40\">Live</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* PENDING REVIEWS */}\r\n            <div className=\"space-y-6\">\r\n                <h2 className=\"text-xl font-bold text-white flex items-center gap-3\">\r\n                    <AlertCircle className=\"w-5 h-5 text-gold-500\" />\r\n                    Pending Approval\r\n                </h2>\r\n\r\n                {pendingReviews.length === 0 ? (\r\n                    <div className=\"bg-richblack-800/50 border border-dashed border-white/10 rounded-2xl p-10 text-center text-white/40\">\r\n                        <CheckCircle className=\"w-12 h-12 mx-auto mb-4 opacity-20\" />\r\n                        <p>No pending reviews. All caught up!</p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"grid gap-4\">\r\n                        {pendingReviews.map((review) => (\r\n                            <div key={review.id} className=\"bg-richblack-800 border border-gold-500/30 rounded-2xl p-6 relative overflow-hidden group\">\r\n                                <div className=\"absolute top-0 left-0 w-1 h-full bg-gold-500\" />\r\n\r\n                                <div className=\"flex flex-col md:flex-row gap-6\">\r\n                                    <div className=\"flex-1 space-y-3\">\r\n                                        <div className=\"flex items-center justify-between\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <div className=\"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-white font-bold\">\r\n                                                    {review.customer_name.charAt(0)}\r\n                                                </div>\r\n                                                <div>\r\n                                                    <div className=\"font-bold text-white\">{review.customer_name}</div>\r\n                                                    <div className=\"text-xs text-white/40 flex items-center gap-2\">\r\n                                                        <Calendar className=\"w-3 h-3\" />\r\n                                                        {formatDate(review.created_at)}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"flex gap-1\">\r\n                                                {[...Array(5)].map((_, i) => (\r\n                                                    <Star\r\n                                                        key={i}\r\n                                                        className={`w-4 h-4 ${i < review.rating ? 'text-gold-500 fill-gold-500' : 'text-white/20'}`}\r\n                                                    />\r\n                                                ))}\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"bg-richblack-900/50 rounded-xl p-4 border border-white/5 text-white/80 italic relative\">\r\n                                            <MessageSquare className=\"absolute top-4 left-4 w-4 h-4 text-white/10\" />\r\n                                            <p className=\"pl-6\">\"{review.comment}\"</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex md:flex-col justify-end gap-3 min-w-[140px]\">\r\n                                        <button\r\n                                            onClick={() => handleApprove(review.id)}\r\n                                            disabled={processingId === review.id}\r\n                                            className=\"bg-green-500 text-black font-bold py-2 px-4 rounded-lg hover:bg-green-400 transition-colors flex items-center justify-center gap-2 flex-1\"\r\n                                        >\r\n                                            {processingId === review.id ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Check className=\"w-4 h-4\" />}\r\n                                            Approve\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => handleDelete(review.id)}\r\n                                            disabled={processingId === review.id}\r\n                                            className=\"bg-white/5 text-red-400 font-bold py-2 px-4 rounded-lg hover:bg-red-500/10 transition-colors flex items-center justify-center gap-2 flex-1 border border-transparent hover:border-red-500/20\"\r\n                                        >\r\n                                            <Trash2 className=\"w-4 h-4\" />\r\n                                            Delete\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* APPROVED REVIEWS */}\r\n            {approvedReviews.length > 0 && (\r\n                <div className=\"space-y-6 pt-8 border-t border-white/5\">\r\n                    <h2 className=\"text-xl font-bold text-white flex items-center gap-3\">\r\n                        <CheckCircle className=\"w-5 h-5 text-green-500\" />\r\n                        Live Reviews\r\n                    </h2>\r\n\r\n                    <div className=\"grid md:grid-cols-2 gap-4\">\r\n                        {approvedReviews.map((review) => (\r\n                            <div key={review.id} className=\"bg-richblack-800 border border-white/5 rounded-xl p-6 flex flex-col gap-4\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div className=\"font-bold text-white\">{review.customer_name}</div>\r\n                                    <div className=\"flex gap-1\">\r\n                                        {[...Array(5)].map((_, i) => (\r\n                                            <Star\r\n                                                key={i}\r\n                                                className={`w-3 h-3 ${i < review.rating ? 'text-gold-500 fill-gold-500' : 'text-white/20'}`}\r\n                                            />\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                                <p className=\"text-sm text-white/60 line-clamp-2\">\"{review.comment}\"</p>\r\n                                <div className=\"flex items-center justify-between pt-4 border-t border-white/5\">\r\n                                    <div className=\"text-xs text-white/30\">{formatDate(review.created_at)}</div>\r\n                                    <button\r\n                                        onClick={() => handleDelete(review.id)}\r\n                                        className=\"text-white/20 hover:text-red-400 transition-colors p-2\"\r\n                                        title=\"Delete Review\"\r\n                                    >\r\n                                        <Trash2 className=\"w-4 h-4\" />\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\admin\\dashboard\\services\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":8,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Filter"},"fix":{"range":[109,122],"text":""},"desc":"Remove unused variable \"Filter\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MoreVertical' is defined but never used.","line":9,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"MoreVertical"},"fix":{"range":[122,141],"text":""},"desc":"Remove unused variable \"MoreVertical\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DollarSign' is defined but never used.","line":11,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"DollarSign"},"fix":{"range":[153,170],"text":""},"desc":"Remove unused variable \"DollarSign\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":13,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Trash2"},"fix":{"range":[182,195],"text":""},"desc":"Remove unused variable \"Trash2\"."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":241,"column":53,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[11047,11066],"text":" found. Click &quot;Add "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[11047,11066],"text":" found. Click &ldquo;Add "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[11047,11066],"text":" found. Click &#34;Add "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[11047,11066],"text":" found. Click &rdquo;Add "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":241,"column":107,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[11115,11153],"text":"&quot; to create one.\r\n                    "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[11115,11153],"text":"&ldquo; to create one.\r\n                    "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[11115,11153],"text":"&#34; to create one.\r\n                    "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[11115,11153],"text":"&rdquo; to create one.\r\n                    "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport {\r\n    Scissors,\r\n    Plus,\r\n    Search,\r\n    Filter,\r\n    MoreVertical,\r\n    Clock,\r\n    DollarSign,\r\n    Edit2,\r\n    Trash2, // Keeping for future hard delete\r\n    CheckCircle,\r\n    XCircle,\r\n    X,\r\n    Loader2\r\n} from 'lucide-react';\r\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\r\nimport { getServices, createService, updateService, getAddons, createAddon, updateAddon } from '@/utils/supabase/queries';\r\nimport type { Service, Addon } from '@/types/database';\r\n\r\nexport default function ServicesPage() {\r\n    const [activeTab, setActiveTab] = useState<'services' | 'addons'>('services');\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [services, setServices] = useState<Service[]>([]);\r\n    const [addons, setAddons] = useState<Addon[]>([]);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    // Form State (Shared for Service and Addon)\r\n    const [editingId, setEditingId] = useState<string | null>(null);\r\n    const [formData, setFormData] = useState<Partial<Service | Addon>>({\r\n        name: '',\r\n        description: '',\r\n        price: 0,\r\n        duration_minutes: 30,\r\n        is_active: true\r\n    });\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    async function fetchData() {\r\n        setIsLoading(true);\r\n        try {\r\n            const [servicesData, addonsData] = await Promise.all([\r\n                getServices(),\r\n                getAddons()\r\n            ]);\r\n            setServices(servicesData);\r\n            setAddons(addonsData);\r\n        } catch (error) {\r\n            console.error('Failed to load data', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    const openModal = (item: Service | Addon | null = null) => {\r\n        if (item) {\r\n            setEditingId(item.id);\r\n            setFormData({\r\n                name: item.name,\r\n                description: item.description || '',\r\n                price: item.price,\r\n                duration_minutes: item.duration_minutes,\r\n                is_active: item.is_active\r\n            });\r\n        } else {\r\n            setEditingId(null);\r\n            setFormData({\r\n                name: '',\r\n                description: '',\r\n                price: 0,\r\n                duration_minutes: activeTab === 'services' ? 30 : 15,\r\n                is_active: true\r\n            });\r\n        }\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    async function handleSave(e: React.FormEvent) {\r\n        e.preventDefault();\r\n        setIsSubmitting(true);\r\n\r\n        try {\r\n            if (!formData.name || formData.price === undefined || !formData.duration_minutes) {\r\n                alert(\"Please fill in all required fields\");\r\n                setIsSubmitting(false);\r\n                return;\r\n            }\r\n\r\n            let result;\r\n            if (activeTab === 'services') {\r\n                if (editingId) {\r\n                    result = await updateService({ id: editingId, ...formData } as Service);\r\n                } else {\r\n                    result = await createService(formData as Service);\r\n                }\r\n            } else {\r\n                if (editingId) {\r\n                    result = await updateAddon({ id: editingId, ...formData } as Addon);\r\n                } else {\r\n                    result = await createAddon(formData as Addon);\r\n                }\r\n            }\r\n\r\n            if (result.success) {\r\n                setIsModalOpen(false);\r\n                fetchData();\r\n            } else {\r\n                alert(`Failed to save ${activeTab === 'services' ? 'service' : 'add-on'}: ` + result.error);\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('Error saving:', error);\r\n            alert('An unexpected error occurred.');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    }\r\n\r\n    async function handleToggleStatus(item: Service | Addon) {\r\n        // Optimistic update\r\n        if (activeTab === 'services') {\r\n            setServices(prev => prev.map(s => s.id === item.id ? { ...s, is_active: !s.is_active } : s));\r\n            const result = await updateService({ id: item.id, is_active: !item.is_active });\r\n            if (!result.success) fetchData(); // Revert on failure\r\n        } else {\r\n            setAddons(prev => prev.map(a => a.id === item.id ? { ...a, is_active: !a.is_active } : a));\r\n            const result = await updateAddon({ id: item.id, is_active: !item.is_active });\r\n            if (!result.success) fetchData(); // Revert on failure\r\n        }\r\n    }\r\n\r\n    const filteredItems = (activeTab === 'services' ? services : addons).filter(item =>\r\n        item.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n    );\r\n\r\n    if (isLoading) return <div className=\"h-[60vh] flex items-center justify-center\"><LoadingSpinner /></div>;\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto space-y-8\">\r\n\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-display font-bold text-white mb-2\">Service Menu</h1>\r\n                    <p className=\"text-white/40\">Manage your services and add-ons.</p>\r\n                </div>\r\n                <button\r\n                    onClick={() => openModal(null)}\r\n                    className=\"flex items-center gap-2 bg-gold-500 hover:bg-gold-400 text-black font-bold px-6 py-3 rounded-xl transition-all shadow-lg shadow-gold-500/20\"\r\n                >\r\n                    <Plus className=\"w-5 h-5\" />\r\n                    Add {activeTab === 'services' ? 'Service' : 'Add-on'}\r\n                </button>\r\n            </div>\r\n\r\n            {/* Tabs & Filters */}\r\n            <div className=\"flex flex-col md:flex-row gap-4\">\r\n                <div className=\"flex p-1 bg-richblack-800 rounded-xl border border-white/5 w-fit\">\r\n                    <button\r\n                        onClick={() => setActiveTab('services')}\r\n                        className={`px-6 py-2 rounded-lg text-sm font-bold transition-all ${activeTab === 'services' ? 'bg-white/10 text-white shadow-sm' : 'text-white/40 hover:text-white'}`}\r\n                    >\r\n                        Services\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTab('addons')}\r\n                        className={`px-6 py-2 rounded-lg text-sm font-bold transition-all ${activeTab === 'addons' ? 'bg-white/10 text-white shadow-sm' : 'text-white/40 hover:text-white'}`}\r\n                    >\r\n                        Add-ons\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"bg-richblack-800 border border-white/5 p-2 rounded-xl flex items-center gap-4 flex-1\">\r\n                    <div className=\"flex-1 relative\">\r\n                        <Search className=\"absolute left-3 top-2.5 w-5 h-5 text-white/20\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder={`Search ${activeTab}...`}\r\n                            className=\"w-full bg-transparent border-none pl-10 pr-4 py-2 text-white focus:outline-none placeholder:text-white/20\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                {filteredItems.length > 0 ? filteredItems.map((item) => (\r\n                    <div key={item.id} className={`bg-richblack-800 border rounded-2xl overflow-hidden group hover:border-white/10 transition-all ${item.is_active ? 'border-white/5' : 'border-red-500/20 opacity-75'}`}>\r\n                        <div className=\"p-6\">\r\n                            <div className=\"flex justify-between items-start mb-4\">\r\n                                <div className=\"p-3 bg-white/5 rounded-xl text-gold-500\">\r\n                                    {activeTab === 'services' ? <Scissors className=\"w-6 h-6\" /> : <Plus className=\"w-6 h-6\" />}\r\n                                </div>\r\n                                <div className=\"flex gap-2\">\r\n                                    <button\r\n                                        onClick={() => handleToggleStatus(item)}\r\n                                        className={`p-2 rounded-lg transition-colors ${item.is_active ? 'text-green-500 bg-green-500/10 hover:bg-green-500/20' : 'text-red-500 bg-red-500/10 hover:bg-red-500/20'}`}\r\n                                        title={item.is_active ? \"Deactivate\" : \"Activate\"}\r\n                                    >\r\n                                        {item.is_active ? <CheckCircle className=\"w-4 h-4\" /> : <XCircle className=\"w-4 h-4\" />}\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <h3 className=\"font-bold text-white text-xl mb-2\">{item.name}</h3>\r\n                            <p className=\"text-white/40 text-sm line-clamp-2 mb-6 h-10\">{item.description || 'No description provided.'}</p>\r\n\r\n                            <div className=\"flex items-center justify-between pt-4 border-t border-white/5\">\r\n                                <div className=\"flex items-center gap-2 text-white/80 font-mono\">\r\n                                    <Clock className=\"w-4 h-4 text-gold-500\" />\r\n                                    <span>{item.duration_minutes} min</span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-1 text-white font-bold text-lg\">\r\n                                    <span className=\"text-gold-500\">₵</span>\r\n                                    <span>{item.price.toFixed(2)}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white/5 px-6 py-3 flex items-center justify-end border-t border-white/5\">\r\n                            <button\r\n                                onClick={() => openModal(item)}\r\n                                className=\"flex items-center gap-2 text-xs font-bold px-4 py-2 rounded-lg hover:bg-white/10 text-white/60 hover:text-white transition-colors\"\r\n                            >\r\n                                <Edit2 className=\"w-3 h-3\" />\r\n                                Edit Details\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )) : (\r\n                    <div className=\"col-span-full py-12 text-center text-white/40\">\r\n                        No {activeTab} found. Click \"Add {activeTab === 'services' ? 'Service' : 'Add-on'}\" to create one.\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Add/Edit Modal */}\r\n            {isModalOpen && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4 animate-in fade-in duration-200\">\r\n                    <div className=\"bg-richblack-800 w-full max-w-lg rounded-2xl border border-white/10 shadow-2xl flex flex-col max-h-[90vh]\">\r\n                        <div className=\"p-6 border-b border-white/5 flex items-center justify-between\">\r\n                            <h3 className=\"text-xl font-bold text-white\">\r\n                                {editingId ? `Edit ${activeTab === 'services' ? 'Service' : 'Add-on'}` : `Add New ${activeTab === 'services' ? 'Service' : 'Add-on'}`}\r\n                            </h3>\r\n                            <button onClick={() => setIsModalOpen(false)} className=\"text-white/40 hover:text-white\">\r\n                                <X className=\"w-6 h-6\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"p-6 flex-1 overflow-y-auto space-y-6\">\r\n                            <form id=\"item-form\" onSubmit={handleSave} className=\"space-y-4\">\r\n                                <div>\r\n                                    <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">Name</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        required\r\n                                        className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-gold-500/50 focus:outline-none\"\r\n                                        placeholder={activeTab === 'services' ? \"e.g. Premium Haircut\" : \"e.g. Hot Towel\"}\r\n                                        value={formData.name || ''}\r\n                                        onChange={e => setFormData({ ...formData, name: e.target.value })}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-2 gap-4\">\r\n                                    <div>\r\n                                        <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">Price (GHS)</label>\r\n                                        <div className=\"relative\">\r\n                                            <span className=\"absolute left-4 top-3.5 text-white/40\">₵</span>\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                required\r\n                                                min=\"0\"\r\n                                                step=\"0.01\"\r\n                                                className=\"w-full bg-richblack-900 border border-white/10 rounded-xl pl-8 pr-4 py-3 text-white focus:border-gold-500/50 focus:outline-none\"\r\n                                                placeholder=\"0.00\"\r\n                                                value={formData.price}\r\n                                                onChange={e => setFormData({ ...formData, price: parseFloat(e.target.value) })}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div>\r\n                                        <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">Duration (Min)</label>\r\n                                        <div className=\"relative\">\r\n                                            <Clock className=\"absolute left-4 top-3.5 w-4 h-4 text-white/20\" />\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                required\r\n                                                min=\"5\"\r\n                                                step=\"5\"\r\n                                                className=\"w-full bg-richblack-900 border border-white/10 rounded-xl pl-10 pr-4 py-3 text-white focus:border-gold-500/50 focus:outline-none\"\r\n                                                placeholder=\"30\"\r\n                                                value={formData.duration_minutes}\r\n                                                onChange={e => setFormData({ ...formData, duration_minutes: parseInt(e.target.value) })}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">Description</label>\r\n                                    <textarea\r\n                                        className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-gold-500/50 focus:outline-none min-h-[100px]\"\r\n                                        placeholder=\"Describe what's included...\"\r\n                                        value={formData.description || ''}\r\n                                        onChange={e => setFormData({ ...formData, description: e.target.value })}\r\n                                    />\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n\r\n                        <div className=\"p-6 border-t border-white/5 bg-richblack-900/50 flex justify-end gap-3\">\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setIsModalOpen(false)}\r\n                                className=\"px-6 py-3 rounded-xl font-bold text-white/60 hover:text-white hover:bg-white/5 transition-colors\"\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                            <button\r\n                                type=\"submit\"\r\n                                form=\"item-form\"\r\n                                disabled={isSubmitting}\r\n                                className=\"px-8 py-3 rounded-xl font-bold bg-gold-500 hover:bg-gold-400 text-black shadow-lg shadow-gold-500/20 transition-all flex items-center gap-2\"\r\n                            >\r\n                                {isSubmitting && <Loader2 className=\"w-4 h-4 animate-spin\" />}\r\n                                {editingId ? 'Save Changes' : 'Create Item'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\admin\\dashboard\\settings\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Settings' is defined but never used.","line":5,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Settings"},"fix":{"range":[77,86],"text":""},"desc":"Remove unused variable \"Settings\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":15,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":16,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AlertCircle"},"fix":{"range":[202,220],"text":""},"desc":"Remove unused variable \"AlertCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ImageUpload' is defined but never used.","line":17,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":21,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"ImageUpload"},"fix":{"range":[246,304],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport {\r\n    Settings,\r\n    Save,\r\n    Clock,\r\n    DollarSign,\r\n    Loader2,\r\n    Store,\r\n    MapPin,\r\n    Phone,\r\n    Mail,\r\n    FileText,\r\n    AlertCircle\r\n} from 'lucide-react';\r\nimport { ImageUpload } from '@/components/ui/ImageUpload';\r\nimport { getShopSettings, updateShopSettings } from '@/utils/supabase/queries';\r\nimport type { ShopSettings } from '@/types/database';\r\n\r\nexport default function SettingsPage() {\r\n    const [activeTab, setActiveTab] = useState<'general' | 'hours' | 'financials'>('general');\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [isSaving, setIsSaving] = useState(false);\r\n\r\n    // Data State\r\n    const [settings, setSettings] = useState<ShopSettings | null>(null);\r\n\r\n    useEffect(() => {\r\n        loadSettings();\r\n    }, []);\r\n\r\n    async function loadSettings() {\r\n        setIsLoading(true);\r\n        try {\r\n            const data = await getShopSettings();\r\n            if (data) {\r\n                setSettings(data);\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to load settings', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    async function handleSave() {\r\n        if (!settings) return;\r\n        setIsSaving(true);\r\n        try {\r\n            const result = await updateShopSettings(settings);\r\n            if (result.success) {\r\n                // Optional: Show toast success\r\n                alert('Settings saved successfully');\r\n            } else {\r\n                alert('Failed to save settings: ' + result.error);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error saving settings:', error);\r\n            alert('An unexpected error occurred');\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    }\r\n\r\n    // Helper to update specific fields\r\n    const updateField = (field: keyof ShopSettings, value: ShopSettings[keyof ShopSettings]) => {\r\n        if (!settings) return;\r\n        setSettings({ ...settings, [field]: value });\r\n    };\r\n\r\n    const updateHour = (day: string, type: 'open' | 'close', value: string | null) => {\r\n        if (!settings) return;\r\n        const newHours = { ...settings.business_hours };\r\n        if (!newHours[day]) newHours[day] = { open: null, close: null };\r\n\r\n        // @ts-expect-error business_hours is a JSON blob (day-keyed) and not strongly typed\r\n        newHours[day][type] = value;\r\n\r\n        updateField('business_hours', newHours);\r\n    };\r\n\r\n    if (isLoading) return <div className=\"h-[60vh] flex items-center justify-center\"><LoadingSpinner /></div>;\r\n    if (!settings) return <div className=\"p-8 text-center text-white/40\">Failed to load settings.</div>;\r\n\r\n    const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\r\n\r\n    return (\r\n        <div className=\"max-w-4xl mx-auto space-y-6 pb-20\">\r\n\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-display font-bold text-white mb-2\">Shop Settings</h1>\r\n                    <p className=\"text-white/40\">Configure your barbershop details and operations.</p>\r\n                </div>\r\n                <button\r\n                    onClick={handleSave}\r\n                    disabled={isSaving}\r\n                    className=\"flex items-center gap-2 bg-gold-500 hover:bg-gold-400 text-black font-bold px-6 py-3 rounded-xl transition-all shadow-lg shadow-gold-500/20 disabled:opacity-50\"\r\n                >\r\n                    {isSaving ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : <Save className=\"w-5 h-5\" />}\r\n                    {isSaving ? 'Saving...' : 'Save Changes'}\r\n                </button>\r\n            </div>\r\n\r\n            {/* Tabs */}\r\n            <div className=\"flex gap-2 border-b border-white/5 overflow-x-auto\">\r\n                {[\r\n                    { id: 'general', label: 'General Info', icon: Store },\r\n                    { id: 'hours', label: 'Business Hours', icon: Clock },\r\n                    { id: 'financials', label: 'Policies & Fees', icon: FileText },\r\n                    // { id: 'services', label: 'Services', icon: Scissors }, // Moving services to dedicated page later or separate implementation\r\n                ].map(tab => {\r\n                    const Icon = tab.icon;\r\n                    return (\r\n                        <button\r\n                            key={tab.id}\r\n                            onClick={() => setActiveTab(tab.id)}\r\n                            className={`flex items-center gap-2 px-6 py-4 font-bold text-sm transition-colors border-b-2 ${activeTab === tab.id\r\n                                ? 'border-gold-500 text-white'\r\n                                : 'border-transparent text-white/40 hover:text-white'\r\n                                }`}\r\n                        >\r\n                            <Icon className=\"w-4 h-4\" />\r\n                            {tab.label}\r\n                        </button>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* --- TAB: GENERAL --- */}\r\n            {activeTab === 'general' && (\r\n                <div className=\"bg-richblack-800 border border-white/5 rounded-2xl p-6 sm:p-8 space-y-8 animate-in fade-in slide-in-from-bottom-2\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n\r\n                        <div className=\"col-span-full\">\r\n                            <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">Shop Name</label>\r\n                            <div className=\"relative\">\r\n                                <Store className=\"absolute left-4 top-3.5 w-5 h-5 text-gold-500/50\" />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={settings.shop_name}\r\n                                    onChange={(e) => updateField('shop_name', e.target.value)}\r\n                                    className=\"w-full bg-richblack-900 border border-white/10 rounded-xl pl-12 pr-4 py-3 text-white focus:border-gold-500 focus:outline-none\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">Email Address</label>\r\n                            <div className=\"relative\">\r\n                                <Mail className=\"absolute left-4 top-3.5 w-5 h-5 text-white/20\" />\r\n                                <input\r\n                                    type=\"email\"\r\n                                    value={settings.shop_email || ''}\r\n                                    onChange={(e) => updateField('shop_email', e.target.value)}\r\n                                    className=\"w-full bg-richblack-900 border border-white/10 rounded-xl pl-12 pr-4 py-3 text-white focus:border-gold-500 focus:outline-none\"\r\n                                    placeholder=\"contact@barbershop.com\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">Phone Number</label>\r\n                            <div className=\"relative\">\r\n                                <Phone className=\"absolute left-4 top-3.5 w-5 h-5 text-white/20\" />\r\n                                <input\r\n                                    type=\"tel\"\r\n                                    value={settings.shop_phone || ''}\r\n                                    onChange={(e) => updateField('shop_phone', e.target.value)}\r\n                                    className=\"w-full bg-richblack-900 border border-white/10 rounded-xl pl-12 pr-4 py-3 text-white focus:border-gold-500 focus:outline-none\"\r\n                                    placeholder=\"+233...\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"col-span-full\">\r\n                            <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">Physical Address</label>\r\n                            <div className=\"relative\">\r\n                                <MapPin className=\"absolute left-4 top-3.5 w-5 h-5 text-white/20\" />\r\n                                <textarea\r\n                                    value={settings.shop_address || ''}\r\n                                    onChange={(e) => updateField('shop_address', e.target.value)}\r\n                                    className=\"w-full bg-richblack-900 border border-white/10 rounded-xl pl-12 pr-4 py-3 text-white focus:border-gold-500 focus:outline-none min-h-[100px]\"\r\n                                    placeholder=\"123 Barber Street, Accra\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* --- TAB: HOURS --- */}\r\n            {activeTab === 'hours' && (\r\n                <div className=\"bg-richblack-800 border border-white/5 rounded-2xl overflow-hidden animate-in fade-in slide-in-from-bottom-2\">\r\n                    <div className=\"p-4 bg-white/5 grid grid-cols-3 gap-4 text-xs font-bold text-white/40 uppercase tracking-widest text-center\">\r\n                        <div className=\"text-left pl-4\">Day</div>\r\n                        <div>Open</div>\r\n                        <div>Close</div>\r\n                    </div>\r\n                    <div className=\"divide-y divide-white/5\">\r\n                        {days.map(day => {\r\n                            const key = day.toLowerCase();\r\n                            // @ts-expect-error business_hours is a JSON blob (day-keyed) and not strongly typed\r\n                            const schedule = settings.business_hours[key] || { open: null, close: null };\r\n                            const isOpen = !!schedule.open;\r\n\r\n                            return (\r\n                                <div key={day} className=\"p-4 grid grid-cols-3 gap-4 items-center hover:bg-white/[0.02]\">\r\n                                    <div className=\"font-bold text-white pl-4 flex items-center gap-3\">\r\n                                        <input\r\n                                            type=\"checkbox\"\r\n                                            checked={isOpen}\r\n                                            onChange={(e) => {\r\n                                                if (e.target.checked) {\r\n                                                    updateHour(key, 'open', '09:00');\r\n                                                    updateHour(key, 'close', '18:00');\r\n                                                } else {\r\n                                                    updateHour(key, 'open', null);\r\n                                                    updateHour(key, 'close', null);\r\n                                                }\r\n                                            }}\r\n                                            className=\"w-4 h-4 rounded border-white/20 bg-white/10 text-gold-500 focus:ring-offset-richblack-900 focus:ring-gold-500\"\r\n                                        />\r\n                                        <span className={!isOpen ? 'opacity-50' : ''}>{day}</span>\r\n                                    </div>\r\n                                    <div className=\"text-center\">\r\n                                        <input\r\n                                            type=\"time\"\r\n                                            value={schedule.open || ''}\r\n                                            disabled={!isOpen}\r\n                                            onChange={(e) => updateHour(key, 'open', e.target.value)}\r\n                                            className=\"bg-richblack-900 border border-white/10 rounded-lg px-3 py-2 text-white text-sm disabled:opacity-20 text-center w-full max-w-[120px]\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"text-center\">\r\n                                        <input\r\n                                            type=\"time\"\r\n                                            value={schedule.close || ''}\r\n                                            disabled={!isOpen}\r\n                                            onChange={(e) => updateHour(key, 'close', e.target.value)}\r\n                                            className=\"bg-richblack-900 border border-white/10 rounded-lg px-3 py-2 text-white text-sm disabled:opacity-20 text-center w-full max-w-[120px]\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* --- TAB: FINANCIALS (POLICIES) --- */}\r\n            {activeTab === 'financials' && (\r\n                <div className=\"bg-richblack-800 border border-white/5 rounded-2xl p-6 sm:p-8 space-y-6 animate-in fade-in slide-in-from-bottom-2\">\r\n\r\n                    <div>\r\n                        <h3 className=\"text-lg font-bold text-white mb-4 flex items-center gap-2\">\r\n                            <Clock className=\"w-5 h-5 text-gold-500\" />\r\n                            Booking Constraints\r\n                        </h3>\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\r\n                            <div>\r\n                                <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">Slot Duration (Minutes)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={settings.slot_duration_minutes}\r\n                                    onChange={(e) => updateField('slot_duration_minutes', parseInt(e.target.value))}\r\n                                    className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-gold-500 focus:outline-none\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">Cancellation Window (Hours)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={settings.cancellation_hours}\r\n                                    onChange={(e) => updateField('cancellation_hours', parseInt(e.target.value))}\r\n                                    className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-gold-500 focus:outline-none\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"pt-6 border-t border-white/5\">\r\n                        <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">Booking Policy Text</label>\r\n                        <textarea\r\n                            value={settings.booking_policies || ''}\r\n                            onChange={(e) => updateField('booking_policies', e.target.value)}\r\n                            className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-gold-500 focus:outline-none min-h-[150px]\"\r\n                            placeholder=\"Terms and conditions displayed to customers...\"\r\n                        />\r\n                        <p className=\"text-xs text-white/20 mt-2\">Displaying policies helps manage customer expectations regarding cancellations and lateness.</p>\r\n                    </div>\r\n\r\n                    {/* Placeholder for Financials if we add them later */}\r\n                    <div className=\"pt-6 border-t border-white/5 opacity-50\">\r\n                        <h3 className=\"text-lg font-bold text-white mb-2 flex items-center gap-2\">\r\n                            <DollarSign className=\"w-5 h-5\" />\r\n                            Fees & Taxes (Coming Soon)\r\n                        </h3>\r\n                        <p className=\"text-sm text-white/40\">Configuration for booking fees and tax rates will be available in the next update.</p>\r\n                    </div>\r\n\r\n                </div>\r\n            )}\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction LoadingSpinner() {\r\n    return <Loader2 className=\"w-8 h-8 text-gold-500 animate-spin\" />;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\admin\\dashboard\\staff\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\admin\\dashboard\\staff\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":21,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Trash2"},"fix":{"range":[302,315],"text":""},"desc":"Remove unused variable \"Trash2\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":154,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5533,5536],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5533,5536],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":176,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":176,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6381,6384],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6381,6384],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":245,"column":45,"nodeType":"JSXOpeningElement","endLine":245,"endColumn":131}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport {\r\n    Users,\r\n    UserPlus,\r\n    MoreVertical,\r\n    Phone,\r\n    Mail,\r\n    Search,\r\n    Filter,\r\n    X,\r\n    CheckCircle,\r\n    XCircle,\r\n    Loader2,\r\n    Calendar,\r\n    Edit2,\r\n    Shield,\r\n    KeyRound,\r\n    MessageSquare,\r\n    Trash2\r\n} from 'lucide-react';\r\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\r\nimport { ImageUpload } from '@/components/ui/ImageUpload';\r\nimport { getStaff, createStaff, updateStaff, toggleStaffStatus } from '@/utils/supabase/queries';\r\nimport { setStaffPinWithNotification, clearStaffPinAction } from './actions';\r\nimport type { Staff, CreateStaffInput, UpdateStaffInput } from '@/types/database';\r\n\r\nexport default function StaffPage() {\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [staffList, setStaffList] = useState<Staff[]>([]);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    // PIN Modal State\r\n    const [pinModalOpen, setPinModalOpen] = useState(false);\r\n    const [pinStaff, setPinStaff] = useState<Staff | null>(null);\r\n    const [pinValue, setPinValue] = useState(['', '', '', '']);\r\n    const [pinError, setPinError] = useState('');\r\n    const [pinSuccess, setPinSuccess] = useState('');\r\n    const [pinLoading, setPinLoading] = useState(false);\r\n    const pinInputRefs = useRef<(HTMLInputElement | null)[]>([]);\r\n\r\n    // Form State\r\n    const [editingId, setEditingId] = useState<string | null>(null);\r\n    const [formData, setFormData] = useState<Partial<CreateStaffInput> & { schedule?: string[] }>({\r\n        specialties: [],\r\n        schedule: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'] // Default schedule\r\n    });\r\n\r\n    const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\r\n\r\n    useEffect(() => {\r\n        fetchStaff();\r\n    }, []);\r\n\r\n    async function fetchStaff() {\r\n        setIsLoading(true);\r\n        try {\r\n            const data = await getStaff();\r\n            setStaffList(data);\r\n        } catch (error) {\r\n            console.error('Failed to load staff', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    async function handleToggleStatus(id: string, currentStatus: boolean) {\r\n        // Optimistic update\r\n        setStaffList(prev => prev.map(s => s.id === id ? { ...s, is_active: !currentStatus } : s));\r\n\r\n        try {\r\n            await toggleStaffStatus(id, !currentStatus);\r\n        } catch (error) {\r\n            console.error('Failed to toggle status', error);\r\n            // Revert on error\r\n            setStaffList(prev => prev.map(s => s.id === id ? { ...s, is_active: currentStatus } : s));\r\n        }\r\n    }\r\n\r\n    // Open Modal for Create or Edit\r\n    const openModal = (staff: Staff | null = null) => {\r\n        if (staff) {\r\n            setEditingId(staff.id);\r\n            setFormData({\r\n                name: staff.name,\r\n                email: staff.email || '',\r\n                phone: staff.phone || '',\r\n                pin: '', // Never show existing PIN hash, user must enter new one to change it\r\n                payment_details: staff.payment_details || '',\r\n                specialties: staff.specialties || [],\r\n                avatar_url: staff.avatar_url || '',\r\n                schedule: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'] // Mock schedule for now as we don't fetch it yet\r\n            });\r\n        } else {\r\n            setEditingId(null);\r\n            setFormData({\r\n                name: '',\r\n                email: '',\r\n                phone: '',\r\n                pin: '',\r\n                payment_details: '',\r\n                specialties: [],\r\n                avatar_url: '',\r\n                schedule: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri']\r\n            });\r\n        }\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const toggleDay = (day: string) => {\r\n        const currentSchedule = formData.schedule || [];\r\n        if (currentSchedule.includes(day)) {\r\n            setFormData({ ...formData, schedule: currentSchedule.filter(d => d !== day) });\r\n        } else {\r\n            setFormData({ ...formData, schedule: [...currentSchedule, day] });\r\n        }\r\n    };\r\n\r\n    async function handleSave(e: React.FormEvent) {\r\n        e.preventDefault();\r\n        setIsSubmitting(true);\r\n\r\n        try {\r\n            // Basic validation\r\n            if (!formData.name || !formData.email) {\r\n                alert(\"Please fill in Name and Email\");\r\n                setIsSubmitting(false);\r\n                return;\r\n            }\r\n\r\n            // If creating, PIN is required. If editing, it's optional (only if changing)\r\n            if (!editingId && !formData.pin) {\r\n                alert(\"PIN is required for new staff\");\r\n                setIsSubmitting(false);\r\n                return;\r\n            }\r\n\r\n            if (editingId) {\r\n                // UPDATE\r\n                const payload: UpdateStaffInput = {\r\n                    id: editingId,\r\n                    name: formData.name,\r\n                    email: formData.email,\r\n                    phone: formData.phone || '',\r\n                    pin: formData.pin, // Only send if provided, backend should handle hashing if not empty\r\n                    specialties: formData.specialties,\r\n                    payment_details: formData.payment_details,\r\n                    avatar_url: formData.avatar_url,\r\n                };\r\n\r\n                const result: any = await updateStaff(payload);\r\n\r\n                if (result.success) {\r\n                    setIsModalOpen(false);\r\n                    fetchStaff();\r\n                } else {\r\n                    alert(`Error: ${result.error || 'Failed to update staff'}`);\r\n                }\r\n\r\n            } else {\r\n                // CREATE\r\n                const payload: CreateStaffInput = {\r\n                    name: formData.name!,\r\n                    email: formData.email!,\r\n                    phone: formData.phone || '',\r\n                    pin: formData.pin!,\r\n                    bio: formData.bio || '',\r\n                    specialties: formData.specialties || [],\r\n                    payment_details: formData.payment_details || '',\r\n                    avatar_url: formData.avatar_url\r\n                };\r\n\r\n                const result: any = await createStaff(payload);\r\n\r\n                if (result.success) {\r\n                    setIsModalOpen(false);\r\n                    fetchStaff();\r\n                } else {\r\n                    alert(`Error: ${result.error || 'Failed to create staff'}`);\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Error saving staff:', error);\r\n            alert('An unexpected error occurred.');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const filteredStaff = staffList.filter(s =>\r\n        s.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        (s.email && s.email.toLowerCase().includes(searchQuery.toLowerCase()))\r\n    );\r\n\r\n    if (isLoading) return <div className=\"h-[60vh] flex items-center justify-center\"><LoadingSpinner /></div>;\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto space-y-8\">\r\n\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-display font-bold text-white mb-2\">Staff Management</h1>\r\n                    <p className=\"text-white/40\">Manage your team, schedules, and access.</p>\r\n                </div>\r\n                <button\r\n                    onClick={() => openModal(null)}\r\n                    className=\"flex items-center gap-2 bg-gold-500 hover:bg-gold-400 text-black font-bold px-6 py-3 rounded-xl transition-all shadow-lg shadow-gold-500/20\"\r\n                >\r\n                    <UserPlus className=\"w-5 h-5\" />\r\n                    Add New Staff\r\n                </button>\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <div className=\"bg-richblack-800 border border-white/5 p-4 rounded-xl flex items-center gap-4\">\r\n                <div className=\"flex-1 relative\">\r\n                    <Search className=\"absolute left-3 top-3 w-5 h-5 text-white/20\" />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search staff by name or email...\"\r\n                        className=\"w-full bg-richblack-900 border border-white/10 rounded-lg pl-10 pr-4 py-2.5 text-white focus:border-gold-500/50 focus:outline-none\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                    />\r\n                </div>\r\n                <button className=\"flex items-center gap-2 px-4 py-2.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-white font-medium transition-colors\">\r\n                    <Filter className=\"w-4 h-4 text-white/60\" />\r\n                    <span>Filter</span>\r\n                </button>\r\n            </div>\r\n\r\n            {/* Staff Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                {filteredStaff.map((staff) => (\r\n                    <div key={staff.id} className={`bg-richblack-800 border rounded-2xl overflow-hidden group hover:border-white/10 transition-all ${staff.is_active ? 'border-white/5' : 'border-red-500/20 opacity-75'}`}>\r\n                        <div className=\"p-6\">\r\n                            <div className=\"flex justify-between items-start mb-4\">\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-gold-500 to-gold-600 flex items-center justify-center text-black font-bold text-xl ring-2 ring-gold-500/20 shadow-lg shadow-gold-500/10 overflow-hidden\">\r\n                                        {staff.avatar_url ? (\r\n                                            <img src={staff.avatar_url} alt={staff.name} className=\"w-full h-full object-cover\" />\r\n                                        ) : (\r\n                                            staff.name.charAt(0).toUpperCase()\r\n                                        )}\r\n                                    </div>\r\n                                    <div>\r\n                                        <h3 className=\"font-bold text-white text-lg leading-tight\">{staff.name}</h3>\r\n                                        <p className=\"text-white/40 text-sm\">Barber</p>\r\n                                    </div>\r\n                                </div>\r\n                                <button className=\"text-white/20 hover:text-white transition-colors\">\r\n                                    <MoreVertical className=\"w-5 h-5\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-3 mb-6\">\r\n                                <div className=\"flex items-center gap-3 text-sm text-white/60\">\r\n                                    <Phone className=\"w-4 h-4 text-gold-500/50\" />\r\n                                    {staff.phone || 'No phone'}\r\n                                </div>\r\n                                <div className=\"flex items-center gap-3 text-sm text-white/60\">\r\n                                    <Mail className=\"w-4 h-4 text-gold-500/50\" />\r\n                                    <span className='truncate'>{staff.email}</span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-3 text-sm text-white/60\">\r\n                                    <Shield className=\"w-4 h-4 text-gold-500/50\" />\r\n                                    <span>{staff.commission_percentage}% Commission</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Schedule Pills (Mock Visual for now) */}\r\n                            <div className=\"flex flex-wrap gap-1.5 mb-2\">\r\n                                {days.map(d => (\r\n                                    <span key={d} className={`text-[10px] uppercase font-bold px-1.5 py-0.5 rounded ${['Mon', 'Tue', 'Wed', 'Thu', 'Fri'].includes(d) ? 'bg-white/10 text-white' : 'bg-transparent text-white/10'}`}>\r\n                                        {d.charAt(0)}\r\n                                    </span>\r\n                                ))}\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div className=\"bg-white/5 px-6 py-4 flex items-center justify-between border-t border-white/5\">\r\n                            <button\r\n                                onClick={() => handleToggleStatus(staff.id, staff.is_active)}\r\n                                className={`flex items-center gap-2 text-xs font-bold px-3 py-1.5 rounded-lg transition-colors ${staff.is_active\r\n                                    ? 'bg-green-500/10 text-green-400 hover:bg-green-500/20'\r\n                                    : 'bg-red-500/10 text-red-400 hover:bg-red-500/20'\r\n                                    }`}\r\n                            >\r\n                                {staff.is_active ? <CheckCircle className=\"w-3 h-3\" /> : <XCircle className=\"w-3 h-3\" />}\r\n                                {staff.is_active ? 'Active' : 'Inactive'}\r\n                            </button>\r\n\r\n                            <div className=\"flex gap-2\">\r\n                                <button\r\n                                    onClick={() => {\r\n                                        setPinStaff(staff);\r\n                                        setPinValue(['', '', '', '']);\r\n                                        setPinError('');\r\n                                        setPinModalOpen(true);\r\n                                    }}\r\n                                    className={`p-2 hover:bg-white/5 rounded-lg transition-colors ${staff.pin_hash ? 'text-green-500 hover:text-green-400' : 'text-white/40 hover:text-white'}`}\r\n                                    title={staff.pin_hash ? 'PIN Set - Click to change' : 'Set PIN'}\r\n                                >\r\n                                    <KeyRound className=\"w-4 h-4\" />\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => openModal(staff)}\r\n                                    className=\"p-2 hover:bg-white/5 rounded-lg text-white/40 hover:text-white transition-colors\" title=\"Schedule\">\r\n                                    <Calendar className=\"w-4 h-4\" />\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => openModal(staff)}\r\n                                    className=\"p-2 hover:bg-white/5 rounded-lg text-white/40 hover:text-white transition-colors\" title=\"Edit Profile\">\r\n                                    <Edit2 className=\"w-4 h-4\" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n\r\n                {filteredStaff.length === 0 && (\r\n                    <div className=\"col-span-full py-12 text-center text-white/40 bg-white/5 rounded-2xl border border-dashed border-white/10\">\r\n                        <Users className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\r\n                        <p>No staff members found matching your search.</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Modal */}\r\n            {isModalOpen && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4 animate-in fade-in duration-200\">\r\n                    <div className=\"bg-richblack-800 w-full max-w-lg rounded-2xl border border-white/10 shadow-2xl flex flex-col max-h-[90vh]\">\r\n                        <div className=\"p-6 border-b border-white/5 flex items-center justify-between\">\r\n                            <h3 className=\"text-xl font-bold text-white\">\r\n                                {editingId ? 'Edit Staff Member' : 'Add New Staff'}\r\n                            </h3>\r\n                            <button onClick={() => setIsModalOpen(false)} className=\"text-white/40 hover:text-white\">\r\n                                <X className=\"w-6 h-6\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"p-6 flex-1 overflow-y-auto space-y-6\">\r\n                            <form id=\"staff-form\" onSubmit={handleSave} className=\"space-y-4\">\r\n                                {/* Avatar Upload */}\r\n                                <div className=\"flex justify-center mb-6\">\r\n                                    <div className=\"w-32 h-32\">\r\n                                        <ImageUpload\r\n                                            bucketName=\"staff-avatars\"\r\n                                            folderPath=\"profiles\"\r\n                                            currentImage={formData.avatar_url}\r\n                                            onUploadComplete={(url) => setFormData({ ...formData, avatar_url: url })}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">Full Name</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        required\r\n                                        className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-gold-500/50 focus:outline-none\"\r\n                                        placeholder=\"e.g. Kofi Boateng\"\r\n                                        value={formData.name || ''}\r\n                                        onChange={e => setFormData({ ...formData, name: e.target.value })}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">Email</label>\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        required\r\n                                        className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-gold-500/50 focus:outline-none\"\r\n                                        placeholder=\"staff@noir.com\"\r\n                                        value={formData.email || ''}\r\n                                        onChange={e => setFormData({ ...formData, email: e.target.value })}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-2 gap-4\">\r\n                                    <div>\r\n                                        <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">Phone</label>\r\n                                        <input\r\n                                            type=\"tel\"\r\n                                            className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-gold-500/50 focus:outline-none\"\r\n                                            placeholder=\"055...\"\r\n                                            value={formData.phone || ''}\r\n                                            onChange={e => setFormData({ ...formData, phone: e.target.value })}\r\n                                        />\r\n                                    </div>\r\n                                    <div>\r\n                                        <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">\r\n                                            {editingId ? 'New PIN (Optional)' : 'Access PIN'}\r\n                                        </label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            required={!editingId}\r\n                                            maxLength={4}\r\n                                            pattern=\"\\d{4}\"\r\n                                            className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-gold-500/50 focus:outline-none font-mono tracking-widest text-center\"\r\n                                            placeholder={editingId ? \"Leave blank to keep\" : \"1234\"}\r\n                                            value={formData.pin || ''}\r\n                                            onChange={e => setFormData({ ...formData, pin: e.target.value })}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">Specialties (Comma separated)</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-gold-500/50 focus:outline-none\"\r\n                                        placeholder=\"Fades, Beard Trim, Color\"\r\n                                        value={Array.isArray(formData.specialties) ? formData.specialties.join(', ') : formData.specialties}\r\n                                        onChange={e => setFormData({ ...formData, specialties: e.target.value.split(',').map(s => s.trim()) })}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-2\">Payment Details (MoMo/Bank Info)</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-gold-500/50 focus:outline-none\"\r\n                                        placeholder=\"Mobile Money Name & Number / Bank Details\"\r\n                                        value={formData.payment_details || ''}\r\n                                        onChange={e => setFormData({ ...formData, payment_details: e.target.value })}\r\n                                    />\r\n                                    <p className=\"text-[10px] text-white/30 mt-1\">For manual payout processing.</p>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-xs uppercase tracking-widest text-white/40 font-bold mb-3\">Work Schedule</label>\r\n                                    <div className=\"flex flex-wrap gap-2\">\r\n                                        {days.map(day => (\r\n                                            <button\r\n                                                type=\"button\"\r\n                                                key={day}\r\n                                                onClick={() => toggleDay(day)}\r\n                                                className={`px-3 py-2 rounded-lg text-sm font-bold border transition-all ${formData.schedule?.includes(day)\r\n                                                    ? 'bg-gold-500 text-black border-gold-500'\r\n                                                    : 'bg-white/5 text-white/40 border-transparent hover:bg-white/10 hover:text-white'\r\n                                                    }`}\r\n                                            >\r\n                                                {day}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </form>\r\n                        </div>\r\n\r\n                        <div className=\"p-6 border-t border-white/5 bg-richblack-900/50 flex justify-end gap-3\">\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setIsModalOpen(false)}\r\n                                className=\"px-6 py-3 rounded-xl font-bold text-white/60 hover:text-white hover:bg-white/5 transition-colors\"\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                            <button\r\n                                type=\"submit\"\r\n                                form=\"staff-form\"\r\n                                disabled={isSubmitting}\r\n                                className=\"px-8 py-3 rounded-xl font-bold bg-gold-500 hover:bg-gold-400 text-black shadow-lg shadow-gold-500/20 transition-all flex items-center gap-2\"\r\n                            >\r\n                                {isSubmitting && <Loader2 className=\"w-4 h-4 animate-spin\" />}\r\n                                {editingId ? 'Save Changes' : 'Create Member'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* PIN Modal */}\r\n            {pinModalOpen && pinStaff && (\r\n                <div className=\"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4\">\r\n                    <div className=\"bg-richblack-800 border border-white/10 rounded-2xl p-6 w-full max-w-sm\">\r\n                        <div className=\"flex items-center justify-between mb-6\">\r\n                            <div>\r\n                                <h3 className=\"text-lg font-bold text-white\">Set Staff PIN</h3>\r\n                                <p className=\"text-white/40 text-sm\">{pinStaff.name}</p>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => setPinModalOpen(false)}\r\n                                className=\"p-2 text-white/40 hover:text-white hover:bg-white/5 rounded-lg\"\r\n                            >\r\n                                <X className=\"w-5 h-5\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center justify-center gap-1 mb-2\">\r\n                            <KeyRound className=\"w-4 h-4 text-gold-500\" />\r\n                            <span className=\"text-white/60 text-sm\">Enter 4-digit PIN</span>\r\n                        </div>\r\n\r\n                        <div className=\"flex justify-center gap-3 mb-4\">\r\n                            {pinValue.map((digit, index) => (\r\n                                <input\r\n                                    key={index}\r\n                                    ref={(el) => { pinInputRefs.current[index] = el; }}\r\n                                    type=\"password\"\r\n                                    inputMode=\"numeric\"\r\n                                    maxLength={1}\r\n                                    value={digit}\r\n                                    onChange={(e) => {\r\n                                        const val = e.target.value;\r\n                                        if (val && !/^\\d$/.test(val)) return;\r\n                                        const newPin = [...pinValue];\r\n                                        newPin[index] = val;\r\n                                        setPinValue(newPin);\r\n                                        setPinError('');\r\n                                        if (val && index < 3) {\r\n                                            pinInputRefs.current[index + 1]?.focus();\r\n                                        }\r\n                                    }}\r\n                                    onKeyDown={(e) => {\r\n                                        if (e.key === 'Backspace' && !pinValue[index] && index > 0) {\r\n                                            pinInputRefs.current[index - 1]?.focus();\r\n                                        }\r\n                                    }}\r\n                                    className=\"w-14 h-16 text-center text-2xl font-bold bg-richblack-900 border-2 border-white/10 rounded-xl text-white focus:outline-none focus:border-gold-500 transition-colors\"\r\n                                    disabled={pinLoading}\r\n                                />\r\n                            ))}\r\n                        </div>\r\n\r\n                        {pinError && (\r\n                            <p className=\"text-red-500 text-sm text-center mb-4\">{pinError}</p>\r\n                        )}\r\n\r\n                        <div className=\"flex gap-3\">\r\n                            {pinStaff.pin_hash && (\r\n                                <button\r\n                                    onClick={async () => {\r\n                                        setPinLoading(true);\r\n                                        setPinSuccess('');\r\n                                        const result = await clearStaffPinAction(pinStaff.id);\r\n                                        setPinLoading(false);\r\n                                        if (result.success) {\r\n                                            setPinModalOpen(false);\r\n                                            fetchStaff();\r\n                                        } else {\r\n                                            setPinError('Failed to clear PIN');\r\n                                        }\r\n                                    }}\r\n                                    disabled={pinLoading}\r\n                                    className=\"flex-1 py-3 rounded-xl font-bold bg-red-500/10 text-red-500 border border-red-500/20 hover:bg-red-500/20 transition-colors\"\r\n                                >\r\n                                    Clear PIN\r\n                                </button>\r\n                            )}\r\n                            <button\r\n                                onClick={async () => {\r\n                                    const pin = pinValue.join('');\r\n                                    if (pin.length !== 4) {\r\n                                        setPinError('Please enter all 4 digits');\r\n                                        return;\r\n                                    }\r\n                                    setPinLoading(true);\r\n                                    setPinSuccess('');\r\n                                    setPinError('');\r\n                                    const result = await setStaffPinWithNotification(\r\n                                        pinStaff.id,\r\n                                        pin,\r\n                                        pinStaff.name,\r\n                                        pinStaff.phone\r\n                                    );\r\n                                    setPinLoading(false);\r\n                                    if (result.success) {\r\n                                        if (result.smsSent) {\r\n                                            setPinSuccess(`PIN set! SMS sent to ${pinStaff.phone}`);\r\n                                        } else if (pinStaff.phone) {\r\n                                            setPinSuccess('PIN set! SMS could not be sent - please inform staff manually.');\r\n                                        } else {\r\n                                            setPinSuccess('PIN set! No phone number - please inform staff manually.');\r\n                                        }\r\n                                        fetchStaff();\r\n                                        setTimeout(() => setPinModalOpen(false), 2000);\r\n                                    } else {\r\n                                        setPinError('Failed to set PIN');\r\n                                    }\r\n                                }}\r\n                                disabled={pinLoading || pinValue.join('').length !== 4}\r\n                                className=\"flex-1 py-3 rounded-xl font-bold bg-gold-500 text-black hover:bg-gold-400 transition-colors disabled:opacity-50 flex items-center justify-center gap-2\"\r\n                            >\r\n                                {pinLoading && <Loader2 className=\"w-4 h-4 animate-spin\" />}\r\n                                <MessageSquare className=\"w-4 h-4\" />\r\n                                Set & Notify\r\n                            </button>\r\n                        </div>\r\n\r\n                        {pinSuccess && (\r\n                            <p className=\"text-green-500 text-sm text-center mt-4 flex items-center justify-center gap-2\">\r\n                                <CheckCircle className=\"w-4 h-4\" />\r\n                                {pinSuccess}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\admin\\login\\actions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[165,168],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[165,168],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server';\r\n\r\nimport { createClient } from '@/utils/supabase/server';\r\nimport { redirect } from 'next/navigation';\r\n\r\nexport async function loginAdmin(prevState: any, formData: FormData) {\r\n    const email = formData.get('email') as string;\r\n    const password = formData.get('password') as string;\r\n\r\n    if (!email || !password) {\r\n        return { error: 'Email and password are required.' };\r\n    }\r\n\r\n    const supabase = await createClient();\r\n\r\n    if (!supabase) {\r\n        return { error: 'System not configured.' };\r\n    }\r\n\r\n    const { error } = await supabase.auth.signInWithPassword({\r\n        email,\r\n        password,\r\n    });\r\n\r\n    if (error) {\r\n        console.error('Admin login error:', error.message);\r\n        return { error: error.message || 'Invalid credentials.' };\r\n    }\r\n\r\n    redirect('/admin/dashboard');\r\n}\r\n\r\nexport async function logoutAdmin() {\r\n    const supabase = await createClient();\r\n\r\n    if (!supabase) {\r\n        redirect('/admin/login');\r\n    }\r\n\r\n    await supabase.auth.signOut();\r\n    redirect('/admin/login');\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\admin\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\api\\cron\\reminders\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\book\\actions.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createClient' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":22,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"createClient"},"fix":{"range":[17,72],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'redirect' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":18,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"redirect"},"fix":{"range":[193,236],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server';\r\n\r\nimport { createClient } from '@/utils/supabase/server';\r\nimport { createBooking } from '@/utils/supabase/queries';\r\nimport type { CreateBookingData } from '@/types/database';\r\nimport { redirect } from 'next/navigation';\r\n\r\nexport async function saveBookingAfterPayment(bookingData: CreateBookingData) {\r\n    try {\r\n        const booking = await createBooking(bookingData);\r\n\r\n        if (!booking) {\r\n            return { success: false, error: 'Failed to create booking' };\r\n        }\r\n\r\n        return { success: true, bookingId: booking.id };\r\n    } catch (error) {\r\n        console.error('Error saving booking:', error);\r\n        return { success: false, error: 'An error occurred while saving your booking' };\r\n    }\r\n}\r\n\r\nexport async function verifyPaystackPayment(reference: string) {\r\n    try {\r\n        if (!process.env.PAYSTACK_SECRET_KEY) {\r\n            console.warn('PAYSTACK_SECRET_KEY not set - using mock verification');\r\n            return {\r\n                success: true,\r\n                data: {\r\n                    status: 'success',\r\n                    amount: 0,\r\n                    metadata: {}\r\n                }\r\n            };\r\n        }\r\n\r\n        const response = await fetch(\r\n            `https://api.paystack.co/transaction/verify/${reference}`,\r\n            {\r\n                headers: {\r\n                    Authorization: `Bearer ${process.env.PAYSTACK_SECRET_KEY}`,\r\n                },\r\n                cache: 'no-store',\r\n            }\r\n        );\r\n\r\n        const data = await response.json();\r\n\r\n        if (data.status && data.data.status === 'success') {\r\n            return { success: true, data: data.data };\r\n        }\r\n\r\n        return { success: false, error: data.message || 'Payment verification failed' };\r\n    } catch (error) {\r\n        console.error('Error verifying payment:', error);\r\n        return { success: false, error: 'Payment verification error' };\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\book\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\confirmation\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ShieldCheck' is defined but never used.","line":12,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":49,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ShieldCheck"},"fix":{"range":[654,667],"text":""},"desc":"Remove unused variable \"ShieldCheck\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\nimport React, { useRef, useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport { motion, useScroll, useTransform, AnimatePresence } from \"framer-motion\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { Testimonials } from \"@/components/sections/Testimonials\";\nimport { BarbersShowcase } from \"@/components/sections/BarbersShowcase\";\nimport { FAQ } from \"@/components/sections/FAQ\";\nimport { LocationContact } from \"@/components/sections/LocationContact\";\nimport { WhatsAppButton } from \"@/components/ui/WhatsAppButton\";\nimport { ArrowRight, Star, Scissors, ShieldCheck, Loader2 } from \"lucide-react\";\nimport { MagneticButton } from \"@/components/ui/MagneticButton\";\nimport { getServices, getShopSettings, getStaff, getHeroSlides, getApprovedReviews } from \"@/utils/supabase/queries\";\nimport { useBookingStore } from \"@/store/booking\";\nimport type { Service, ShopSettings, Staff, HeroSlide, Review } from \"@/types/database\";\n\n// Extracted Hero Section to isolate useScroll\nfunction HeroSection({ settings, slides }: { settings: ShopSettings | null; slides: HeroSlide[] }) {\n  const containerRef = useRef(null);\n  const { scrollYProgress } = useScroll({\n    target: containerRef,\n    offset: [\"start start\", \"end start\"]\n  });\n\n  const yText = useTransform(scrollYProgress, [0, 1], [0, 200]);\n  const yImage = useTransform(scrollYProgress, [0, 1], [0, -100]);\n  const opacityHero = useTransform(scrollYProgress, [0, 0.5], [1, 0]);\n\n  // Carousel state\n  const [currentSlide, setCurrentSlide] = useState(0);\n\n  // Auto-cycle through slides\n  useEffect(() => {\n    if (slides.length <= 1) return;\n\n    const interval = setInterval(() => {\n      setCurrentSlide(prev => (prev + 1) % slides.length);\n    }, 5000); // 5 seconds\n\n    return () => clearInterval(interval);\n  }, [slides.length]);\n\n  // Get current image URL\n  const currentImageUrl = slides.length > 0\n    ? slides[currentSlide]?.image_url\n    : settings?.banner_url || \"https://images.unsplash.com/photo-1585747860715-2ba37e788b70?q=80&w=2074&auto=format&fit=crop\";\n\n  return (\n    <section ref={containerRef} className=\"relative h-screen flex items-center justify-center px-6 overflow-hidden\">\n      {/* Animated Gradient Orb */}\n      <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-gold-600/10 rounded-full blur-[120px] animate-pulse pointer-events-none\" />\n\n      <div className=\"relative z-10 max-w-6xl w-full mx-auto grid md:grid-cols-2 gap-12 items-center mt-20\">\n\n        {/* Text Content with Parallax */}\n        <motion.div style={{ y: yText, opacity: opacityHero }}>\n          <div className=\"flex items-center space-x-2 text-gold-400 mb-6\">\n            <span className=\"w-12 h-[1px] bg-gold-500\"></span>\n            <span className=\"text-sm tracking-[0.3em] uppercase font-bold\">Est. 2026 • {settings?.shop_address?.split(',').pop()?.trim() || 'Ghana'}</span>\n          </div>\n\n          <h1 className=\"font-display text-5xl md:text-6xl lg:text-8xl font-bold leading-[0.85] text-white mb-8 tracking-tighter\">\n            {settings?.shop_name?.split(' ')[0] || 'MASTER'} <br />\n            <span className=\"text-mask-gold\">{settings?.shop_name?.split(' ').slice(1).join(' ') || 'CRAFTSMAN'}</span>\n          </h1>\n\n          <p className=\"text-white/60 text-lg md:text-xl max-w-md mb-10 leading-relaxed font-light\">\n            Precision cuts. Premium atmosphere. The ultimate grooming experience tailored for the modern gentleman.\n          </p>\n\n          <div className=\"flex flex-col sm:flex-row gap-6\">\n            <MagneticButton>\n              <Link href=\"/book\" className=\"flex items-center justify-center gap-2 px-8 py-4 bg-gold-500 text-richblack-900 font-bold tracking-widest rounded-lg hover:bg-white transition-colors\">\n                BOOK APPOINTMENT <ArrowRight className=\"w-4 h-4\" />\n              </Link>\n            </MagneticButton>\n\n            <MagneticButton>\n              <Link href=\"#services\" className=\"flex items-center justify-center px-8 py-4 border border-white/20 hover:border-gold-500 text-white hover:text-gold-500 transition-colors tracking-widest font-medium rounded-lg\">\n                VIEW SERVICES\n              </Link>\n            </MagneticButton>\n          </div>\n        </motion.div>\n\n        {/* Visual with Parallax Reverse - Carousel */}\n        <motion.div\n          style={{ y: yImage, opacity: opacityHero }}\n          className=\"hidden md:block relative perspective-1000\"\n        >\n          {/* Background Image - Dynamic Carousel */}\n          <div className=\"relative w-full aspect-square max-h-[600px] rounded-2xl overflow-hidden shadow-2xl border border-white/10 group\">\n            <div className=\"absolute inset-0 z-0\">\n              <AnimatePresence mode=\"wait\">\n                <motion.img\n                  key={currentSlide}\n                  src={currentImageUrl}\n                  alt=\"Barbershop Atmosphere\"\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 0.9 }}\n                  exit={{ opacity: 0 }}\n                  transition={{ duration: 0.8 }}\n                  className=\"w-full h-full object-cover scale-105 animate-slow-zoom\"\n                />\n              </AnimatePresence>\n              <div className=\"absolute inset-0 bg-gradient-to-t from-richblack-900/50 via-transparent to-transparent\" />\n            </div>\n\n            {/* Slide Indicators */}\n            {slides.length > 1 && (\n              <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 z-20 flex gap-2\">\n                {slides.map((_, idx) => (\n                  <button\n                    key={idx}\n                    onClick={() => setCurrentSlide(idx)}\n                    className={`w-2 h-2 rounded-full transition-all ${idx === currentSlide ? 'bg-gold-500 w-4' : 'bg-white/30 hover:bg-white/50'}`}\n                  />\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Floating Rating Card */}\n          <motion.div\n            animate={{ y: [0, -15, 0] }}\n            transition={{ repeat: Infinity, duration: 6, ease: \"easeInOut\" }}\n            className=\"absolute bottom-12 -left-12 z-20 bg-richblack-900/90 backdrop-blur-md border border-gold-500/30 p-6 rounded-xl shadow-elevated-gold\"\n          >\n            <div className=\"flex gap-1 mb-2\">\n              {[1, 2, 3, 4, 5].map(i => <Star key={i} className=\"w-4 h-4 text-gold-500 fill-gold-500\" />)}\n            </div>\n            <p className=\"text-white font-bold text-xl\">5.0 Rating</p>\n            <p className=\"text-white/40 text-xs mt-1\">120+ Verified Reviews</p>\n          </motion.div>\n        </motion.div>\n      </div>\n    </section>\n  );\n}\n\nexport default function Home() {\n  // Data State\n  const [services, setServices] = useState<Service[]>([]);\n  const [shopSettings, setShopSettings] = useState<ShopSettings | null>(null);\n  const [staff, setStaff] = useState<Staff[]>([]);\n  const [heroSlides, setHeroSlides] = useState<HeroSlide[]>([]);\n  const [reviews, setReviews] = useState<Review[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const { reset } = useBookingStore();\n\n  useEffect(() => {\n    // Reset booking state when user lands on home page\n    reset();\n\n    async function fetchData() {\n      try {\n        const [servicesData, settingsData, staffData, slidesData, reviewsData] = await Promise.all([\n          getServices(),\n          getShopSettings(),\n          getStaff(),\n          getHeroSlides(),\n          getApprovedReviews(3)\n        ]);\n        setServices(servicesData);\n        setShopSettings(settingsData);\n        setStaff(staffData);\n        setHeroSlides(slidesData);\n        setReviews(reviewsData);\n      } catch (error) {\n        console.error(\"Failed to fetch landing page data:\", error);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n    fetchData();\n  }, [reset]);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-richblack-900 flex items-center justify-center\">\n        <Loader2 className=\"w-10 h-10 text-gold-500 animate-spin\" />\n      </div>\n    );\n  }\n\n  return (\n    <main className=\"min-h-screen bg-richblack-900 text-gold-50 overflow-hidden relative\">\n      {/* 1. Global Noise Overlay */}\n      <div className=\"bg-noise\" />\n\n      <Header />\n\n      <HeroSection settings={shopSettings} slides={heroSlides} />\n\n      {/* Services Preview Grid with Scroll Animation */}\n      <ServicesSection services={services} />\n\n      {/* Sections passed with props where needed */}\n      <BarbersShowcase staff={staff} />\n      <Testimonials reviews={reviews} />\n      <FAQ />\n      <LocationContact settings={shopSettings} />\n      <Footer settings={shopSettings} />\n      <WhatsAppButton phone={shopSettings?.shop_phone} />\n    </main>\n  );\n}\n\n// Extracted for cleaner code\nfunction ServicesSection({ services }: { services: Service[] }) {\n  return (\n    <section id=\"services\" className=\"py-32 px-6 bg-richblack-800 relative z-10\">\n      <div className=\"container mx-auto\">\n        <motion.div\n          initial={{ opacity: 0, y: 50 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true, margin: \"-100px\" }}\n          transition={{ duration: 0.8 }}\n          className=\"text-center mb-20\"\n        >\n          <h2 className=\"font-display text-4xl md:text-5xl mb-4 text-white\">Our Services</h2>\n          <div className=\"w-24 h-1 bg-gold-500 mx-auto\" />\n        </motion.div>\n\n        <div className=\"grid md:grid-cols-3 gap-8\">\n          {services.length > 0 ? (\n            services.slice(0, 3).map((s, i) => (\n              <motion.div\n                key={s.id}\n                initial={{ opacity: 0, y: 50 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.5, delay: i * 0.2 }}\n                whileHover={{ y: -10, scale: 1.02 }}\n                className={`p-10 border rounded-2xl transition-all duration-500 group cursor-pointer border-white/10 bg-white/5 hover:border-gold-500/50 hover:bg-gold-500/5`}\n              >\n                <Scissors className=\"w-12 h-12 mb-8 text-gold-500/50 group-hover:text-gold-400 transition-colors duration-500\" />\n                <div className=\"flex justify-between items-baseline mb-4\">\n                  <h3 className=\"font-display text-2xl font-bold text-white group-hover:text-gold-500 transition-colors\">{s.name}</h3>\n                  <span className=\"text-gold-400 font-mono text-lg\">{s.price} GHS</span>\n                </div>\n                <p className=\"text-white/50 mb-8 leading-relaxed group-hover:text-white/80 transition-colors\">{s.description}</p>\n                <Link href=\"/book\" className=\"text-xs font-bold tracking-[0.2em] uppercase transition-colors text-white/40 group-hover:text-gold-500\">\n                  Book Now\n                </Link>\n              </motion.div>\n            ))\n          ) : (\n            <div className=\"col-span-3 text-center text-white/40\">\n              No services available at the moment.\n            </div>\n          )}\n        </div>\n\n        <div className=\"mt-16 text-center\">\n          <Link href=\"/book\" className=\"inline-flex items-center gap-2 text-gold-500 hover:text-white transition-colors font-bold tracking-widest border-b border-gold-500/30 pb-1 hover:border-white\">\n            VIEW FULL MENU <ArrowRight className=\"w-4 h-4\" />\n          </Link>\n        </div>\n      </div>\n    </section>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\review\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRouter' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":19,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"useRouter"},"fix":{"range":[283,327],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[722,725],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[722,725],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":37,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":62,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Star, CheckCircle, Search, AlertCircle, Loader2, ArrowRight } from 'lucide-react';\r\nimport { verifyBookingForReview, submitReviewAction } from '@/actions/review';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\n\r\nexport default function ReviewPage() {\r\n    const [step, setStep] = useState<'verify' | 'form' | 'success'>('verify');\r\n    const [reference, setReference] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    // Booking Data for context\r\n    const [bookingData, setBookingData] = useState<any>(null);\r\n\r\n    // Form Data\r\n    const [rating, setRating] = useState(0);\r\n    const [comment, setComment] = useState('');\r\n    const [hoveredRating, setHoveredRating] = useState(0);\r\n\r\n    const handleVerify = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            const result = await verifyBookingForReview(reference);\r\n            if (result.success && result.data) {\r\n                setBookingData(result.data);\r\n                setStep('form');\r\n            } else {\r\n                setError(result.error || 'Invalid booking reference.');\r\n            }\r\n        } catch (err) {\r\n            setError('Something went wrong. Please try again.');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        if (rating === 0) {\r\n            setError('Please select a rating.');\r\n            return;\r\n        }\r\n        setIsLoading(true);\r\n        try {\r\n            const result = await submitReviewAction(\r\n                bookingData.id,\r\n                bookingData.customer_name,\r\n                rating,\r\n                comment\r\n            );\r\n            if (result.success) {\r\n                setStep('success');\r\n            } else {\r\n                setError(result.error || 'Failed to submit review.');\r\n            }\r\n        } catch (err) {\r\n            setError('Failed to submit review.');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-richblack-900 flex items-center justify-center p-4\">\r\n            <div className=\"bg-noise absolute inset-0 opacity-20 pointer-events-none\" />\r\n\r\n            <div className=\"w-full max-w-md relative z-10\">\r\n                <AnimatePresence mode=\"wait\">\r\n\r\n                    {/* STEP 1: VERIFY */}\r\n                    {step === 'verify' && (\r\n                        <motion.div\r\n                            key=\"verify\"\r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: -20 }}\r\n                            className=\"bg-richblack-800 border border-white/10 rounded-2xl p-8 shadow-2xl\"\r\n                        >\r\n                            <div className=\"text-center mb-8\">\r\n                                <div className=\"w-16 h-16 bg-gold-500/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-gold-500/20\">\r\n                                    <Star className=\"w-8 h-8 text-gold-500\" />\r\n                                </div>\r\n                                <h1 className=\"text-2xl font-bold text-white mb-2\">Rate Your Experience</h1>\r\n                                <p className=\"text-white/60 text-sm\">Enter your booking reference code to verified your visit.</p>\r\n                            </div>\r\n\r\n                            <form onSubmit={handleVerify} className=\"space-y-6\">\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold uppercase tracking-wider text-white/40 mb-2\">Booking Reference</label>\r\n                                    <div className=\"relative\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={reference}\r\n                                            onChange={(e) => setReference(e.target.value.toUpperCase())}\r\n                                            placeholder=\"e.g. REF-123456\"\r\n                                            className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white placeholder:text-white/20 focus:border-gold-500/50 focus:outline-none text-center font-mono tracking-widest uppercase\"\r\n                                        />\r\n                                        <Search className=\"absolute right-4 top-3.5 w-5 h-5 text-white/20\" />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {error && (\r\n                                    <div className=\"flex items-center gap-2 text-red-400 text-sm bg-red-500/10 p-3 rounded-lg border border-red-500/20\">\r\n                                        <AlertCircle className=\"w-4 h-4\" />\r\n                                        {error}\r\n                                    </div>\r\n                                )}\r\n\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    disabled={isLoading || !reference}\r\n                                    className=\"w-full bg-gold-500 text-black font-bold py-3.5 rounded-xl hover:bg-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                                >\r\n                                    {isLoading ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : <>Verify Booking <ArrowRight className=\"w-4 h-4\" /></>}\r\n                                </button>\r\n                            </form>\r\n\r\n                            <div className=\"mt-6 text-center\">\r\n                                <Link href=\"/\" className=\"text-xs text-white/40 hover:text-white transition-colors\">\r\n                                    Back to Home\r\n                                </Link>\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {/* STEP 2: FORM */}\r\n                    {step === 'form' && (\r\n                        <motion.div\r\n                            key=\"form\"\r\n                            initial={{ opacity: 0, x: 20 }}\r\n                            animate={{ opacity: 1, x: 0 }}\r\n                            exit={{ opacity: 0, x: -20 }}\r\n                            className=\"bg-richblack-800 border border-white/10 rounded-2xl p-8 shadow-2xl\"\r\n                        >\r\n                            <div className=\"text-center mb-8\">\r\n                                <p className=\"text-gold-500 text-sm font-bold tracking-widest uppercase mb-1\">{bookingData.service_name}</p>\r\n                                <h2 className=\"text-2xl font-bold text-white mb-2\">Hi, {bookingData.customer_name}</h2>\r\n                                <p className=\"text-white/60 text-sm\">How was your haircut on {new Date(bookingData.booking_date).toLocaleDateString()}?</p>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-8\">\r\n                                {/* Star Rating */}\r\n                                <div className=\"flex justify-center gap-2\">\r\n                                    {[1, 2, 3, 4, 5].map((star) => (\r\n                                        <button\r\n                                            key={star}\r\n                                            type=\"button\"\r\n                                            onClick={() => setRating(star)}\r\n                                            onMouseEnter={() => setHoveredRating(star)}\r\n                                            onMouseLeave={() => setHoveredRating(0)}\r\n                                            className=\"transition-transform hover:scale-110 focus:outline-none\"\r\n                                        >\r\n                                            <Star\r\n                                                className={`w-10 h-10 ${star <= (hoveredRating || rating)\r\n                                                        ? 'fill-gold-500 text-gold-500'\r\n                                                        : 'fill-transparent text-white/20'\r\n                                                    } transition-colors duration-200`}\r\n                                            />\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                                <div className=\"text-center text-sm font-medium text-gold-500 h-5\">\r\n                                    {hoveredRating === 1 && \"Poor\"}\r\n                                    {hoveredRating === 2 && \"Fair\"}\r\n                                    {hoveredRating === 3 && \"Good\"}\r\n                                    {hoveredRating === 4 && \"Very Good\"}\r\n                                    {hoveredRating === 5 && \"Excellent!\"}\r\n                                </div>\r\n\r\n                                {/* Comment */}\r\n                                <div>\r\n                                    <textarea\r\n                                        value={comment}\r\n                                        onChange={(e) => setComment(e.target.value)}\r\n                                        placeholder=\"Tell us about your experience (optional)...\"\r\n                                        className=\"w-full bg-richblack-900 border border-white/10 rounded-xl p-4 text-white placeholder:text-white/20 focus:border-gold-500/50 focus:outline-none resize-none h-32\"\r\n                                    />\r\n                                </div>\r\n\r\n                                {error && (\r\n                                    <div className=\"text-red-400 text-sm text-center\">\r\n                                        {error}\r\n                                    </div>\r\n                                )}\r\n\r\n                                <div className=\"flex gap-3\">\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setStep('verify')}\r\n                                        className=\"flex-1 bg-white/5 text-white font-bold py-3.5 rounded-xl hover:bg-white/10 transition-colors\"\r\n                                    >\r\n                                        Cancel\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={handleSubmit}\r\n                                        disabled={isLoading || rating === 0}\r\n                                        className=\"flex-[2] bg-gold-500 text-black font-bold py-3.5 rounded-xl hover:bg-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                                    >\r\n                                        {isLoading ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : \"Submit Review\"}\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {/* STEP 3: SUCCESS */}\r\n                    {step === 'success' && (\r\n                        <motion.div\r\n                            key=\"success\"\r\n                            initial={{ opacity: 0, scale: 0.9 }}\r\n                            animate={{ opacity: 1, scale: 1 }}\r\n                            className=\"bg-richblack-800 border border-white/10 rounded-2xl p-12 shadow-2xl text-center\"\r\n                        >\r\n                            <div className=\"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-green-500/40\">\r\n                                <CheckCircle className=\"w-10 h-10 text-green-500\" />\r\n                            </div>\r\n                            <h2 className=\"text-3xl font-bold text-white mb-4\">Thank You!</h2>\r\n                            <p className=\"text-white/60 mb-8\">\r\n                                Your review has been submitted and is pending moderation.\r\n                                We appreciate your feedback!\r\n                            </p>\r\n                            <Link\r\n                                href=\"/\"\r\n                                className=\"inline-block px-8 py-3 bg-white/10 hover:bg-white/20 text-white font-bold rounded-xl transition-colors\"\r\n                            >\r\n                                Return Home\r\n                            </Link>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                </AnimatePresence>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\staff\\dashboard\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\staff\\dashboard\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":7,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":30,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TrendingUp"},"fix":{"range":[391,403],"text":""},"desc":"Remove unused variable \"TrendingUp\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DollarSign' is defined but never used.","line":7,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":49,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"DollarSign"},"fix":{"range":[410,422],"text":""},"desc":"Remove unused variable \"DollarSign\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2941,2944],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2941,2944],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":135,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":135,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5391,5394],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5391,5394],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":167,"column":115,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[7748,7764],"text":"Today&apos;s Earnings"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[7748,7764],"text":"Today&lsquo;s Earnings"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[7748,7764],"text":"Today&#39;s Earnings"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[7748,7764],"text":"Today&rsquo;s Earnings"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createClient } from '@/utils/supabase/server';\r\nimport { cookies } from 'next/headers';\r\nimport { AppointmentCard } from '@/components/staff/AppointmentCard';\r\nimport { DashboardHeader } from '@/components/staff/DashboardHeader';\r\nimport { TimeIndicator } from '@/components/staff/TimeIndicator';\r\nimport { StaffControls } from '@/components/staff/StaffControls';\r\nimport { Calendar, TrendingUp, Users, DollarSign, Clock, CheckCircle } from 'lucide-react';\r\n\r\ntype StaffDashboardAppointment = {\r\n    id: string;\r\n    client_name: string;\r\n    service_name: string;\r\n    appointment_time: string;\r\n    duration: number;\r\n    status: string;\r\n    client_phone: string;\r\n    total_amount: number;\r\n    barber_id: string;\r\n    appointment_date: string;\r\n    customer_notes: string | null;\r\n};\r\n\r\nexport default async function StaffDashboard({\r\n    searchParams,\r\n}: {\r\n    searchParams: Promise<{ date?: string }>;\r\n}) {\r\n    const cookieStore = await cookies();\r\n    const staffId = cookieStore.get('staff_session')?.value;\r\n    const supabase = await createClient();\r\n\r\n    const resolvedParams = await searchParams;\r\n    const selectedDate = resolvedParams.date || new Date().toISOString().split('T')[0];\r\n\r\n    // Fetch appointments\r\n    let appointments: StaffDashboardAppointment[] = [];\r\n    const stats = {\r\n        earnings: 0,\r\n        tips: 0,\r\n        count: 0,\r\n        completed: 0,\r\n        pending_earning: 0,\r\n        potential_total: 0\r\n    };\r\n\r\n    const { data: staff } = supabase\r\n        ? await supabase.from('staff').select('*').eq('id', staffId).single()\r\n        : { data: null };\r\n\r\n    if (!supabase || !staffId || !staff) {\r\n        // Redirect to login if no valid session\r\n        return (\r\n            <div className=\"min-h-screen bg-richblack-900 flex items-center justify-center\">\r\n                <div className=\"text-center\">\r\n                    <h2 className=\"text-2xl font-bold text-white mb-4\">Session Expired</h2>\r\n                    <p className=\"text-white/60 mb-6\">Please log in again</p>\r\n                    <a href=\"/staff\" className=\"px-6 py-3 bg-gold-500 text-black font-bold rounded-lg\">\r\n                        Back to Login\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Fetch real bookings for this staff member\r\n    try {\r\n        const { data, error } = await supabase\r\n            .from('bookings')\r\n            .select(`\r\n                *,\r\n                service:services(name, duration_minutes),\r\n                staff:staff(name)\r\n            `)\r\n            .eq('staff_id', staffId)\r\n            .eq('booking_date', selectedDate)\r\n            .order('booking_time', { ascending: true });\r\n\r\n        if (error) {\r\n            console.error(\"Error fetching bookings:\", error);\r\n        } else if (data) {\r\n            // Transform bookings to match appointment card format\r\n            appointments = data.map((booking: any): StaffDashboardAppointment => ({\r\n                id: booking.id,\r\n                client_name: booking.customer_name,\r\n                service_name: booking.service?.name || 'Service',\r\n                appointment_time: booking.booking_time,\r\n                duration: booking.service?.duration_minutes || 30,\r\n                status: booking.status,\r\n                client_phone: booking.customer_phone || 'N/A',\r\n                total_amount: booking.total_price,\r\n                barber_id: booking.staff_id,\r\n                appointment_date: booking.booking_date,\r\n                customer_notes: booking.customer_notes\r\n            }));\r\n        }\r\n    } catch (e) {\r\n        console.error(\"Error fetching dashboard data\", e);\r\n    }\r\n\r\n    // Calculate Extended Stats\r\n    stats.count = appointments.length;\r\n    stats.completed = appointments.filter(a => a.status === 'completed').length;\r\n\r\n    // Earnings Logic\r\n    stats.earnings = appointments\r\n        .filter(a => a.status === 'completed')\r\n        .reduce((acc, curr) => acc + (Number(curr.total_amount) || 0), 0);\r\n\r\n    stats.pending_earning = appointments\r\n        .filter(a => a.status === 'confirmed' || a.status === 'pending')\r\n        .reduce((acc, curr) => acc + (Number(curr.total_amount) || 0), 0);\r\n\r\n    stats.potential_total = stats.earnings + stats.pending_earning;\r\n\r\n    return (\r\n        <div className=\"max-w-7xl mx-auto pb-12 px-4 sm:px-6\">\r\n            <DashboardHeader earnings={stats.earnings} target={stats.potential_total > 0 ? stats.potential_total : 500} />\r\n\r\n            <div className=\"flex flex-col lg:flex-row gap-8\">\r\n                {/* Left Column: Schedule (60%) */}\r\n                <div className=\"w-full lg:w-[60%] space-y-6\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <h2 className=\"text-xl font-bold text-white flex items-center gap-2\">\r\n                            <Calendar className=\"w-5 h-5 text-gold-500\" />\r\n                            Schedule\r\n                        </h2>\r\n                        <span className=\"text-sm text-white/40\">{appointments.length} appointments</span>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-4 relative\">\r\n                        {/* Time Indicator Line */}\r\n                        <TimeIndicator />\r\n\r\n                        {appointments.length > 0 ? (\r\n                            appointments.map((apt: any) => (\r\n                                <AppointmentCard key={apt.id} appointment={apt} />\r\n                            ))\r\n                        ) : (\r\n                            <div className=\"text-center py-24 bg-richblack-800/30 rounded-2xl border border-white/5 border-dashed relative overflow-hidden group\">\r\n                                <div className=\"absolute inset-0 bg-gradient-to-b from-transparent to-black/20 pointer-events-none\" />\r\n                                <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 bg-gold-500/5 rounded-full blur-3xl group-hover:bg-gold-500/10 transition-colors duration-1000\" />\r\n\r\n                                <div className=\"relative z-10 w-20 h-20 bg-richblack-900 rounded-full flex items-center justify-center mx-auto mb-6 ring-4 ring-richblack-800 shadow-xl group-hover:scale-110 transition-transform duration-500\">\r\n                                    <Clock className=\"w-8 h-8 text-gold-500\" />\r\n                                </div>\r\n                                <h3 className=\"relative z-10 text-xl font-display font-medium text-white mb-2\">Detailed Schedule</h3>\r\n                                <p className=\"relative z-10 text-white/40 text-sm max-w-xs mx-auto leading-relaxed\">\r\n                                    No appointments scheduled for this date.<br />\r\n                                    Enjoy the downtime, Master Barber.\r\n                                </p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Right Column: Stats & Quick Actions (40%) */}\r\n                <div className=\"w-full lg:w-[40%] space-y-6\">\r\n\r\n                    {/* Controls */}\r\n                    <StaffControls staffName={staff?.name?.split(' ')[0] || 'Barber'} staffId={staff?.id || ''} />\r\n\r\n                    {/* Earnings Card */}\r\n                    <div className=\"bg-richblack-800 border border-gold-500/20 p-6 rounded-2xl relative overflow-hidden\">\r\n                        <div className=\"absolute top-0 right-0 w-32 h-32 bg-gold-500/5 rounded-full blur-2xl -mr-10 -mt-10\" />\r\n\r\n                        <div className=\"relative z-10\">\r\n                            <p className=\"text-sm uppercase tracking-widest text-gold-500/60 font-bold mb-1\">Today's Earnings</p>\r\n                            <h3 className=\"text-4xl font-display font-bold text-white mb-6\">\r\n                                GHS {stats.earnings.toFixed(2)}\r\n                            </h3>\r\n\r\n                            <div className=\"space-y-3 pt-4 border-t border-white/10\">\r\n                                <div className=\"flex justify-between items-center text-sm\">\r\n                                    <span className=\"text-white/50\">Completed</span>\r\n                                    <span className=\"text-white font-bold\">GHS {stats.earnings}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-center text-sm\">\r\n                                    <span className=\"text-white/50\">Pending</span>\r\n                                    <span className=\"text-white/40 font-mono\">+ GHS {stats.pending_earning}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-center text-sm pt-2 border-t border-white/5\">\r\n                                    <span className=\"text-gold-500 font-bold\">Potential Total</span>\r\n                                    <span className=\"text-gold-500 font-bold\">GHS {stats.potential_total}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Performance Stats */}\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"bg-richblack-800 border border-white/5 p-4 rounded-xl\">\r\n                            <div className=\"flex items-center gap-2 text-white/40 mb-2\">\r\n                                <Users className=\"w-4 h-4\" />\r\n                                <span className=\"text-xs uppercase tracking-wider\">Clients</span>\r\n                            </div>\r\n                            <p className=\"text-2xl font-bold text-white\">{stats.count}</p>\r\n                        </div>\r\n                        <div className=\"bg-richblack-800 border border-white/5 p-4 rounded-xl\">\r\n                            <div className=\"flex items-center gap-2 text-white/40 mb-2\">\r\n                                <CheckCircle className=\"w-4 h-4 text-green-400\" />\r\n                                <span className=\"text-xs uppercase tracking-wider\">Done</span>\r\n                            </div>\r\n                            <p className=\"text-2xl font-bold text-white\">{stats.completed}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Quick Guide */}\r\n                    <div className=\"bg-blue-900/10 border border-blue-500/20 p-5 rounded-xl\">\r\n                        <div className=\"flex items-start gap-3\">\r\n                            <Clock className=\"w-5 h-5 text-blue-400 mt-0.5\" />\r\n                            <div>\r\n                                <h4 className=\"text-blue-400 font-bold text-sm mb-1\">Status Guide</h4>\r\n                                <ul className=\"text-xs text-blue-200/60 space-y-1\">\r\n                                    <li>• Click card to view details & notes</li>\r\n                                    <li>• Mark completed to update earnings</li>\r\n                                    <li>• 5+ mins late = Orange badge</li>\r\n                                    <li>• 30+ mins late = Red warning</li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\staff\\login\\actions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[249,252],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[249,252],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server';\r\n\r\nimport { createClient } from '@/utils/supabase/server';\r\nimport { verifyPin } from '@/utils/auth';\r\nimport { cookies } from 'next/headers';\r\nimport { redirect } from 'next/navigation';\r\n\r\nexport async function loginStaff(prevState: any, formData: FormData) {\r\n    const phone = formData.get('phone') as string;\r\n    const pin = formData.get('pin') as string;\r\n\r\n    if (!phone || !pin) {\r\n        return { error: 'Please enter both phone number and PIN.' };\r\n    }\r\n\r\n    // 1. Optional Demo Mode (explicit opt-in only)\r\n    const demoEnabled = process.env.ENABLE_DEMO_STAFF_LOGIN === 'true';\r\n    if (demoEnabled && pin === '1234') {\r\n        const cookieStore = await cookies();\r\n        cookieStore.set('staff_session', 'demo-user', {\r\n            httpOnly: true,\r\n            secure: process.env.NODE_ENV === 'production',\r\n            sameSite: 'lax',\r\n            maxAge: 60 * 60 * 24,\r\n            path: '/',\r\n        });\r\n        redirect('/staff/dashboard');\r\n    }\r\n\r\n    const supabase = await createClient();\r\n\r\n    // If no supabase client and demo isn't enabled, fail closed\r\n    if (!supabase) {\r\n        return { error: 'System not configured.' };\r\n    }\r\n\r\n    try {\r\n        // 2. Fetch staff by phone\r\n        // Note: We use 'maybeSingle' to avoid throwing if not found, allowing us to return a generic error\r\n        const { data: staff, error } = await supabase\r\n            .from('staff')\r\n            .select('*')\r\n            .eq('phone', phone)\r\n            .eq('is_active', true)\r\n            .single();\r\n\r\n        if (error || !staff) {\r\n            console.error('Staff login error:', error);\r\n            return { error: 'Invalid credentials.' }; // Generic error for security\r\n        }\r\n\r\n        // 2. Verify PIN\r\n        const isValid = await verifyPin(pin, staff.pin_hash);\r\n\r\n        if (!isValid) {\r\n            return { error: 'Invalid credentials.' };\r\n        }\r\n\r\n        // 3. Create Session\r\n        // For simplicity in this Foundation phase, we'll store the staff ID in a secure cookie.\r\n        // In a full production app, you might use a JWT or a dedicated sessions table.\r\n        const cookieStore = await cookies();\r\n        cookieStore.set('staff_session', staff.id, {\r\n            httpOnly: true,\r\n            secure: process.env.NODE_ENV === 'production',\r\n            sameSite: 'lax',\r\n            maxAge: 60 * 60 * 24, // 24 hours\r\n            path: '/',\r\n        });\r\n\r\n        // 4. Redirect to Dashboard (Path to be implemented in Phase 3)\r\n        // For now, redirect to a temporary success page or the home page with a query param\r\n    } catch (err) {\r\n        console.error('Unexpected error during staff login:', err);\r\n        return { error: 'An unexpected error occurred.' };\r\n    }\r\n\r\n    redirect('/staff/dashboard');\r\n}\r\n\r\nexport async function logoutStaff() {\r\n    const cookieStore = await cookies();\r\n    cookieStore.delete('staff_session');\r\n    redirect('/staff/login');\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\staff\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\app\\success\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\booking\\BookingPolicies.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\booking\\BookingSummary.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'clsx' is defined but never used.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"clsx"},"fix":{"range":[227,251],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\nimport { useBookingStore } from \"@/store/booking\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Clock, Calendar, Scissors, Plus, User } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport clsx from \"clsx\";\n\nexport function BookingSummary() {\n    const { selectedService, selectedAddons, selectedStaff, selectedDate, selectedTime } = useBookingStore();\n\n    // Calculate totals\n    const serviceTotal = (selectedService?.price || 0) + selectedAddons.reduce((acc, curr) => acc + curr.price, 0);\n    const totalDuration = (selectedService?.duration_minutes || 0) + selectedAddons.reduce((acc, curr) => acc + curr.duration_minutes, 0);\n    const bookingFee = selectedService ? 20 : 0;\n    const finalTotal = serviceTotal + bookingFee;\n\n    // Don't show if no service selected\n    if (!selectedService) {\n        return null;\n    }\n\n    return (\n        <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"sticky top-8 bg-richblack-800/90 backdrop-blur-md border border-white/10 rounded-xl p-6 space-y-4 shadow-elevated\"\n            role=\"complementary\"\n            aria-label=\"Booking Summary\"\n        >\n            <div className=\"flex items-center justify-between pb-3 border-b border-white/10\">\n                <h3 className=\"font-display text-xl text-gold-500\">Your Booking</h3>\n                <Scissors className=\"w-5 h-5 text-gold-500/50\" />\n            </div>\n\n            {/* Service Details */}\n            <div className=\"space-y-3\">\n                <div className=\"flex justify-between items-start\">\n                    <div className=\"flex-1\">\n                        <p className=\"text-white font-semibold\">{selectedService.name}</p>\n                        <p className=\"text-white/40 text-xs flex items-center gap-1 mt-1\">\n                            <Clock className=\"w-3 h-3\" />\n                            {selectedService.duration_minutes} min\n                        </p>\n                    </div>\n                    <span className=\"text-gold-400 font-mono text-sm\">{selectedService.price} GHS</span>\n                </div>\n\n                {/* Add-ons */}\n                <AnimatePresence>\n                    {selectedAddons.map((addon) => (\n                        <motion.div\n                            key={addon.id}\n                            initial={{ opacity: 0, height: 0 }}\n                            animate={{ opacity: 1, height: \"auto\" }}\n                            exit={{ opacity: 0, height: 0 }}\n                            className=\"flex justify-between items-start text-sm\"\n                        >\n                            <div className=\"flex items-start gap-2 flex-1\">\n                                <Plus className=\"w-3 h-3 text-gold-500/50 mt-0.5 flex-shrink-0\" />\n                                <div>\n                                    <p className=\"text-white/80\">{addon.name}</p>\n                                    <p className=\"text-white/30 text-xs flex items-center gap-1\">\n                                        <Clock className=\"w-3 h-3\" />\n                                        {addon.duration_minutes} min\n                                    </p>\n                                </div>\n                            </div>\n                            <span className=\"text-gold-400/80 font-mono text-xs\">{addon.price} GHS</span>\n                        </motion.div>\n                    ))}\n                </AnimatePresence>\n            </div>\n\n            {/* Selected Staff */}\n            <AnimatePresence>\n                {selectedStaff && (\n                    <motion.div\n                        initial={{ opacity: 0, height: 0 }}\n                        animate={{ opacity: 1, height: \"auto\" }}\n                        exit={{ opacity: 0, height: 0 }}\n                        className=\"pt-3 border-t border-white/10\"\n                    >\n                        <div className=\"flex items-center gap-3 text-sm\">\n                            <User className=\"w-4 h-4 text-gold-500/70\" />\n                            <div className=\"flex-1\">\n                                <p className=\"text-white/90 font-medium\">{selectedStaff.name}</p>\n                            </div>\n                        </div>\n                    </motion.div>\n                )}\n            </AnimatePresence>\n\n            {/* Date & Time */}\n            <AnimatePresence>\n                {selectedDate && selectedTime && (\n                    <motion.div\n                        initial={{ opacity: 0, height: 0 }}\n                        animate={{ opacity: 1, height: \"auto\" }}\n                        exit={{ opacity: 0, height: 0 }}\n                        className=\"pt-3 border-t border-white/10\"\n                    >\n                        <div className=\"flex items-start gap-3 text-sm\">\n                            <Calendar className=\"w-4 h-4 text-gold-500/70 mt-0.5\" />\n                            <div className=\"flex-1\">\n                                <p className=\"text-white/90\">{format(selectedDate, 'EEEE, MMMM do')}</p>\n                                <p className=\"text-gold-400 font-mono text-xs mt-1\">{selectedTime}</p>\n                            </div>\n                        </div>\n                        <div className=\"flex items-center gap-2 text-xs text-white/40 mt-2\">\n                            <Clock className=\"w-3 h-3\" />\n                            <span>Total duration: {totalDuration} min</span>\n                        </div>\n                    </motion.div>\n                )}\n            </AnimatePresence>\n\n            {/* Price Breakdown */}\n            <div className=\"pt-3 border-t border-white/10 space-y-2\">\n                <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-white/60\">Subtotal</span>\n                    <span className=\"text-white font-mono\">{serviceTotal} GHS</span>\n                </div>\n                {bookingFee > 0 && (\n                    <div className=\"flex justify-between text-sm\">\n                        <span className=\"text-white/60\">Booking Fee</span>\n                        <span className=\"text-white font-mono\">{bookingFee} GHS</span>\n                    </div>\n                )}\n                <div className=\"flex justify-between items-baseline pt-2 border-t border-white/10\">\n                    <span className=\"text-white font-bold\">Total</span>\n                    <span className=\"font-display text-2xl font-bold text-gold-500\">{finalTotal} <span className=\"text-sm text-white/40\">GHS</span></span>\n                </div>\n            </div>\n\n            {/* Info Badge */}\n            <div className=\"text-xs text-center text-white/30 pt-2 border-t border-white/10\">\n                Secure payment with Paystack\n            </div>\n        </motion.div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\booking\\Step1Services.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ShieldCheck' is defined but never used.","line":6,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":44,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ShieldCheck"},"fix":{"range":[245,258],"text":""},"desc":"Remove unused variable \"ShieldCheck\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport { useBookingStore } from \"@/store/booking\";\r\nimport { getServices } from \"@/utils/supabase/queries\";\r\nimport type { Service } from \"@/types/database\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Scissors, Star, Check, ShieldCheck, Loader2 } from \"lucide-react\";\r\nimport clsx from \"clsx\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport function Step1Services() {\r\n    const { selectService, selectedService, setStep } = useBookingStore();\r\n    const [services, setServices] = useState<Service[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        async function fetchServices() {\r\n            try {\r\n                setLoading(true);\r\n                const data = await getServices();\r\n                setServices(data);\r\n                setError(null);\r\n            } catch (err) {\r\n                console.error('Error loading services:', err);\r\n                setError('Failed to load services. Please refresh the page.');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n\r\n        fetchServices();\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-[400px]\">\r\n                <div className=\"text-center\">\r\n                    <Loader2 className=\"w-12 h-12 text-gold-500 animate-spin mx-auto mb-4\" />\r\n                    <p className=\"text-white/60\">Loading services...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-[400px]\">\r\n                <div className=\"text-center\">\r\n                    <p className=\"text-red-400 mb-4\">{error}</p>\r\n                    <button\r\n                        onClick={() => window.location.reload()}\r\n                        className=\"bg-gold-500 text-richblack-900 px-6 py-2 rounded hover:bg-white transition-colors\"\r\n                    >\r\n                        Refresh Page\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-8 animate-fade-in\">\r\n            <h2 className=\"font-display text-3xl text-gold-500 mb-6\">Select Your Experience</h2>\r\n\r\n            <div className=\"grid md:grid-cols-2 gap-6\">\r\n                {services.map((service) => {\r\n                    const isSelected = selectedService?.id === service.id;\r\n                    const Icon = service.price > 50 ? Star : Scissors;\r\n\r\n                    return (\r\n                        <motion.button\r\n                            key={service.id}\r\n                            whileHover={{ scale: 1.02 }}\r\n                            whileTap={{ scale: 0.98 }}\r\n                            onClick={() => selectService(service)}\r\n                            aria-label={`Select ${service.name} for ${service.price} GHS`}\r\n                            aria-pressed={isSelected}\r\n                            className={clsx(\r\n                                \"relative p-6 text-left border rounded-xl transition-all duration-300 w-full group focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 focus:ring-offset-richblack-900 transition-shadow-smooth flex flex-col h-full\",\r\n                                isSelected\r\n                                    ? \"border-gold-500 bg-gold-900/20 shadow-elevated-gold\"\r\n                                    : \"border-white/10 bg-white/5 hover:border-gold-500/50 hover:bg-white/10 shadow-card hover:shadow-card-hover\"\r\n                            )}\r\n                        >\r\n                            <div className=\"flex justify-between items-start mb-4 w-full\">\r\n                                <div className={clsx(\"p-3 rounded-full\", isSelected ? \"bg-gold-500 text-richblack-900\" : \"bg-white/10 text-gold-400 group-hover:text-gold-300\")}>\r\n                                    <Icon className=\"w-6 h-6\" />\r\n                                </div>\r\n                                {/* Selection Indicator at Top Right */}\r\n                                <div className={clsx(\r\n                                    \"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors\",\r\n                                    isSelected ? \"border-gold-500 bg-gold-500\" : \"border-white/20\"\r\n                                )}>\r\n                                    {isSelected && <Check className=\"w-4 h-4 text-richblack-900\" />}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex-1\">\r\n                                <h3 className={clsx(\"font-display text-xl font-bold mb-2\", isSelected ? \"text-gold-500\" : \"text-white\")}>\r\n                                    {service.name}\r\n                                </h3>\r\n                                {service.description && (\r\n                                    <p className=\"text-white/50 text-sm mb-2\">{service.description}</p>\r\n                                )}\r\n                                <p className=\"text-white/50 text-sm\">{service.duration_minutes} minutes</p>\r\n                            </div>\r\n\r\n                            <div className=\"flex justify-end mt-4 w-full\">\r\n                                <span className=\"font-mono text-gold-400 text-lg\">{service.price} GHS</span>\r\n                            </div>\r\n                        </motion.button>\r\n                    )\r\n                })}\r\n            </div>\r\n\r\n            {/* Continue Button */}\r\n            {selectedService && (\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: 10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    className=\"pt-8 flex justify-end\"\r\n                >\r\n                    <button\r\n                        onClick={() => setStep(2)}\r\n                        className=\"bg-gold-500 text-richblack-900 px-8 py-3 font-bold rounded hover:bg-white transition-colors flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 focus:ring-offset-richblack-900\"\r\n                        aria-label=\"Continue to add-ons\"\r\n                    >\r\n                        Continue\r\n                        <Check className=\"w-4 h-4\" />\r\n                    </button>\r\n                </motion.div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\booking\\Step2And3.tsx","messages":[{"ruleId":"jsx-a11y/role-supports-aria-props","severity":1,"message":"The attribute aria-pressed is not supported by the role checkbox.","line":57,"column":25,"nodeType":"JSXOpeningElement","endLine":71,"endColumn":26},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":200,"column":37,"nodeType":"JSXOpeningElement","endLine":204,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":257,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":257,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12606,12609],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12606,12609],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":348,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":348,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18014,18017],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18014,18017],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Calendar from \"react-calendar\";\r\nimport { useBookingStore } from \"@/store/booking\";\r\nimport { getAddons, getStaff, getAvailableSlots, calculateBookingDuration } from \"@/utils/supabase/queries\";\r\nimport type { Addon, Staff } from \"@/types/database\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Plus, Check, ChevronRight, Loader2 } from \"lucide-react\";\r\nimport clsx from \"clsx\";\r\nimport { addDays, format, isSunday } from \"date-fns\";\r\nimport 'react-calendar/dist/Calendar.css';\r\n\r\nexport function Step2Addons() {\r\n    const { toggleAddon, selectedAddons, setStep } = useBookingStore();\r\n    const [addons, setAddons] = useState<Addon[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        async function fetchAddons() {\r\n            try {\r\n                const data = await getAddons();\r\n                setAddons(data);\r\n            } catch (error) {\r\n                console.error('Error loading add-ons:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n        fetchAddons();\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-[300px]\">\r\n                <Loader2 className=\"w-8 h-8 text-gold-500 animate-spin\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-8 animate-fade-in\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h2 className=\"font-display text-3xl text-gold-500\">Enhance Your Cut</h2>\r\n                <button\r\n                    onClick={() => setStep(3)}\r\n                    className=\"text-sm text-white/50 hover:text-white underline underline-offset-4 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 focus:ring-offset-richblack-900 rounded px-2 py-1\"\r\n                    aria-label=\"Skip add-ons and continue to date and time selection\"\r\n                >\r\n                    Skip Add-ons\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"grid md:grid-cols-2 gap-4\">\r\n                {addons.map((addon) => {\r\n                    const isSelected = selectedAddons.some(a => a.id === addon.id);\r\n                    return (\r\n                        <motion.button\r\n                            key={addon.id}\r\n                            whileTap={{ scale: 0.98 }}\r\n                            onClick={() => toggleAddon(addon)}\r\n                            className={clsx(\r\n                                \"flex items-center justify-between p-4 border rounded-lg transition-all focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 focus:ring-offset-richblack-900\",\r\n                                isSelected\r\n                                    ? \"border-gold-500 bg-gold-900/10\"\r\n                                    : \"border-white/10 hover:border-white/30\"\r\n                            )}\r\n                            aria-label={`${isSelected ? 'Remove' : 'Add'} ${addon.name} for ${addon.price} GHS`}\r\n                            aria-pressed={isSelected}\r\n                            role=\"checkbox\"\r\n                            aria-checked={isSelected}\r\n                        >\r\n                            <div className=\"text-left\">\r\n                                <h3 className=\"text-white font-bold\">{addon.name}</h3>\r\n                                <p className=\"text-gold-400 text-sm\">{addon.price} GHS • {addon.duration_minutes} min</p>\r\n                                {addon.description && (\r\n                                    <p className=\"text-white/40 text-xs mt-1\">{addon.description}</p>\r\n                                )}\r\n                            </div>\r\n                            <div className={clsx(\"w-6 h-6 rounded border flex items-center justify-center\", isSelected ? \"bg-gold-500 border-gold-500\" : \"border-white/30\")}>\r\n                                {isSelected ? <Check className=\"w-4 h-4 text-black\" /> : <Plus className=\"w-4 h-4 text-white/50\" />}\r\n                            </div>\r\n                        </motion.button>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            <div className=\"pt-8 flex justify-end\">\r\n                <button\r\n                    onClick={() => setStep(3)}\r\n                    className=\"bg-gold-500 text-richblack-900 px-8 py-3 font-bold rounded hover:bg-white transition-colors flex items-center focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 focus:ring-offset-richblack-900\"\r\n                    aria-label=\"Continue to date and time selection\"\r\n                >\r\n                    Continue <ChevronRight className=\"w-4 h-4 ml-2\" />\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function Step3DateTime() {\r\n    const { selectedDate, setDate, selectedTime, setTime, selectedStaff, selectStaff, selectedService, selectedAddons, setStep } = useBookingStore();\r\n    const [staff, setStaff] = useState<Staff[]>([]);\r\n    const [availableSlots, setAvailableSlots] = useState<string[]>([]);\r\n    const [isLoadingStaff, setIsLoadingStaff] = useState(true);\r\n    const [isLoadingSlots, setIsLoadingSlots] = useState(false);\r\n\r\n    // Fetch staff on mount\r\n    useEffect(() => {\r\n        async function fetchStaff() {\r\n            try {\r\n                const data = await getStaff();\r\n                setStaff(data);\r\n            } catch (error) {\r\n                console.error('Error loading staff:', error);\r\n            } finally {\r\n                setIsLoadingStaff(false);\r\n            }\r\n        }\r\n        fetchStaff();\r\n    }, []);\r\n\r\n    // Fetch available slots when staff or date changes\r\n    useEffect(() => {\r\n        async function fetchAvailability() {\r\n            if (!selectedStaff || !selectedDate || !selectedService) {\r\n                setAvailableSlots([]);\r\n                return;\r\n            }\r\n\r\n            setIsLoadingSlots(true);\r\n            try {\r\n                // Calculate total duration including add-ons\r\n                const addonIds = selectedAddons.map(a => a.id);\r\n                const totalDuration = await calculateBookingDuration(selectedService.id, addonIds);\r\n\r\n                // Get available slots\r\n                const dateStr = format(selectedDate, 'yyyy-MM-dd');\r\n                const slots = await getAvailableSlots(selectedStaff.id, dateStr, totalDuration);\r\n                setAvailableSlots(slots);\r\n            } catch (error) {\r\n                console.error('Error fetching availability:', error);\r\n                setAvailableSlots([]);\r\n            } finally {\r\n                setIsLoadingSlots(false);\r\n            }\r\n        }\r\n\r\n        fetchAvailability();\r\n    }, [selectedStaff, selectedDate, selectedService, selectedAddons]);\r\n\r\n    if (isLoadingStaff) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-[400px]\">\r\n                <Loader2 className=\"w-12 h-12 text-gold-500 animate-spin\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-8 animate-fade-in\">\r\n            <h2 className=\"font-display text-3xl text-gold-500 mb-6\">Choose Your Barber</h2>\r\n\r\n            {/* Staff Selection */}\r\n            <div className=\"grid md:grid-cols-3 gap-4\" role=\"group\" aria-label=\"Select a barber\">\r\n                {staff.map((barber) => {\r\n                    const isSelected = selectedStaff?.id === barber.id;\r\n                    const initials = barber.name.split(' ').map(n => n[0]).join('').toUpperCase();\r\n\r\n                    return (\r\n                        <motion.button\r\n                            key={barber.id}\r\n                            whileTap={{ scale: 0.98 }}\r\n                            onClick={() => selectStaff(barber)}\r\n                            className={clsx(\r\n                                \"relative p-5 border rounded-xl transition-all text-left group focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 focus:ring-offset-richblack-900\",\r\n                                isSelected\r\n                                    ? \"border-gold-500 bg-gold-900/20 shadow-lg shadow-gold-500/10\"\r\n                                    : \"border-white/10 hover:border-white/30 bg-white/5\"\r\n                            )}\r\n                            aria-label={`Select ${barber.name}`}\r\n                            aria-pressed={isSelected}\r\n                        >\r\n                            {/* Selected Badge */}\r\n                            {isSelected && (\r\n                                <motion.div\r\n                                    initial={{ scale: 0 }}\r\n                                    animate={{ scale: 1 }}\r\n                                    className=\"absolute top-3 right-3 w-6 h-6 rounded-full bg-gold-500 flex items-center justify-center\"\r\n                                >\r\n                                    <Check className=\"w-4 h-4 text-richblack-900\" />\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {/* Barber Avatar */}\r\n                            {barber.avatar_url ? (\r\n                                <div className={clsx(\r\n                                    \"w-14 h-14 rounded-full overflow-hidden mb-3 transition-colors border-2\",\r\n                                    isSelected ? \"border-gold-500\" : \"border-transparent\"\r\n                                )}>\r\n                                    <img\r\n                                        src={barber.avatar_url}\r\n                                        alt={barber.name}\r\n                                        className=\"w-full h-full object-cover\"\r\n                                    />\r\n                                </div>\r\n                            ) : (\r\n                                <div className={clsx(\r\n                                    \"w-14 h-14 rounded-full flex items-center justify-center font-display text-xl font-bold mb-3 transition-colors\",\r\n                                    isSelected\r\n                                        ? \"bg-gradient-to-br from-gold-400 to-gold-600 text-richblack-900\"\r\n                                        : \"bg-white/10 text-white/60 group-hover:bg-white/20\"\r\n                                )}>\r\n                                    {initials}\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Info */}\r\n                            <h3 className={clsx(\r\n                                \"font-bold text-lg transition-colors\",\r\n                                isSelected ? \"text-gold-400\" : \"text-white\"\r\n                            )}>\r\n                                {barber.name}\r\n                            </h3>\r\n                            {barber.bio && (\r\n                                <p className=\"text-white/50 text-sm mt-1\">{barber.bio}</p>\r\n                            )}\r\n                            {barber.specialties && barber.specialties.length > 0 && (\r\n                                <p className=\"text-gold-500/70 text-xs mt-2\">{barber.specialties[0]}</p>\r\n                            )}\r\n                        </motion.button>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Date & Time Selection - Only show if staff selected */}\r\n            {selectedStaff && (\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    className=\"pt-6 border-t border-white/10\"\r\n                >\r\n                    <h3 className=\"font-display text-xl text-white mb-4\">Select Date & Time</h3>\r\n\r\n                    {/* Quick Date Selectors */}\r\n                    <div className=\"flex flex-wrap gap-3 mb-6\">\r\n                        {[\r\n                            { label: \"Today\", days: 0 },\r\n                            { label: \"Tomorrow\", days: 1 },\r\n                            { label: \"This Weekend\", days: (7 - new Date().getDay()) % 7 || 7 }\r\n                        ].map((quick) => (\r\n                            <button\r\n                                key={quick.label}\r\n                                onClick={() => {\r\n                                    const date = addDays(new Date(), quick.days);\r\n                                    if (!isSunday(date)) {\r\n                                        setDate(date);\r\n                                        setTime(null as any);\r\n                                    }\r\n                                }}\r\n                                className=\"px-4 py-2 bg-white/5 border border-white/10 rounded-lg hover:border-gold-500/50 hover:bg-gold-500/10 transition-all text-sm font-medium focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 focus:ring-offset-richblack-900\"\r\n                            >\r\n                                {quick.label}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col lg:flex-row gap-8\">\r\n                        {/* Calendar */}\r\n                        <div className=\"flex-1\" role=\"region\" aria-label=\"Date selection calendar\">\r\n                            <style jsx global>{`\r\n                                .react-calendar {\r\n                                    background: transparent;\r\n                                    border: none;\r\n                                    font-family: var(--font-outfit);\r\n                                    width: 100%;\r\n                                    padding: 1rem;\r\n                                }\r\n                                .react-calendar__tile {\r\n                                    color: #fff;\r\n                                    padding: 1.2em 0.5em;\r\n                                    border-radius: 8px;\r\n                                    transition: all 0.2s ease;\r\n                                    position: relative;\r\n                                }\r\n                                .react-calendar__tile:enabled:hover,\r\n                                .react-calendar__tile:enabled:focus {\r\n                                    background-color: rgba(255,255,255,0.1);\r\n                                    border-radius: 8px;\r\n                                    transform: scale(1.05);\r\n                                    box-shadow: 0 4px 8px rgba(0,0,0,0.2);\r\n                                }\r\n                                .react-calendar__tile--active {\r\n                                    background: linear-gradient(135deg, #C9AB23 0%, #D4BC50 100%) !important;\r\n                                    color: #0A0A0A !important;\r\n                                    border-radius: 8px;\r\n                                    font-weight: 700;\r\n                                    box-shadow: 0 4px 12px rgba(201,171,35,0.3) !important;\r\n                                }\r\n                                .react-calendar__tile--now {\r\n                                    background: rgba(201,171,35,0.15);\r\n                                    border-radius: 8px;\r\n                                    border: 1px solid rgba(201,171,35,0.3);\r\n                                }\r\n                                .react-calendar__tile--now:enabled:hover {\r\n                                    background: rgba(201,171,35,0.25);\r\n                                }\r\n                                .react-calendar__navigation {\r\n                                    margin-bottom: 1rem;\r\n                                }\r\n                                .react-calendar__navigation button {\r\n                                    color: #C9AB23;\r\n                                    font-size: 1.2em;\r\n                                    font-weight: 600;\r\n                                    min-height: 44px;\r\n                                    border-radius: 8px;\r\n                                    transition: all 0.2s ease;\r\n                                }\r\n                                .react-calendar__navigation button:enabled:hover,\r\n                                .react-calendar__navigation button:enabled:focus {\r\n                                    background-color: rgba(201,171,35,0.1);\r\n                                }\r\n                                .react-calendar__navigation button:disabled {\r\n                                    opacity: 0.3;\r\n                                }\r\n                                .react-calendar__month-view__days__day--weekend {\r\n                                    color: rgba(255,255,255,0.5);\r\n                                }\r\n                                .react-calendar__month-view__days__day--neighboringMonth {\r\n                                    color: rgba(255,255,255,0.2);\r\n                                }\r\n                                .react-calendar__tile:disabled {\r\n                                    background: rgba(255,255,255,0.02);\r\n                                    color: rgba(255,255,255,0.2);\r\n                                    text-decoration: line-through;\r\n                                }\r\n                                .react-calendar__month-view__weekdays {\r\n                                    text-transform: uppercase;\r\n                                    font-size: 0.75rem;\r\n                                    font-weight: 600;\r\n                                    color: #C9AB23;\r\n                                    letter-spacing: 0.1em;\r\n                                }\r\n                            `}</style>\r\n                            <Calendar\r\n                                onChange={(val) => {\r\n                                    if (val instanceof Date) {\r\n                                        setDate(val);\r\n                                        setTime(null as any); // Reset time when date changes\r\n                                    }\r\n                                }}\r\n                                value={selectedDate}\r\n                                minDate={new Date()}\r\n                                maxDate={addDays(new Date(), 30)}\r\n                                tileDisabled={({ date }) => isSunday(date)} // Closed on Sundays\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Time Slots */}\r\n                        <div className=\"flex-1 lg:max-w-xs\">\r\n                            <h4 className=\"text-white mb-4 font-bold border-b border-white/10 pb-2\">\r\n                                {selectedDate ? (\r\n                                    <>\r\n                                        <span className=\"text-gold-400\">{selectedStaff.name}</span>\r\n                                        <span className=\"text-white/40 mx-2\">•</span>\r\n                                        {format(selectedDate, 'MMM do')}\r\n                                    </>\r\n                                ) : (\r\n                                    'Select a date'\r\n                                )}\r\n                            </h4>\r\n\r\n                            {selectedDate ? (\r\n                                <>\r\n                                    {isLoadingSlots ? (\r\n                                        <div className=\"flex items-center justify-center py-8\">\r\n                                            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gold-500\"></div>\r\n                                            <span className=\"ml-3 text-white/60 text-sm\">Loading availability...</span>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <>\r\n                                            <p className=\"text-white/40 text-xs mb-3\">\r\n                                                {availableSlots.length} slots available\r\n                                            </p>\r\n                                            {availableSlots.length === 0 ? (\r\n                                                <div className=\"text-center py-8 text-white/40 text-sm\">\r\n                                                    No available slots for this date. Please select another date.\r\n                                                </div>\r\n                                            ) : (\r\n                                                <div className=\"grid grid-cols-3 gap-2 max-h-[300px] overflow-y-auto no-scrollbar pr-2\" role=\"group\" aria-label=\"Available time slots\">\r\n                                                    {availableSlots.map(time => (\r\n                                                        <button\r\n                                                            key={time}\r\n                                                            onClick={() => setTime(time)}\r\n                                                            className={clsx(\r\n                                                                \"py-2 text-sm rounded border transition-colors focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 focus:ring-offset-richblack-900\",\r\n                                                                selectedTime === time\r\n                                                                    ? \"bg-gold-500 text-richblack-900 border-gold-500 font-bold\"\r\n                                                                    : \"border-white/10 text-white hover:border-gold-500/50\"\r\n                                                            )}\r\n                                                            aria-label={`Select ${time} time slot`}\r\n                                                            aria-pressed={selectedTime === time}\r\n                                                        >\r\n                                                            {time}\r\n                                                        </button>\r\n                                                    ))}\r\n                                                </div>\r\n                                            )}\r\n                                        </>\r\n                                    )}\r\n                                </>\r\n                            ) : (\r\n                                <div className=\"text-white/30 text-sm italic\">Please select a date from the calendar to view available slots.</div>\r\n                            )}\r\n\r\n                            {/* Summary & Continue */}\r\n                            {selectedDate && selectedTime && (\r\n                                <motion.button\r\n                                    initial={{ opacity: 0, y: 10 }}\r\n                                    animate={{ opacity: 1, y: 0 }}\r\n                                    onClick={() => setStep(4)}\r\n                                    className=\"w-full mt-8 bg-gold-500 text-richblack-900 py-3 font-bold rounded hover:bg-white transition-colors focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 focus:ring-offset-richblack-900\"\r\n                                    aria-label={`Confirm appointment with ${selectedStaff.name} at ${selectedTime} and continue to payment`}\r\n                                >\r\n                                    Confirm {selectedTime}\r\n                                </motion.button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </motion.div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\booking\\Step4Payment.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":14,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React, { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useBookingStore } from \"@/store/booking\";\r\nimport { motion } from \"framer-motion\";\r\nimport { format } from \"date-fns\";\r\nimport clsx from \"clsx\";\r\nimport { CreditCard, Lock, Smartphone, User, AlertCircle, Mail, MessageSquare } from \"lucide-react\";\r\nimport { LoadingSpinner } from \"@/components/ui/LoadingSpinner\";\r\nimport { BookingPolicies } from \"@/components/booking/BookingPolicies\";\r\nimport { initializePayment } from '@/utils/paystack';\r\n\r\nexport function Step4Payment() {\r\n    const router = useRouter();\r\n    const { selectedService, selectedAddons, selectedStaff, selectedDate, selectedTime, clientDetails, setClientDetails, customerNotes, setCustomerNotes, policiesAccepted, setPoliciesAccepted } = useBookingStore();\r\n    const [isPaying, setIsPaying] = useState(false);\r\n    const [errors, setErrors] = useState<{ name?: string; phone?: string; email?: string }>({});\r\n    const [touched, setTouched] = useState<{ name: boolean; phone: boolean; email: boolean }>({ name: false, phone: false, email: false });\r\n\r\n    // Calculations\r\n    const serviceTotal = (selectedService?.price || 0) + selectedAddons.reduce((acc, curr) => acc + curr.price, 0);\r\n    const bookingFee = 20;\r\n    const finalTotal = serviceTotal + bookingFee;\r\n\r\n    const validateName = (name: string) => {\r\n        if (!name.trim()) return \"Name is required\";\r\n        if (name.trim().length < 2) return \"Name must be at least 2 characters\";\r\n        return undefined;\r\n    };\r\n\r\n    const validatePhone = (phone?: string) => {\r\n        // Phone is optional - only validate if provided\r\n        if (!phone || !phone.trim()) return undefined;\r\n        // Basic Ghana phone format validation\r\n        const phoneRegex = /^(\\+233|0)[2-9]\\d{8}$/;\r\n        if (!phoneRegex.test(phone.replace(/\\s/g, ''))) {\r\n            return \"Please enter a valid Ghana phone number\";\r\n        }\r\n        return undefined;\r\n    };\r\n\r\n    const handleNameChange = (name: string) => {\r\n        setClientDetails({ name });\r\n        if (touched.name) {\r\n            const error = validateName(name);\r\n            setErrors(prev => ({ ...prev, name: error }));\r\n        }\r\n    };\r\n\r\n    const validateEmail = (email: string) => {\r\n        if (!email?.trim()) return \"Email is required for receipt\";\r\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n        if (!emailRegex.test(email)) return \"Please enter a valid email\";\r\n        return undefined;\r\n    };\r\n\r\n    const handleEmailChange = (email: string) => {\r\n        setClientDetails({ email });\r\n        if (touched.email) {\r\n            const error = validateEmail(email);\r\n            setErrors(prev => ({ ...prev, email: error }));\r\n        }\r\n    };\r\n\r\n    const handlePhoneChange = (phone: string) => {\r\n        setClientDetails({ phone });\r\n        if (touched.phone) {\r\n            const error = validatePhone(phone);\r\n            setErrors(prev => ({ ...prev, phone: error }));\r\n        }\r\n    };\r\n\r\n    const handlePay = async () => {\r\n        // Validate required fields (name and email)\r\n        const nameError = validateName(clientDetails.name);\r\n        const phoneError = validatePhone(clientDetails.phone);\r\n        const emailError = validateEmail(clientDetails.email);\r\n\r\n        setErrors({ name: nameError, phone: phoneError, email: emailError });\r\n        setTouched({ name: true, phone: true, email: true });\r\n\r\n        if (nameError || phoneError || emailError) return;\r\n\r\n        setIsPaying(true);\r\n\r\n        try {\r\n            const reference = `BBOOK-${Date.now()}-${Math.floor(Math.random() * 1000)}`;\r\n\r\n            // Build callback URL for Paystack to redirect after payment\r\n            const callbackUrl = `${window.location.origin}/success?reference=${reference}`;\r\n\r\n            // Calculate addons total for metadata\r\n            const addonsTotal = selectedAddons.reduce((acc, curr) => acc + curr.price, 0);\r\n\r\n            const result = await initializePayment({\r\n                email: clientDetails.email,\r\n                amountGHS: finalTotal,\r\n                reference,\r\n                callbackUrl,\r\n                metadata: {\r\n                    customerName: clientDetails.name,\r\n                    customerEmail: clientDetails.email,\r\n                    customerPhone: clientDetails.phone || null,\r\n                    preferEmailOnly: clientDetails.preferEmailOnly || false,\r\n                    reminderPreference: clientDetails.reminderPreference || 'email_sms',\r\n                    customerNotes: customerNotes || null,\r\n                    serviceId: selectedService?.id,\r\n                    serviceName: selectedService?.name,\r\n                    servicePrice: selectedService?.price || 0,\r\n                    addonIds: selectedAddons.map(a => a.id),\r\n                    addonNames: selectedAddons.map(a => a.name).join(', '),\r\n                    addonsPrice: addonsTotal,\r\n                    staffId: selectedStaff?.id,\r\n                    staffName: selectedStaff?.name,\r\n                    bookingDate: selectedDate ? format(selectedDate, 'yyyy-MM-dd') : undefined,\r\n                    bookingTime: selectedTime\r\n                }\r\n            });\r\n\r\n            if (!result) {\r\n                console.error(\"Payment initialization returned empty result\");\r\n                setIsPaying(false);\r\n                return;\r\n            }\r\n\r\n            if (result.status && result.data?.authorization_url) {\r\n                // Redirect to Paystack\r\n                window.location.href = result.data.authorization_url;\r\n            } else {\r\n                console.error(\"Payment init failed:\", result);\r\n                console.error(\"Status:\", result.status, \"Message:\", result.message);\r\n                setIsPaying(false);\r\n                // Optionally show error toast\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error(\"Payment error:\", error);\r\n            setIsPaying(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8 animate-fade-in\">\r\n            <h2 className=\"font-display text-3xl text-gold-500 mb-6\">Confirm & Pay</h2>\r\n\r\n            <div className=\"flex flex-col lg:flex-row gap-8\">\r\n                {/* Contact Form */}\r\n                <div className=\"flex-1 space-y-6\">\r\n                    <div className=\"bg-white/5 border border-white/10 p-6 rounded-xl\">\r\n                        <h3 className=\"text-xl font-bold text-white mb-4 flex items-center gap-2\"><User className=\"w-5 h-5 text-gold-500\" /> Your Details</h3>\r\n                        <form className=\"space-y-4\" onSubmit={(e) => { e.preventDefault(); handlePay(); }}>\r\n                            <div>\r\n                                <label htmlFor=\"fullName\" className=\"block text-white/50 text-sm mb-1\">Full Name</label>\r\n                                <input\r\n                                    id=\"fullName\"\r\n                                    type=\"text\"\r\n                                    value={clientDetails.name}\r\n                                    onChange={(e) => handleNameChange(e.target.value)}\r\n                                    onBlur={() => {\r\n                                        setTouched(prev => ({ ...prev, name: true }));\r\n                                        const error = validateName(clientDetails.name);\r\n                                        setErrors(prev => ({ ...prev, name: error }));\r\n                                    }}\r\n                                    className={clsx(\r\n                                        \"w-full bg-richblack-900 border rounded p-3 text-white focus:ring-2 focus:ring-gold-500/20 outline-none transition-colors\",\r\n                                        errors.name && touched.name\r\n                                            ? \"border-red-500 focus:border-red-500\"\r\n                                            : \"border-white/10 focus:border-gold-500\"\r\n                                    )}\r\n                                    placeholder=\"e.g. Kwame Mensah\"\r\n                                    required\r\n                                    aria-required=\"true\"\r\n                                    aria-invalid={!!errors.name && touched.name}\r\n                                    aria-describedby={errors.name && touched.name ? \"name-error\" : undefined}\r\n                                />\r\n                                {errors.name && touched.name && (\r\n                                    <motion.div\r\n                                        initial={{ opacity: 0, height: 0 }}\r\n                                        animate={{ opacity: 1, height: \"auto\" }}\r\n                                        className=\"flex items-center gap-1 text-red-400 text-xs mt-1\"\r\n                                        id=\"name-error\"\r\n                                        role=\"alert\"\r\n                                    >\r\n                                        <AlertCircle className=\"w-3 h-3\" />\r\n                                        <span>{errors.name}</span>\r\n                                    </motion.div>\r\n                                )}\r\n                            </div>\r\n                            <div>\r\n                                <label htmlFor=\"phoneNumber\" className=\"block text-white/50 text-sm mb-1\">\r\n                                    Phone Number <span className=\"text-white/30 text-xs\">(Optional)</span>\r\n                                </label>\r\n                                <div className=\"relative\">\r\n                                    <Smartphone className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/30\" aria-hidden=\"true\" />\r\n                                    <input\r\n                                        id=\"phoneNumber\"\r\n                                        type=\"tel\"\r\n                                        value={clientDetails.phone || ''}\r\n                                        onChange={(e) => handlePhoneChange(e.target.value)}\r\n                                        onBlur={() => {\r\n                                            setTouched(prev => ({ ...prev, phone: true }));\r\n                                            const error = validatePhone(clientDetails.phone);\r\n                                            setErrors(prev => ({ ...prev, phone: error }));\r\n                                        }}\r\n                                        className={clsx(\r\n                                            \"w-full bg-richblack-900 border rounded p-3 pl-10 text-white focus:ring-2 focus:ring-gold-500/20 outline-none transition-colors\",\r\n                                            errors.phone && touched.phone\r\n                                                ? \"border-red-500 focus:border-red-500\"\r\n                                                : \"border-white/10 focus:border-gold-500\"\r\n                                        )}\r\n                                        placeholder=\"+233 XX XXX XXXX\"\r\n                                        aria-invalid={!!errors.phone && touched.phone}\r\n                                        aria-describedby={errors.phone && touched.phone ? \"phone-error\" : \"phone-helper\"}\r\n                                    />\r\n                                </div>\r\n                                {errors.phone && touched.phone ? (\r\n                                    <motion.div\r\n                                        initial={{ opacity: 0, height: 0 }}\r\n                                        animate={{ opacity: 1, height: \"auto\" }}\r\n                                        className=\"flex items-center gap-1 text-red-400 text-xs mt-1\"\r\n                                        id=\"phone-error\"\r\n                                        role=\"alert\"\r\n                                    >\r\n                                        <AlertCircle className=\"w-3 h-3\" />\r\n                                        <span>{errors.phone}</span>\r\n                                    </motion.div>\r\n                                ) : (\r\n                                    <p className=\"text-white/30 text-xs mt-1\" id=\"phone-helper\">\r\n                                        For SMS reminders (optional). We respect your privacy.\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n                            <div>\r\n                                <label htmlFor=\"email\" className=\"block text-white/50 text-sm mb-1\">Email Address</label>\r\n                                <div className=\"relative\">\r\n                                    <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/30\" aria-hidden=\"true\" />\r\n                                    <input\r\n                                        id=\"email\"\r\n                                        type=\"email\"\r\n                                        value={clientDetails.email}\r\n                                        onChange={(e) => handleEmailChange(e.target.value)}\r\n                                        onBlur={() => {\r\n                                            setTouched(prev => ({ ...prev, email: true }));\r\n                                            const error = validateEmail(clientDetails.email || '');\r\n                                            setErrors(prev => ({ ...prev, email: error }));\r\n                                        }}\r\n                                        className={clsx(\r\n                                            \"w-full bg-richblack-900 border rounded p-3 pl-10 text-white focus:ring-2 focus:ring-gold-500/20 outline-none transition-colors\",\r\n                                            errors.email && touched.email\r\n                                                ? \"border-red-500 focus:border-red-500\"\r\n                                                : \"border-white/10 focus:border-gold-500\"\r\n                                        )}\r\n                                        placeholder=\"you@example.com\"\r\n                                        required\r\n                                        aria-required=\"true\"\r\n                                        aria-invalid={!!errors.email && touched.email}\r\n                                        aria-describedby={errors.email && touched.email ? \"email-error\" : undefined}\r\n                                    />\r\n                                </div>\r\n                                {errors.email && touched.email && (\r\n                                    <motion.div\r\n                                        initial={{ opacity: 0, height: 0 }}\r\n                                        animate={{ opacity: 1, height: \"auto\" }}\r\n                                        className=\"flex items-center gap-1 text-red-400 text-xs mt-1\"\r\n                                        id=\"email-error\"\r\n                                        role=\"alert\"\r\n                                    >\r\n                                        <AlertCircle className=\"w-3 h-3\" />\r\n                                        <span>{errors.email}</span>\r\n                                    </motion.div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Privacy Preferences */}\r\n                            <div className=\"space-y-3 pt-2 border-t border-white/5\">\r\n                                <h4 className=\"text-white/70 text-sm font-medium\">Privacy Preferences</h4>\r\n\r\n                                {/* Email Only Preference */}\r\n                                <label className=\"flex items-start gap-3 cursor-pointer group\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        checked={clientDetails.preferEmailOnly || false}\r\n                                        onChange={(e) => setClientDetails({ preferEmailOnly: e.target.checked })}\r\n                                        className=\"mt-0.5 w-4 h-4 rounded border-2 border-white/20 text-gold-500 focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 focus:ring-offset-richblack-900 cursor-pointer bg-richblack-900\"\r\n                                    />\r\n                                    <span className=\"text-xs text-white/60 group-hover:text-white/80 transition-colors select-none\">\r\n                                        Prefer email-only contact (VIP privacy mode)\r\n                                    </span>\r\n                                </label>\r\n\r\n                                {/* Reminder Preference */}\r\n                                {!clientDetails.preferEmailOnly && clientDetails.phone && (\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-white/50 text-xs\">Reminder Preference</label>\r\n                                        <div className=\"flex gap-4\">\r\n                                            <label className=\"flex items-center gap-2 cursor-pointer group\">\r\n                                                <input\r\n                                                    type=\"radio\"\r\n                                                    name=\"reminderPreference\"\r\n                                                    value=\"email_sms\"\r\n                                                    checked={clientDetails.reminderPreference === 'email_sms'}\r\n                                                    onChange={(e) => setClientDetails({ reminderPreference: e.target.value as 'email_sms' })}\r\n                                                    className=\"w-4 h-4 text-gold-500 focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 focus:ring-offset-richblack-900 cursor-pointer bg-richblack-900 border-white/20\"\r\n                                                />\r\n                                                <span className=\"text-xs text-white/60 group-hover:text-white/80 transition-colors\">Email & SMS</span>\r\n                                            </label>\r\n                                            <label className=\"flex items-center gap-2 cursor-pointer group\">\r\n                                                <input\r\n                                                    type=\"radio\"\r\n                                                    name=\"reminderPreference\"\r\n                                                    value=\"email_only\"\r\n                                                    checked={clientDetails.reminderPreference === 'email_only'}\r\n                                                    onChange={(e) => setClientDetails({ reminderPreference: e.target.value as 'email_only' })}\r\n                                                    className=\"w-4 h-4 text-gold-500 focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 focus:ring-offset-richblack-900 cursor-pointer bg-richblack-900 border-white/20\"\r\n                                                />\r\n                                                <span className=\"text-xs text-white/60 group-hover:text-white/80 transition-colors\">Email Only</span>\r\n                                            </label>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Customer Notes */}\r\n                            <div>\r\n                                <label htmlFor=\"customerNotes\" className=\"block text-white/50 text-sm mb-1\">\r\n                                    Special Requests <span className=\"text-white/30 text-xs\">(Optional)</span>\r\n                                </label>\r\n                                <div className=\"relative\">\r\n                                    <MessageSquare className=\"absolute left-3 top-3 w-4 h-4 text-white/30\" aria-hidden=\"true\" />\r\n                                    <textarea\r\n                                        id=\"customerNotes\"\r\n                                        value={customerNotes}\r\n                                        onChange={(e) => setCustomerNotes(e.target.value)}\r\n                                        rows={3}\r\n                                        className=\"w-full bg-richblack-900 border border-white/10 rounded p-3 pl-10 text-white focus:ring-2 focus:ring-gold-500/20 outline-none transition-colors resize-none\"\r\n                                        placeholder=\"Any special requests or preferences...\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-start gap-3 p-4 bg-gold-900/10 border border-gold-500/20 rounded-lg text-sm text-gold-100/80\">\r\n                        <Lock className=\"w-5 h-5 text-gold-500 flex-shrink-0\" />\r\n                        <p>Your slot is held for <strong>5:00</strong> minutes. The <strong>20 GHS</strong> booking fee is non-refundable.</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Receipt Card */}\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: 40 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: 0.2, duration: 0.6, type: \"spring\" }}\r\n                    className=\"flex-1 lg:max-w-xs\"\r\n                >\r\n                    <div className=\"bg-white p-6 rounded-xl text-richblack-900 shadow-2xl relative overflow-hidden transform hover:-translate-y-1 transition-transform duration-500\">\r\n                        {/* Receipt Top Edge (Visual decoration) */}\r\n                        <div className=\"absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-gold-400 to-gold-600\" />\r\n\r\n                        <h3 className=\"font-display text-2xl font-bold mb-1\">Receipt</h3>\r\n                        <p className=\"text-richblack-900/50 text-xs uppercase tracking-widest mb-6\">Noir Hair Studios • Accra</p>\r\n\r\n                        <div className=\"space-y-3 mb-6 border-b border-black/10 pb-6 border-dashed\">\r\n                            <div className=\"flex justify-between font-bold\">\r\n                                <span>{selectedService?.name}</span>\r\n                                <span>{selectedService?.price.toFixed(2)}</span>\r\n                            </div>\r\n                            {selectedAddons.map(a => (\r\n                                <div key={a.id} className=\"flex justify-between text-sm text-black/60\">\r\n                                    <span>+ {a.name}</span>\r\n                                    <span>{a.price.toFixed(2)}</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n\r\n                        {/* Staff Info */}\r\n                        {selectedStaff && (\r\n                            <div className=\"space-y-2 mb-6 border-b border-black/10 pb-6 border-dashed text-sm\">\r\n                                <div className=\"flex justify-between\">\r\n                                    <span className=\"text-black/60\">Your Barber</span>\r\n                                    <span className=\"font-medium\">{selectedStaff.name}</span>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"space-y-2 mb-6 border-b border-black/10 pb-6 border-dashed text-sm\">\r\n                            <div className=\"flex justify-between\">\r\n                                <span className=\"text-black/60\">Subtotal</span>\r\n                                <span>{serviceTotal.toFixed(2)}</span>\r\n                            </div>\r\n                            <div className=\"flex justify-between\">\r\n                                <span className=\"text-black/60\">Booking Fee</span>\r\n                                <span>{bookingFee.toFixed(2)}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex justify-between items-end mb-6\">\r\n                            <span className=\"font-bold text-lg\">Total</span>\r\n                            <span className=\"font-display text-4xl font-bold text-gold-600\">GHS {finalTotal.toFixed(0)}<span className=\"text-sm align-top text-black/40\">.00</span></span>\r\n                        </div>\r\n\r\n                        {/* Booking Policies */}\r\n                        <BookingPolicies />\r\n\r\n                        {/* Policy Acceptance Checkbox */}\r\n                        <div className=\"mb-4\">\r\n                            <label className=\"flex items-start gap-3 cursor-pointer group\">\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    checked={policiesAccepted}\r\n                                    onChange={(e) => setPoliciesAccepted(e.target.checked)}\r\n                                    className=\"mt-0.5 w-4 h-4 rounded border-2 border-black/20 text-gold-600 focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 focus:ring-offset-white cursor-pointer\"\r\n                                    id=\"policies-checkbox\"\r\n                                    aria-required=\"true\"\r\n                                />\r\n                                <span className=\"text-xs text-black/70 group-hover:text-black/90 transition-colors select-none\">\r\n                                    I have read and agree to the booking policies\r\n                                </span>\r\n                            </label>\r\n                            {!policiesAccepted && touched.name && (\r\n                                <motion.p\r\n                                    initial={{ opacity: 0, height: 0 }}\r\n                                    animate={{ opacity: 1, height: \"auto\" }}\r\n                                    className=\"text-red-600 text-xs mt-2 flex items-center gap-1\"\r\n                                    role=\"alert\"\r\n                                >\r\n                                    <AlertCircle className=\"w-3 h-3\" />\r\n                                    Please accept the booking policies to continue\r\n                                </motion.p>\r\n                            )}\r\n                        </div>\r\n\r\n                        <button\r\n                            onClick={handlePay}\r\n                            disabled={!clientDetails.name || !clientDetails.email || !policiesAccepted || isPaying || (touched.name && !!errors.name) || (touched.phone && !!errors.phone) || (touched.email && !!errors.email)}\r\n                            className=\"w-full bg-richblack-900 text-white py-4 font-bold rounded hover:bg-gold-500 hover:text-black transition-all disabled:opacity-50 disabled:cursor-not-allowed group focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 focus:ring-offset-white\"\r\n                            aria-label={`Pay ${finalTotal} GHS now with Paystack`}\r\n                            aria-disabled={!clientDetails.name || !clientDetails.email || !policiesAccepted || isPaying}\r\n                        >\r\n                            {isPaying ? (\r\n                                <span className=\"flex items-center justify-center gap-2\">\r\n                                    <LoadingSpinner size=\"sm\" />\r\n                                    Processing...\r\n                                </span>\r\n                            ) : (\r\n                                <span className=\"flex items-center justify-center gap-2\">\r\n                                    Pay Now <CreditCard className=\"w-4 h-4 group-hover:text-black transition-colors\" aria-hidden=\"true\" />\r\n                                </span>\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Appointment Summary (Small) */}\r\n                    <div className=\"mt-6 text-center text-white/40 text-xs\">\r\n                        {selectedDate && <p>{format(selectedDate, 'MMMM do, yyyy')} at {selectedTime}</p>}\r\n                    </div>\r\n                </motion.div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\booking\\SuccessView.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[431,434],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[431,434],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":70,"column":59,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1900,1936],"text":"We couldn&apos;t verify your transaction."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1900,1936],"text":"We couldn&lsquo;t verify your transaction."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1900,1936],"text":"We couldn&#39;t verify your transaction."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1900,1936],"text":"We couldn&rsquo;t verify your transaction."},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from 'react';\r\nimport { motion, Variants } from 'framer-motion';\r\nimport { CheckCircle, XCircle, Home, Calendar, MapPin, Navigation, User } from 'lucide-react';\r\nimport Link from 'next/link';\r\nimport { DownloadReceiptButton } from '@/components/ui/DownloadReceiptButton';\r\n\r\ninterface SuccessViewProps {\r\n    isSuccess: boolean;\r\n    reference?: string;\r\n    finalAmount: string;\r\n    bookingDetails: any;\r\n    bookingId?: string;\r\n    verificationMessage?: string;\r\n}\r\n\r\nconst containerVariants: Variants = {\r\n    hidden: { opacity: 0 },\r\n    visible: {\r\n        opacity: 1,\r\n        transition: {\r\n            staggerChildren: 0.2\r\n        }\r\n    }\r\n};\r\n\r\nconst itemVariants: Variants = {\r\n    hidden: { opacity: 0, y: 20 },\r\n    visible: {\r\n        opacity: 1,\r\n        y: 0,\r\n        transition: {\r\n            duration: 0.5,\r\n            ease: \"easeOut\"\r\n        }\r\n    }\r\n};\r\n\r\nconst checkVariants: Variants = {\r\n    hidden: { scale: 0, opacity: 0 },\r\n    visible: {\r\n        scale: 1,\r\n        opacity: 1,\r\n        transition: {\r\n            type: \"spring\",\r\n            stiffness: 200,\r\n            damping: 15,\r\n            delay: 0.1\r\n        }\r\n    }\r\n};\r\n\r\nexport function SuccessView({\r\n    isSuccess,\r\n    reference,\r\n    finalAmount,\r\n    bookingDetails,\r\n    bookingId,\r\n    verificationMessage\r\n}: SuccessViewProps) {\r\n    if (!isSuccess) {\r\n        return (\r\n            <div className=\"max-w-md mx-auto text-center space-y-6\">\r\n                <div className=\"w-24 h-24 bg-red-500/10 rounded-full flex items-center justify-center mx-auto ring-1 ring-red-500/30\">\r\n                    <XCircle className=\"w-12 h-12 text-red-400\" />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                    <h1 className=\"text-3xl font-playfair font-bold text-white\">Payment Failed</h1>\r\n                    <p className=\"text-white/60\">We couldn't verify your transaction.</p>\r\n                </div>\r\n                <div className=\"bg-red-500/10 border border-red-500/20 p-4 rounded-lg text-red-200 text-sm\">\r\n                    {verificationMessage}\r\n                </div>\r\n\r\n                <div className=\"flex flex-col gap-3 pt-4\">\r\n                    <Link\r\n                        href=\"/book\"\r\n                        className=\"w-full bg-white text-richblack-900 font-bold py-3 rounded-xl hover:bg-white/90 transition-all flex items-center justify-center gap-2\"\r\n                    >\r\n                        <Calendar className=\"w-4 h-4\" /> Try Booking Again\r\n                    </Link>\r\n                    <Link\r\n                        href=\"/\"\r\n                        className=\"w-full bg-transparent border border-white/20 text-white font-bold py-3 rounded-xl hover:bg-white/5 transition-all flex items-center justify-center gap-2\"\r\n                    >\r\n                        <Home className=\"w-4 h-4\" /> Return Home\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <motion.div\r\n            className=\"w-full max-w-md mx-auto space-y-8 py-12\"\r\n            variants={containerVariants}\r\n            initial=\"hidden\"\r\n            animate=\"visible\"\r\n        >\r\n            <motion.div variants={itemVariants} className=\"text-center space-y-6\">\r\n                <motion.div\r\n                    variants={checkVariants}\r\n                    className=\"w-20 h-20 bg-green-500/10 rounded-full flex items-center justify-center mx-auto ring-1 ring-green-500/30\"\r\n                >\r\n                    <CheckCircle className=\"w-10 h-10 text-green-400\" />\r\n                </motion.div>\r\n\r\n                <div className=\"space-y-2\">\r\n                    <h1 className=\"text-4xl font-display font-bold text-white\">Booking Confirmed!</h1>\r\n                    <p className=\"text-white/60 text-lg\">Your appointment has been successfully scheduled.</p>\r\n                    {bookingId && (\r\n                        <p className=\"text-white/40 text-sm font-mono\">Booking ID: {bookingId}</p>\r\n                    )}\r\n                </div>\r\n            </motion.div>\r\n\r\n            {/* Receipt Card */}\r\n            <motion.div variants={itemVariants} className=\"relative\">\r\n                {/* Notches for torn effect */}\r\n                <div className=\"absolute top-[88px] -left-3 w-6 h-6 bg-richblack-900 rounded-full z-10\" data-html2canvas-ignore></div>\r\n                <div className=\"absolute top-[88px] -right-3 w-6 h-6 bg-richblack-900 rounded-full z-10\" data-html2canvas-ignore></div>\r\n\r\n                <div id=\"receipt-card\" className=\"bg-white text-richblack-900 rounded-2xl p-6 shadow-2xl relative overflow-hidden flex flex-col\">\r\n                    <div className=\"absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-gold-400 to-gold-600\" />\r\n\r\n                    <div className=\"mb-6 pb-6 border-b border-richblack-900/10 border-dashed flex justify-between items-start\">\r\n                        <div>\r\n                            <p className=\"text-richblack-900/40 text-xs uppercase tracking-widest mb-1\">Receipt Reference</p>\r\n                            <p className=\"font-mono font-bold text-lg\">{reference}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-4 flex-1\">\r\n                        {bookingDetails.serviceName && (\r\n                            <div className=\"flex justify-between items-start\">\r\n                                <div>\r\n                                    <p className=\"font-bold text-lg\">{bookingDetails.serviceName}</p>\r\n                                    {bookingDetails.addonNames && (\r\n                                        <p className=\"text-sm text-richblack-900/60\">+ {bookingDetails.addonNames}</p>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {(bookingDetails.staffName || bookingDetails.barberName) && (\r\n                            <div className=\"flex items-center gap-3 text-sm text-richblack-900/80 bg-richblack-900/5 p-3 rounded-lg\">\r\n                                <User className=\"w-4 h-4\" />\r\n                                <span>Barber: <strong>{bookingDetails.staffName || bookingDetails.barberName}</strong></span>\r\n                            </div>\r\n                        )}\r\n\r\n                        {(bookingDetails.bookingDate || bookingDetails.date || bookingDetails.bookingTime || bookingDetails.time) && (\r\n                            <div className=\"flex items-center gap-3 text-sm text-richblack-900/80 bg-richblack-900/5 p-3 rounded-lg\">\r\n                                <Calendar className=\"w-4 h-4\" />\r\n                                <span>\r\n                                    {(bookingDetails.bookingDate || bookingDetails.date) ? new Date(bookingDetails.bookingDate || bookingDetails.date).toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' }) : ''}\r\n                                    {(bookingDetails.bookingTime || bookingDetails.time) ? ` at ${bookingDetails.bookingTime || bookingDetails.time}` : ''}\r\n                                </span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"mt-6 pt-6 border-t border-richblack-900/10 border-dashed\">\r\n                        <div className=\"flex justify-between items-baseline mb-6\">\r\n                            <span className=\"text-richblack-900/60 font-medium\">Total Paid</span>\r\n                            <span className=\"font-display text-3xl font-bold text-gold-600\">GHS {finalAmount}</span>\r\n                        </div>\r\n                        <DownloadReceiptButton targetId=\"receipt-card\" fileName={`Receipt-${reference}`} />\r\n                    </div>\r\n                </div>\r\n            </motion.div>\r\n\r\n            {/* Location & Actions */}\r\n            <motion.div variants={itemVariants} className=\"space-y-4\">\r\n                {/* Directions Card */}\r\n                <div className=\"bg-richblack-800 border border-white/10 rounded-2xl p-6 flex flex-col justify-center text-center space-y-4 shadow-elevated\">\r\n                    <div className=\"w-12 h-12 bg-gold-500/10 rounded-full flex items-center justify-center mx-auto\">\r\n                        <MapPin className=\"w-6 h-6 text-gold-500\" />\r\n                    </div>\r\n                    <div>\r\n                        <h3 className=\"text-white font-bold text-lg\">Noir Hair Studios</h3>\r\n                        <p className=\"text-white/60 text-sm mt-1\">\r\n                            123 Oxford Street, Osu<br />\r\n                            Near Danquah Circle, Accra\r\n                        </p>\r\n                    </div>\r\n                    <a\r\n                        href=\"https://maps.google.com/?q=The+Shop+Barbershop+Osu+Accra\"\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"inline-flex items-center justify-center gap-2 text-gold-400 text-sm font-bold hover:text-gold-300 transition-colors\"\r\n                    >\r\n                        <Navigation className=\"w-4 h-4\" /> Get Directions\r\n                    </a>\r\n                </div>\r\n\r\n                {/* Home Button */}\r\n                <Link\r\n                    href=\"/\"\r\n                    className=\"w-full bg-gold-500 hover:bg-gold-400 text-richblack-900 font-bold py-4 rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-gold-500/10\"\r\n                >\r\n                    <Home className=\"w-5 h-5\" /> Return Home\r\n                </Link>\r\n            </motion.div>\r\n        </motion.div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\emails\\BookingConfirmation.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":12,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Link"},"fix":{"range":[151,162],"text":""},"desc":"Remove unused variable \"Link\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from 'react';\r\nimport {\r\n    Html,\r\n    Body,\r\n    Head,\r\n    Heading,\r\n    Hr,\r\n    Container,\r\n    Preview,\r\n    Section,\r\n    Text,\r\n    Link,\r\n} from '@react-email/components';\r\n\r\ninterface BookingConfirmationProps {\r\n    customerName: string;\r\n    serviceName: string;\r\n    date: string;\r\n    time: string;\r\n    price: number;\r\n    reference: string;\r\n    shopName?: string;\r\n    shopAddress?: string;\r\n}\r\n\r\nexport const BookingConfirmationEmail = ({\r\n    customerName,\r\n    serviceName,\r\n    date,\r\n    time,\r\n    price,\r\n    reference,\r\n    shopName = 'His-seer Barbershop',\r\n    shopAddress = '123 Main Street, Accra, Ghana',\r\n}: BookingConfirmationProps) => {\r\n    const previewText = `Booking Confirmed: ${serviceName} on ${date}`;\r\n\r\n    return (\r\n        <Html>\r\n            <Head />\r\n            <Preview>{previewText}</Preview>\r\n            <Body style={main}>\r\n                <Container style={container}>\r\n                    <Heading style={h1}>Booking Confirmed! ✅</Heading>\r\n                    <Text style={text}>Hi {customerName},</Text>\r\n                    <Text style={text}>\r\n                        Your appointment at <strong>{shopName}</strong> has been successfully booked.\r\n                        We look forward to seeing you!\r\n                    </Text>\r\n\r\n                    <Section style={box}>\r\n                        <Text style={paragraph}>\r\n                            <strong>Service:</strong> {serviceName}\r\n                        </Text>\r\n                        <Text style={paragraph}>\r\n                            <strong>Date:</strong> {date}\r\n                        </Text>\r\n                        <Text style={paragraph}>\r\n                            <strong>Time:</strong> {time}\r\n                        </Text>\r\n                        <Text style={paragraph}>\r\n                            <strong>Total Price:</strong> GH₵{price.toFixed(2)}\r\n                        </Text>\r\n                        <Hr style={hr} />\r\n                        <Text style={paragraph}>\r\n                            <strong>Reference:</strong> {reference}\r\n                        </Text>\r\n                    </Section>\r\n\r\n                    <Text style={text}>\r\n                        If you need to reschedule or cancel, please contact us or verify your booking using your reference code.\r\n                    </Text>\r\n\r\n                    <Text style={footer}>\r\n                        {shopName} • {shopAddress}\r\n                    </Text>\r\n                </Container>\r\n            </Body>\r\n        </Html>\r\n    );\r\n};\r\n\r\nexport default BookingConfirmationEmail;\r\n\r\n// Styles\r\nconst main = {\r\n    backgroundColor: '#ffffff',\r\n    fontFamily: '-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Ubuntu,sans-serif',\r\n};\r\n\r\nconst container = {\r\n    backgroundColor: '#ffffff',\r\n    margin: '0 auto',\r\n    padding: '20px 0 48px',\r\n    marginBottom: '64px',\r\n};\r\n\r\nconst box = {\r\n    padding: '24px',\r\n    backgroundColor: '#f9f9f9',\r\n    borderRadius: '12px',\r\n    border: '1px solid #e0e0e0',\r\n    marginTop: '24px',\r\n    marginBottom: '24px',\r\n};\r\n\r\nconst h1 = {\r\n    color: '#000000',\r\n    fontSize: '24px',\r\n    fontWeight: '600',\r\n    lineHeight: '1.25',\r\n    marginBottom: '24px',\r\n};\r\n\r\nconst text = {\r\n    color: '#333333',\r\n    fontSize: '16px',\r\n    lineHeight: '24px',\r\n    textAlign: 'left' as const,\r\n};\r\n\r\nconst paragraph = {\r\n    color: '#333333',\r\n    fontSize: '16px',\r\n    lineHeight: '24px',\r\n    margin: '8px 0',\r\n};\r\n\r\nconst hr = {\r\n    borderColor: '#e6ebf1',\r\n    margin: '20px 0',\r\n};\r\n\r\nconst footer = {\r\n    color: '#8898aa',\r\n    fontSize: '12px',\r\n    lineHeight: '16px',\r\n    marginTop: '48px',\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\layout\\Footer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Scissors' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":18,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Scissors"},"fix":{"range":[53,62],"text":""},"desc":"Remove unused variable \"Scissors\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\nimport Link from \"next/link\";\nimport { Scissors, Phone, Mail, MapPin, Instagram, Facebook, Twitter, Shield, Lock, Award } from \"lucide-react\";\nimport type { ShopSettings } from \"@/types/database\";\n\ninterface Props {\n    settings: ShopSettings | null;\n}\n\nexport function Footer({ settings }: Props) {\n    const currentYear = new Date().getFullYear();\n    const address = settings?.shop_address || \"123 Oxford Street, Osu\\nAccra, Ghana\";\n    const phone = settings?.shop_phone || \"+233 20 000 0000\";\n    const email = settings?.shop_email || \"info@barbershop.com\";\n\n    return (\n        <footer className=\"bg-richblack-900 border-t border-white/10 relative overflow-hidden\">\n            {/* Background Glow */}\n            <div className=\"absolute bottom-0 left-1/2 -translate-x-1/2 w-[800px] h-[200px] bg-gold-600/5 rounded-full blur-[150px]\" />\n\n            <div className=\"container mx-auto px-6 py-16 relative z-10\">\n                <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12\">\n                    {/* Brand Column */}\n                    <div>\n                        <Link href=\"/\" className=\"inline-block\">\n                            <div className=\"font-display text-2xl font-bold text-gold-500 tracking-wider mb-4\">\n                                {settings?.shop_name?.split(' ')[0] || 'Noir'}<span className=\"text-white\">{settings?.shop_name?.split(' ').slice(1).join('') || 'HairStudios'}</span>.\n                            </div>\n                        </Link>\n                        <p className=\"text-white/60 text-sm leading-relaxed mb-6\">\n                            Premium grooming experience in the heart of our city. Master craftsmen delivering exceptional styles since 2026.\n                        </p>\n                        {/* Social Links */}\n                        <div className=\"flex gap-3\">\n                            {[\n                                { icon: Instagram, href: \"#\", label: \"Instagram\" },\n                                { icon: Facebook, href: \"#\", label: \"Facebook\" },\n                                { icon: Twitter, href: \"#\", label: \"Twitter\" }\n                            ].map((social, index) => (\n                                <a\n                                    key={index}\n                                    href={social.href}\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                    className=\"w-10 h-10 bg-white/5 border border-white/10 rounded-lg flex items-center justify-center hover:bg-gold-500/10 hover:border-gold-500/50 transition-all group\"\n                                    aria-label={social.label}\n                                >\n                                    <social.icon className=\"w-5 h-5 text-white/50 group-hover:text-gold-500 transition-colors\" />\n                                </a>\n                            ))}\n                        </div>\n                    </div>\n\n                    {/* Quick Links */}\n                    <div>\n                        <h3 className=\"text-white font-bold text-lg mb-6\">Quick Links</h3>\n                        <ul className=\"space-y-3\">\n                            {[\n                                { label: \"Book Appointment\", href: \"/book\" },\n                                { label: \"Our Services\", href: \"#services\" },\n                                { label: \"Meet the Team\", href: \"#barbers\" },\n                                { label: \"Gallery\", href: \"#gallery\" }\n                            ].map((link, index) => (\n                                <li key={index}>\n                                    <Link\n                                        href={link.href}\n                                        className=\"text-white/60 hover:text-gold-500 transition-colors text-sm inline-block\"\n                                    >\n                                        {link.label}\n                                    </Link>\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n\n                    {/* Contact Info */}\n                    <div>\n                        <h3 className=\"text-white font-bold text-lg mb-6\">Contact Us</h3>\n                        <ul className=\"space-y-4\">\n                            <li className=\"flex items-start gap-3\">\n                                <MapPin className=\"w-5 h-5 text-gold-500 flex-shrink-0 mt-0.5\" />\n                                <span className=\"text-white/60 text-sm whitespace-pre-line\">\n                                    {address}\n                                </span>\n                            </li>\n                            <li className=\"flex items-center gap-3\">\n                                <Phone className=\"w-5 h-5 text-gold-500 flex-shrink-0\" />\n                                <a href={`tel:${phone}`} className=\"text-white/60 hover:text-gold-500 transition-colors text-sm\">\n                                    {phone}\n                                </a>\n                            </li>\n                            <li className=\"flex items-center gap-3\">\n                                <Mail className=\"w-5 h-5 text-gold-500 flex-shrink-0\" />\n                                <a href={`mailto:${email}`} className=\"text-white/60 hover:text-gold-500 transition-colors text-sm\">\n                                    {email}\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n\n                    {/* Status Badge - Dynamic based on today's hours */}\n                    <div>\n                        <h3 className=\"text-white font-bold text-lg mb-6\">Today&apos;s Status</h3>\n                        {(() => {\n                            const dayMap = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\n                            const today = dayMap[new Date().getDay()];\n                            // @ts-expect-error business_hours is a JSON blob (day-keyed) and not strongly typed\n                            const todayHours = settings?.business_hours?.[today];\n                            const isOpen = todayHours?.open && todayHours?.open !== '';\n\n                            return isOpen ? (\n                                <div className=\"inline-flex items-center gap-2 px-4 py-3 bg-green-900/20 border border-green-500/20 rounded-lg\">\n                                    <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\" />\n                                    <div>\n                                        <span className=\"text-green-500 text-sm font-medium block\">Open Today</span>\n                                        <span className=\"text-white/40 text-xs\">{todayHours.open} - {todayHours.close}</span>\n                                    </div>\n                                </div>\n                            ) : (\n                                <div className=\"inline-flex items-center gap-2 px-4 py-3 bg-red-900/20 border border-red-500/20 rounded-lg\">\n                                    <div className=\"w-2 h-2 bg-red-500 rounded-full\" />\n                                    <span className=\"text-red-400 text-sm font-medium\">Closed Today</span>\n                                </div>\n                            );\n                        })()}\n                    </div>\n                </div>\n\n                {/* Trust Badges & Security */}\n                <div className=\"border-t border-white/10 pt-8 mb-8\">\n                    <div className=\"flex flex-col md:flex-row items-center justify-between gap-6\">\n                        {/* Trust Badges */}\n                        <div className=\"flex flex-wrap items-center justify-center gap-6\">\n                            {/* Licensed */}\n                            <div className=\"flex items-center gap-2 px-4 py-2 bg-white/5 border border-white/10 rounded-lg\">\n                                <Award className=\"w-5 h-5 text-gold-500\" />\n                                <div className=\"text-left\">\n                                    <p className=\"text-white text-xs font-bold\">Licensed</p>\n                                    <p className=\"text-white/40 text-[10px]\">Professional Barbers</p>\n                                </div>\n                            </div>\n\n                            {/* Secure Payments */}\n                            <div className=\"flex items-center gap-2 px-4 py-2 bg-white/5 border border-white/10 rounded-lg\">\n                                <Lock className=\"w-5 h-5 text-green-500\" />\n                                <div className=\"text-left\">\n                                    <p className=\"text-white text-xs font-bold\">Secure Payment</p>\n                                    <p className=\"text-white/40 text-[10px]\">Powered by Paystack</p>\n                                </div>\n                            </div>\n\n                            {/* COVID Safe */}\n                            <div className=\"flex items-center gap-2 px-4 py-2 bg-white/5 border border-white/10 rounded-lg\">\n                                <Shield className=\"w-5 h-5 text-blue-500\" />\n                                <div className=\"text-left\">\n                                    <p className=\"text-white text-xs font-bold\">COVID-Safe</p>\n                                    <p className=\"text-white/40 text-[10px]\">Sanitized Equipment</p>\n                                </div>\n                            </div>\n\n                            {/* 5-Star Rating */}\n                            <div className=\"flex items-center gap-2 px-4 py-2 bg-white/5 border border-white/10 rounded-lg\">\n                                <div className=\"flex gap-0.5\">\n                                    {[...Array(5)].map((_, i) => (\n                                        <svg key={i} className=\"w-3 h-3 text-gold-500 fill-current\" viewBox=\"0 0 20 20\">\n                                            <path d=\"M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z\" />\n                                        </svg>\n                                    ))}\n                                </div>\n                                <div className=\"text-left\">\n                                    <p className=\"text-white text-xs font-bold\">5.0 Rating</p>\n                                    <p className=\"text-white/40 text-[10px]\">120+ Reviews</p>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Payment Methods */}\n                        <div className=\"flex items-center gap-3\">\n                            <span className=\"text-white/40 text-xs\">We accept:</span>\n                            <div className=\"flex gap-2\">\n                                {[\"MTN\", \"VODA\", \"VISA\", \"MASTER\"].map((method) => (\n                                    <div\n                                        key={method}\n                                        className=\"px-3 py-1.5 bg-white/5 border border-white/10 rounded text-[10px] font-bold text-white/50\"\n                                    >\n                                        {method}\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Bottom Bar */}\n                <div className=\"border-t border-white/10 pt-8\">\n                    <div className=\"flex flex-col md:flex-row items-center justify-between gap-4 text-sm text-white/40\">\n                        <p>© {currentYear} {settings?.shop_name || 'Noir Hair Studios'}. All rights reserved.</p>\n                        <div className=\"flex gap-6\">\n                            <Link href=\"/privacy\" className=\"hover:text-gold-500 transition-colors\">\n                                Privacy Policy\n                            </Link>\n                            <Link href=\"/terms\" className=\"hover:text-gold-500 transition-colors\">\n                                Terms of Service\n                            </Link>\n                            <Link href=\"/refund\" className=\"hover:text-gold-500 transition-colors\">\n                                Refund Policy\n                            </Link>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </footer>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\layout\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\sections\\BarbersShowcase.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":69,"column":49,"nodeType":"JSXOpeningElement","endLine":69,"endColumn":137}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\nimport { motion } from \"framer-motion\";\nimport { Scissors, Award, Users, TrendingUp } from \"lucide-react\";\nimport type { Staff } from \"@/types/database\";\n\ninterface Props {\n    staff: Staff[];\n}\n\nexport function BarbersShowcase({ staff }: Props) {\n    // Fallback if no staff are loaded yet\n    const displayStaff = staff.length > 0 ? staff : [];\n\n    return (\n        <section id=\"barbers\" className=\"py-24 px-6 bg-richblack-900 relative overflow-hidden\">\n            {/* Background Elements */}\n            <div className=\"absolute top-1/4 left-0 w-[400px] h-[400px] bg-gold-600/10 rounded-full blur-[120px]\" />\n            <div className=\"absolute bottom-0 right-0 w-[500px] h-[500px] bg-white/5 rounded-full blur-[150px]\" />\n\n            <div className=\"container mx-auto max-w-6xl relative z-10\">\n                {/* Section Header */}\n                <div className=\"text-center mb-16\">\n                    <motion.div\n                        initial={{ opacity: 0, y: 20 }}\n                        whileInView={{ opacity: 1, y: 0 }}\n                        viewport={{ once: true }}\n                        transition={{ duration: 0.6 }}\n                    >\n                        <p className=\"text-gold-500 uppercase tracking-[0.3em] text-sm font-bold mb-4 flex items-center justify-center gap-2\">\n                            <Scissors className=\"w-4 h-4\" /> Meet the Team\n                        </p>\n                        <h2 className=\"font-display text-4xl md:text-5xl mb-4 text-white\">Master Craftsmen</h2>\n                        <p className=\"text-white/60 max-w-2xl mx-auto text-lg\">\n                            Our award-winning barbers bring passion and precision to every cut.\n                        </p>\n                        <div className=\"w-24 h-1 bg-gold-500 mx-auto mt-6\" />\n                    </motion.div>\n                </div>\n\n                {/* Barbers Grid */}\n                {displayStaff.length > 0 ? (\n                    <div className=\"grid md:grid-cols-3 gap-8 mb-16\">\n                        {displayStaff.map((barber, index) => {\n                            // Extract initials\n                            const initials = barber.name\n                                .split(' ')\n                                .map(n => n[0])\n                                .join('')\n                                .toUpperCase()\n                                .slice(0, 2);\n\n                            // Use Bio line 1 as Role if available, or default\n                            const role = barber.bio ? barber.bio.split('.')[0] : \"Professional Barber\";\n                            const specialty = barber.specialties && barber.specialties.length > 0 ? barber.specialties[0] : \"General Grooming\";\n\n                            return (\n                                <motion.div\n                                    key={barber.id}\n                                    initial={{ opacity: 0, y: 30 }}\n                                    whileInView={{ opacity: 1, y: 0 }}\n                                    viewport={{ once: true }}\n                                    transition={{ duration: 0.6, delay: index * 0.15 }}\n                                    className=\"group\"\n                                >\n                                    <div className=\"bg-richblack-800 border border-white/10 rounded-2xl overflow-hidden shadow-card hover:shadow-card-hover transition-shadow-smooth h-full flex flex-col\">\n                                        {/* Image Placeholder / Avatar */}\n                                        <div className=\"relative aspect-[3/4] bg-gradient-to-br from-richblack-700 to-richblack-900 overflow-hidden flex-shrink-0\">\n                                            {barber.avatar_url ? (\n                                                <img src={barber.avatar_url} alt={barber.name} className=\"w-full h-full object-cover\" />\n                                            ) : (\n                                                <div className=\"absolute inset-0 flex items-center justify-center\">\n                                                    <div className=\"w-32 h-32 rounded-full bg-gradient-to-br from-gold-400 to-gold-600 flex items-center justify-center font-display text-5xl font-bold text-richblack-900 shadow-elevated-gold\">\n                                                        {initials}\n                                                    </div>\n                                                </div>\n                                            )}\n\n                                            {/* Overlay on Hover */}\n                                            <div className=\"absolute inset-0 bg-gradient-to-t from-richblack-900 via-richblack-900/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-6\">\n                                                <p className=\"text-gold-400 text-sm font-medium\">{specialty}</p>\n                                            </div>\n                                        </div>\n\n                                        {/* Info Section */}\n                                        <div className=\"p-6 flex-1 flex flex-col justify-between\">\n                                            <div>\n                                                <h3 className=\"font-display text-2xl font-bold text-white mb-1\">\n                                                    {barber.name}\n                                                </h3>\n                                                <p className=\"text-gold-400 text-sm font-medium mb-4\">\n                                                    {role}\n                                                </p>\n                                            </div>\n\n                                            {/* Specialties / Achievements Badge */}\n                                            <div className=\"space-y-2 pt-4 border-t border-white/10 mt-4\">\n                                                {barber.specialties && barber.specialties.slice(0, 3).map((spec, i) => (\n                                                    <div key={i} className=\"flex items-start gap-2 text-white/60 text-xs\">\n                                                        <Award className=\"w-3 h-3 text-gold-500 mt-0.5 flex-shrink-0\" />\n                                                        <span>{spec}</span>\n                                                    </div>\n                                                ))}\n                                                {(!barber.specialties || barber.specialties.length === 0) && (\n                                                    <div className=\"flex items-start gap-2 text-white/60 text-xs italic\">\n                                                        <Award className=\"w-3 h-3 text-gold-500/50 mt-0.5 flex-shrink-0\" />\n                                                        <span>Expert Stylist</span>\n                                                    </div>\n                                                )}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </motion.div>\n                            );\n                        })}\n                    </div>\n                ) : (\n                    <div className=\"text-center p-12 bg-white/5 rounded-2xl border border-white/10 mb-16\">\n                        <p className=\"text-white/40\">Our team roster is being updated. Check back soon!</p>\n                    </div>\n                )}\n\n                {/* Why Choose Our Team */}\n                <motion.div\n                    initial={{ opacity: 0, y: 20 }}\n                    whileInView={{ opacity: 1, y: 0 }}\n                    viewport={{ once: true }}\n                    transition={{ duration: 0.6, delay: 0.3 }}\n                    className=\"grid md:grid-cols-3 gap-6 p-8 bg-gold-900/10 border border-gold-500/20 rounded-2xl\"\n                >\n                    {[\n                        {\n                            icon: Users,\n                            title: \"Experienced Team\",\n                            description: \"Years of combined experience in premium grooming\"\n                        },\n                        {\n                            icon: Award,\n                            title: \"Award Winning\",\n                            description: \"Recognized for excellence in service\"\n                        },\n                        {\n                            icon: TrendingUp,\n                            title: \"Constantly Evolving\",\n                            description: \"Regular training on latest trends and techniques\"\n                        }\n                    ].map((feature, index) => (\n                        <div key={index} className=\"flex flex-col items-center text-center\">\n                            <div className=\"w-12 h-12 rounded-full bg-gold-500/20 flex items-center justify-center mb-4\">\n                                <feature.icon className=\"w-6 h-6 text-gold-400\" />\n                            </div>\n                            <h4 className=\"text-white font-bold mb-2\">{feature.title}</h4>\n                            <p className=\"text-white/60 text-sm\">{feature.description}</p>\n                        </div>\n                    ))}\n                </motion.div>\n            </div>\n        </section>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\sections\\FAQ.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\sections\\LocationContact.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\sections\\Testimonials.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":82,"column":33,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[4136,4170],"text":"\n                                &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[4136,4170],"text":"\n                                &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[4136,4170],"text":"\n                                &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[4136,4170],"text":"\n                                &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":82,"column":50,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[4186,4216],"text":"&quot;\n                            "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[4186,4216],"text":"&ldquo;\n                            "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[4186,4216],"text":"&#34;\n                            "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[4186,4216],"text":"&rdquo;\n                            "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\nimport { motion } from \"framer-motion\";\nimport { Star, Quote } from \"lucide-react\";\nimport { Review } from \"@/types/database\";\n\nconst STATIC_TESTIMONIALS = [\n    {\n        id: \"static-1\",\n        customer_name: \"Kwame Mensah\",\n        rating: 5,\n        comment: \"Best barbershop experience in Accra! The attention to detail and professionalism is unmatched. I've been a regular client for over a year now.\",\n        created_at: new Date().toISOString()\n    },\n    {\n        id: \"static-2\",\n        customer_name: \"Yaw Boateng\",\n        rating: 5,\n        comment: \"The home service is a game changer. Premium quality right at my doorstep. Perfect for busy professionals who value their time.\",\n        created_at: new Date().toISOString()\n    },\n    {\n        id: \"static-3\",\n        customer_name: \"Kofi Asante\",\n        rating: 5,\n        comment: \"Not just a haircut, it's an experience. The atmosphere is luxurious, the barbers are skilled artists, and the results speak for themselves.\",\n        created_at: new Date().toISOString()\n    }\n];\n\nexport function Testimonials({ reviews = [] }: { reviews?: Review[] }) {\n    // Use real reviews if available, otherwise show static ones (or mix?)\n    // Decision: If we have real reviews, show them. If < 3, maybe pad with static?\n    // Let's purely show real reviews if we have at least 1, else static (for launch phase).\n    const displayReviews = reviews.length > 0 ? reviews : STATIC_TESTIMONIALS;\n\n    return (\n        <section className=\"py-24 px-6 bg-richblack-800 relative overflow-hidden\">\n            {/* Background Accent */}\n            <div className=\"absolute top-0 right-0 w-[600px] h-[600px] bg-gold-600/5 rounded-full blur-[150px]\" />\n\n            <div className=\"container mx-auto max-w-6xl relative z-10\">\n                {/* Section Header */}\n                <div className=\"text-center mb-16\">\n                    <motion.div\n                        initial={{ opacity: 0, y: 20 }}\n                        whileInView={{ opacity: 1, y: 0 }}\n                        viewport={{ once: true }}\n                        transition={{ duration: 0.6 }}\n                    >\n                        <p className=\"text-gold-500 uppercase tracking-[0.3em] text-sm font-bold mb-4\">Testimonials</p>\n                        <h2 className=\"font-display text-4xl md:text-5xl mb-4 text-white\">What Our Clients Say</h2>\n                        <div className=\"w-24 h-1 bg-gold-500 mx-auto\" />\n                    </motion.div>\n                </div>\n\n                {/* Testimonials Grid */}\n                <div className=\"grid md:grid-cols-3 gap-8\">\n                    {displayReviews.map((review, index) => (\n                        <motion.div\n                            key={review.id}\n                            initial={{ opacity: 0, y: 30 }}\n                            whileInView={{ opacity: 1, y: 0 }}\n                            viewport={{ once: true }}\n                            transition={{ duration: 0.6, delay: index * 0.1 }}\n                            whileHover={{ y: -8 }}\n                            className=\"bg-richblack-900/80 backdrop-blur-sm border border-white/10 rounded-2xl p-8 relative shadow-card hover:shadow-card-hover transition-shadow-smooth group h-full flex flex-col\"\n                        >\n                            {/* Quote Icon */}\n                            <div className=\"absolute top-6 right-6 opacity-10 group-hover:opacity-20 transition-opacity\">\n                                <Quote className=\"w-16 h-16 text-gold-500\" fill=\"currentColor\" />\n                            </div>\n\n                            {/* Stars */}\n                            <div className=\"flex gap-1 mb-6\">\n                                {[...Array(review.rating)].map((_, i) => (\n                                    <Star key={i} className=\"w-4 h-4 text-gold-500 fill-gold-500\" />\n                                ))}\n                            </div>\n\n                            {/* Testimonial Text */}\n                            <p className=\"text-white/80 text-sm leading-relaxed mb-8 relative z-10 flex-grow italic\">\n                                \"{review.comment}\"\n                            </p>\n\n                            {/* Client Info */}\n                            <div className=\"flex items-center gap-4 pt-6 border-t border-white/10 mt-auto\">\n                                {/* Avatar Placeholder */}\n                                <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-gold-400 to-gold-600 flex items-center justify-center font-bold text-richblack-900 shadow-inner-glow shrink-0\">\n                                    {review.customer_name.charAt(0)}\n                                </div>\n                                <div>\n                                    <h4 className=\"text-white font-bold text-sm\">{review.customer_name}</h4>\n                                    <p className=\"text-white/40 text-xs\">Verified Customer</p>\n                                </div>\n                            </div>\n                        </motion.div>\n                    ))}\n                </div>\n\n                {/* Stats Bar */}\n                <motion.div\n                    initial={{ opacity: 0, y: 20 }}\n                    whileInView={{ opacity: 1, y: 0 }}\n                    viewport={{ once: true }}\n                    transition={{ duration: 0.6, delay: 0.4 }}\n                    className=\"grid grid-cols-2 md:grid-cols-4 gap-8 mt-16 pt-16 border-t border-white/10\"\n                >\n                    {[\n                        { value: \"120+\", label: \"Happy Clients\" },\n                        { value: \"5.0\", label: \"Average Rating\" },\n                        { value: \"2000+\", label: \"Cuts Delivered\" },\n                        { value: \"100%\", label: \"Satisfaction\" }\n                    ].map((stat, index) => (\n                        <div key={index} className=\"text-center\">\n                            <div className=\"font-display text-4xl md:text-5xl font-bold text-gold-500 mb-2\">\n                                {stat.value}\n                            </div>\n                            <div className=\"text-white/50 text-sm uppercase tracking-wider\">\n                                {stat.label}\n                            </div>\n                        </div>\n                    ))}\n                </motion.div>\n            </div>\n        </section>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\staff\\AppointmentCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":3,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":29,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useEffect"},"fix":{"range":[34,45],"text":""},"desc":"Remove unused variable \"useEffect\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":18,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Calendar"},"fix":{"range":[156,165],"text":""},"desc":"Remove unused variable \"Calendar\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used.","line":5,"column":99,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":112,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AlertTriangle"},"fix":{"range":[243,258],"text":""},"desc":"Remove unused variable \"AlertTriangle\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[444,447],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[444,447],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2181,2184],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2181,2184],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { format, addMinutes, isPast, differenceInMinutes, parse } from 'date-fns';\r\nimport { Calendar, CheckCircle, Clock, MapPin, MessageSquare, MoreVertical, Phone, User, XCircle, AlertTriangle, Home, ExternalLink, Star } from 'lucide-react';\r\nimport { updateAppointmentStatus, addAppointmentNote } from '@/actions/booking';\r\n\r\ninterface AppointmentCardProps {\r\n    appointment: any;\r\n}\r\n\r\nexport function AppointmentCard({ appointment }: AppointmentCardProps) {\r\n    const [isExpanded, setIsExpanded] = useState(false);\r\n    const [note, setNote] = useState(appointment.client_notes || '');\r\n    const [isEditingNote, setIsEditingNote] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [showMenu, setShowMenu] = useState(false);\r\n\r\n    // Calculate times\r\n    // Assuming appointment_time is \"HH:mm\" like \"09:00\"\r\n    const todayStr = format(new Date(), 'yyyy-MM-dd');\r\n    const startTimeDate = parse(`${todayStr} ${appointment.appointment_time}`, 'yyyy-MM-dd HH:mm', new Date());\r\n    const duration = appointment.duration || 45; // Default 45 min if missing\r\n    const endTimeDate = addMinutes(startTimeDate, duration);\r\n    const endTimeStr = format(endTimeDate, 'HH:mm');\r\n\r\n    // Lateness Logic\r\n    const now = new Date();\r\n    // Only check lateness if status is 'confirmed' (not completed/cancelled) and it's today\r\n    const isLate = appointment.status === 'confirmed' &&\r\n        isPast(startTimeDate) &&\r\n        differenceInMinutes(now, startTimeDate) > 5;\r\n\r\n    const minutesLate = differenceInMinutes(now, startTimeDate);\r\n\r\n    const handleStatusUpdate = async (status: 'completed' | 'no_show' | 'cancelled') => {\r\n        if (!confirm(`Mark this appointment as ${status}?`)) return;\r\n        setLoading(true);\r\n        await updateAppointmentStatus(appointment.id, status);\r\n        setLoading(false);\r\n        setShowMenu(false);\r\n    };\r\n\r\n    const handleSaveNote = async () => {\r\n        setLoading(true);\r\n        await addAppointmentNote(appointment.id, note);\r\n        setIsEditingNote(false);\r\n        setLoading(false);\r\n    };\r\n\r\n    const statusColors: any = {\r\n        confirmed: 'bg-blue-500/10 text-blue-400 border-blue-500/20',\r\n        completed: 'bg-green-500/10 text-green-400 border-green-500/20',\r\n        cancelled: 'bg-red-500/10 text-red-400 border-red-500/20',\r\n        no_show: 'bg-orange-500/10 text-orange-400 border-orange-500/20',\r\n        pending: 'bg-yellow-500/10 text-yellow-400 border-yellow-500/20',\r\n    };\r\n\r\n    const isDone = appointment.status === 'completed' || appointment.status === 'cancelled' || appointment.status === 'no_show';\r\n\r\n    return (\r\n        <div className={`bg-richblack-800 border border-white/5 rounded-xl overflow-hidden transition-all ${isExpanded ? 'ring-1 ring-gold-500/50' : ''}`}>\r\n            {/* Main Row */}\r\n            <div\r\n                className=\"p-4 flex items-center justify-between cursor-pointer hover:bg-white/5 relative\"\r\n                onClick={() => setIsExpanded(!isExpanded)}\r\n            >\r\n                <div className=\"flex items-center gap-4\">\r\n                    {/* Time Column */}\r\n                    <div className=\"flex flex-col items-center justify-center w-[70px] h-[70px] bg-richblack-900 rounded-lg border border-white/10 shrink-0\">\r\n                        <span className=\"text-lg font-bold text-white leading-none mb-1\">{appointment.appointment_time}</span>\r\n                        <span className=\"text-[10px] text-white/40 font-mono\">{endTimeStr}</span>\r\n                    </div>\r\n\r\n                    {/* Info Column */}\r\n                    <div>\r\n                        <div className=\"flex items-center gap-2 mb-1\">\r\n                            <h3 className=\"font-bold text-white text-lg\">{appointment.client_name}</h3>\r\n                            {appointment.is_first_visit && (\r\n                                <span className=\"text-[10px] bg-emerald-500/20 text-emerald-300 px-2 py-0.5 rounded-full border border-emerald-500/30 font-bold whitespace-nowrap flex items-center gap-1\">\r\n                                    <Star className=\"w-3 h-3 fill-emerald-300 text-emerald-300\" /> First Visit\r\n                                </span>\r\n                            )}\r\n                            {appointment.is_regular && (\r\n                                <span className=\"text-[10px] bg-gold-500/20 text-gold-400 px-2 py-0.5 rounded-full border border-gold-500/30 font-bold whitespace-nowrap\">\r\n                                    ⭐ Regular\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                        <p className=\"text-gold-500 text-sm\">{appointment.service_name} <span className=\"text-white/30 text-xs\">• {duration} min</span></p>\r\n\r\n                        {/* Lateness Warning */}\r\n                        {isLate && (\r\n                            <div className={`mt-2 inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold animate-pulse ${minutesLate > 30 ? 'bg-red-500/20 text-red-400' : 'bg-orange-500/20 text-orange-400'}`}>\r\n                                <Clock className=\"w-3 h-3\" />\r\n                                {minutesLate > 30 ? `Late: ${minutesLate}m (Mark No-Show?)` : `running late (${minutesLate}m)`}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-3\">\r\n                    <span className={`hidden sm:inline-block text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded border ${statusColors[appointment.status] || statusColors.confirmed}`}>\r\n                        {appointment.status.replace('_', ' ')}\r\n                    </span>\r\n\r\n                    {/* Menu Button */}\r\n                    <div className=\"relative\">\r\n                        <button\r\n                            onClick={(e) => { e.stopPropagation(); setShowMenu(!showMenu); }}\r\n                            className=\"p-2 hover:bg-white/10 rounded-full text-white/40\"\r\n                        >\r\n                            <MoreVertical className=\"w-5 h-5\" />\r\n                        </button>\r\n\r\n                        {/* Dropdown Menu */}\r\n                        {showMenu && (\r\n                            <div className=\"absolute right-0 top-10 w-48 bg-richblack-900 border border-white/10 rounded-xl shadow-xl z-50 overflow-hidden\">\r\n                                <a\r\n                                    href={`tel:${appointment.client_phone}`}\r\n                                    className=\"flex items-center gap-3 px-4 py-3 hover:bg-white/5 text-sm text-white/80 transition-colors\"\r\n                                    onClick={(e) => e.stopPropagation()}\r\n                                >\r\n                                    <Phone className=\"w-4 h-4 text-gold-500\" /> Call Client\r\n                                </a>\r\n                                <a\r\n                                    href={`sms:${appointment.client_phone}`}\r\n                                    className=\"flex items-center gap-3 px-4 py-3 hover:bg-white/5 text-sm text-white/80 transition-colors\"\r\n                                    onClick={(e) => e.stopPropagation()}\r\n                                >\r\n                                    <MessageSquare className=\"w-4 h-4 text-blue-500\" /> Send SMS\r\n                                </a>\r\n                                {!isDone && (\r\n                                    <>\r\n                                        <div className=\"h-px bg-white/10 mx-2\" />\r\n                                        <button\r\n                                            onClick={(e) => { e.stopPropagation(); handleStatusUpdate('no_show'); }}\r\n                                            className=\"w-full flex items-center gap-3 px-4 py-3 hover:bg-red-500/10 text-sm text-red-400 transition-colors text-left\"\r\n                                        >\r\n                                            <XCircle className=\"w-4 h-4\" /> Mark No-Show\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={(e) => { e.stopPropagation(); handleStatusUpdate('cancelled'); }}\r\n                                            className=\"w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 text-sm text-white/60 hover:text-white transition-colors text-left\"\r\n                                        >\r\n                                            <XCircle className=\"w-4 h-4\" /> Cancel Booking\r\n                                        </button>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Expanded Details */}\r\n            {isExpanded && (\r\n                <div className=\"px-4 pb-4 pt-0 space-y-4 border-t border-white/5 mt-2 shadow-inner\">\r\n\r\n                    {/* Home Service Badge */}\r\n                    {appointment.type === 'home' && (\r\n                        <div className=\"bg-orange-500/10 border border-orange-500/20 p-3 rounded-lg flex items-start gap-3 mt-4\">\r\n                            <Home className=\"w-5 h-5 text-orange-500 shrink-0 mt-0.5\" />\r\n                            <div className=\"flex-1\">\r\n                                <p className=\"text-orange-400 text-xs font-bold uppercase tracking-wider mb-1\">Home Service Appointment</p>\r\n                                <p className=\"text-white text-sm mb-2\">{appointment.home_address || 'No address provided'}</p>\r\n                                <a\r\n                                    href={`https://maps.google.com/?q=${encodeURIComponent(appointment.home_address)}`}\r\n                                    target=\"_blank\"\r\n                                    rel=\"noopener noreferrer\"\r\n                                    className=\"inline-flex items-center gap-1 text-xs text-orange-400 hover:text-orange-300 underline\"\r\n                                    onClick={(e) => e.stopPropagation()}\r\n                                >\r\n                                    <MapPin className=\"w-3 h-3\" /> Open in Maps <ExternalLink className=\"w-3 h-3\" />\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4 mt-4 text-sm text-white/60\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <Phone className=\"w-4 h-4 text-gold-500\" />\r\n                            <a href={`tel:${appointment.client_phone}`} className=\"hover:text-white transition-colors underline decoration-white/20\">{appointment.client_phone}</a>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <User className=\"w-4 h-4 text-gold-500\" />\r\n                            <span>{appointment.addons && appointment.addons.length > 0 ? `+ ${appointment.addons.join(', ')}` : 'No Add-ons'}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Notes Section */}\r\n                    <div className=\"bg-richblack-900/50 p-3 rounded-lg border border-white/5\">\r\n                        <div className=\"flex justify-between items-center mb-2\">\r\n                            <h4 className=\"text-xs uppercase tracking-widest text-white/40 font-bold flex items-center gap-2\">\r\n                                <MessageSquare className=\"w-3 h-3\" /> Client Notes\r\n                            </h4>\r\n                            {!isEditingNote && (\r\n                                <button onClick={() => setIsEditingNote(true)} className=\"text-xs text-gold-500 hover:underline\">Edit</button>\r\n                            )}\r\n                        </div>\r\n\r\n                        {isEditingNote ? (\r\n                            <div className=\"space-y-2\">\r\n                                <textarea\r\n                                    className=\"w-full bg-richblack-800 border border-white/10 rounded p-2 text-sm text-white focus:outline-none focus:border-gold-500\"\r\n                                    rows={3}\r\n                                    value={note}\r\n                                    onChange={(e) => setNote(e.target.value)}\r\n                                    placeholder=\"Add preferences, fade type, etc...\"\r\n                                />\r\n                                <div className=\"flex justify-end gap-2\">\r\n                                    <button onClick={() => setIsEditingNote(false)} className=\"text-xs text-white/40 hover:text-white px-2 py-1\">Cancel</button>\r\n                                    <button onClick={handleSaveNote} disabled={loading} className=\"text-xs bg-gold-500 text-black font-bold px-3 py-1 rounded hover:opacity-90\">Save</button>\r\n                                </div>\r\n                            </div>\r\n                        ) : (\r\n                            <p className=\"text-sm text-white/80 italic\">{note || 'No notes yet.'}</p>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Quick Actions */}\r\n                    {!isDone && (\r\n                        <div className=\"pt-2\">\r\n                            <button\r\n                                onClick={(e) => { e.stopPropagation(); handleStatusUpdate('completed'); }}\r\n                                disabled={loading}\r\n                                className=\"w-full bg-green-500 hover:bg-green-600 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-lg shadow-green-900/20\"\r\n                            >\r\n                                <CheckCircle className=\"w-5 h-5\" /> Mark as Completed\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\staff\\ChangePinModal.tsx","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\nC:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\staff\\ChangePinModal.tsx:203:93\n  201 |                                 <div className=\"space-y-4\">\n  202 |                                     <p className=\"text-white/60 text-sm text-center\">Confirm your new PIN</p>\n> 203 |                                     {renderPinInput(confirmPin, setConfirmPin, confirmRefs, handleSubmit)}\n      |                                                                                             ^^^^^^^^^^^^ Cannot access ref value during render\n  204 |                                 </div>\n  205 |                             )}\n  206 |","line":203,"column":93,"nodeType":null,"endLine":203,"endColumn":105}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useRef } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { KeyRound, X, Loader2, CheckCircle, AlertCircle } from 'lucide-react';\r\nimport { changeStaffPin } from '@/app/admin/dashboard/staff/actions';\r\n\r\ninterface ChangePinModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    staffId: string;\r\n}\r\n\r\nexport function ChangePinModal({ isOpen, onClose, staffId }: ChangePinModalProps) {\r\n    const [currentPin, setCurrentPin] = useState(['', '', '', '']);\r\n    const [newPin, setNewPin] = useState(['', '', '', '']);\r\n    const [confirmPin, setConfirmPin] = useState(['', '', '', '']);\r\n    const [step, setStep] = useState<'current' | 'new' | 'confirm'>('current');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState(false);\r\n\r\n    const currentRefs = useRef<(HTMLInputElement | null)[]>([]);\r\n    const newRefs = useRef<(HTMLInputElement | null)[]>([]);\r\n    const confirmRefs = useRef<(HTMLInputElement | null)[]>([]);\r\n\r\n    const handlePinChange = (\r\n        index: number,\r\n        value: string,\r\n        pin: string[],\r\n        setPin: (p: string[]) => void,\r\n        refs: React.MutableRefObject<(HTMLInputElement | null)[]>,\r\n        onComplete?: () => void\r\n    ) => {\r\n        if (value && !/^\\d$/.test(value)) return;\r\n\r\n        const newPinArray = [...pin];\r\n        newPinArray[index] = value;\r\n        setPin(newPinArray);\r\n        setError('');\r\n\r\n        if (value && index < 3) {\r\n            refs.current[index + 1]?.focus();\r\n        }\r\n\r\n        if (value && index === 3 && onComplete) {\r\n            setTimeout(onComplete, 100);\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (\r\n        index: number,\r\n        e: React.KeyboardEvent,\r\n        pin: string[],\r\n        refs: React.MutableRefObject<(HTMLInputElement | null)[]>\r\n    ) => {\r\n        if (e.key === 'Backspace' && !pin[index] && index > 0) {\r\n            refs.current[index - 1]?.focus();\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        const currentPinStr = currentPin.join('');\r\n        const newPinStr = newPin.join('');\r\n        const confirmPinStr = confirmPin.join('');\r\n\r\n        if (newPinStr !== confirmPinStr) {\r\n            setError('New PINs do not match');\r\n            setStep('new');\r\n            setNewPin(['', '', '', '']);\r\n            setConfirmPin(['', '', '', '']);\r\n            newRefs.current[0]?.focus();\r\n            return;\r\n        }\r\n\r\n        setIsLoading(true);\r\n        setError('');\r\n\r\n        const result = await changeStaffPin(staffId, currentPinStr, newPinStr);\r\n\r\n        setIsLoading(false);\r\n\r\n        if (result.success) {\r\n            setSuccess(true);\r\n            setTimeout(() => {\r\n                onClose();\r\n                // Reset state\r\n                setCurrentPin(['', '', '', '']);\r\n                setNewPin(['', '', '', '']);\r\n                setConfirmPin(['', '', '', '']);\r\n                setStep('current');\r\n                setSuccess(false);\r\n            }, 1500);\r\n        } else {\r\n            setError(result.error || 'Failed to change PIN');\r\n            if (result.error?.includes('Current PIN')) {\r\n                setStep('current');\r\n                setCurrentPin(['', '', '', '']);\r\n                currentRefs.current[0]?.focus();\r\n            }\r\n        }\r\n    };\r\n\r\n    const renderPinInput = (\r\n        pin: string[],\r\n        setPin: (p: string[]) => void,\r\n        refs: React.MutableRefObject<(HTMLInputElement | null)[]>,\r\n        onComplete?: () => void\r\n    ) => (\r\n        <div className=\"flex justify-center gap-3\">\r\n            {pin.map((digit, index) => (\r\n                <input\r\n                    key={index}\r\n                    ref={(el) => { refs.current[index] = el; }}\r\n                    type=\"password\"\r\n                    inputMode=\"numeric\"\r\n                    maxLength={1}\r\n                    value={digit}\r\n                    onChange={(e) => handlePinChange(index, e.target.value, pin, setPin, refs, onComplete)}\r\n                    onKeyDown={(e) => handleKeyDown(index, e, pin, refs)}\r\n                    disabled={isLoading}\r\n                    className=\"w-12 h-14 text-center text-xl font-bold bg-richblack-900 border-2 border-white/10 rounded-xl text-white focus:outline-none focus:border-gold-500 transition-colors\"\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n                className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70\"\r\n                onClick={onClose}\r\n            >\r\n                <motion.div\r\n                    initial={{ opacity: 0, scale: 0.95 }}\r\n                    animate={{ opacity: 1, scale: 1 }}\r\n                    exit={{ opacity: 0, scale: 0.95 }}\r\n                    onClick={(e) => e.stopPropagation()}\r\n                    className=\"bg-richblack-800 border border-white/10 rounded-2xl p-6 w-full max-w-sm\"\r\n                >\r\n                    {/* Header */}\r\n                    <div className=\"flex items-center justify-between mb-6\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <div className=\"w-10 h-10 bg-gold-500/10 rounded-full flex items-center justify-center\">\r\n                                <KeyRound className=\"w-5 h-5 text-gold-500\" />\r\n                            </div>\r\n                            <h3 className=\"text-lg font-bold text-white\">Change PIN</h3>\r\n                        </div>\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"p-2 text-white/40 hover:text-white hover:bg-white/5 rounded-lg\"\r\n                        >\r\n                            <X className=\"w-5 h-5\" />\r\n                        </button>\r\n                    </div>\r\n\r\n                    {success ? (\r\n                        <div className=\"text-center py-8\">\r\n                            <div className=\"w-16 h-16 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                                <CheckCircle className=\"w-8 h-8 text-green-500\" />\r\n                            </div>\r\n                            <p className=\"text-green-500 font-bold\">PIN Changed Successfully!</p>\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            {/* Step Indicator */}\r\n                            <div className=\"flex justify-center gap-2 mb-6\">\r\n                                {['current', 'new', 'confirm'].map((s, i) => (\r\n                                    <div\r\n                                        key={s}\r\n                                        className={`w-2 h-2 rounded-full transition-colors ${step === s ? 'bg-gold-500' :\r\n                                                ['current', 'new', 'confirm'].indexOf(step) > i ? 'bg-gold-500/50' : 'bg-white/10'\r\n                                            }`}\r\n                                    />\r\n                                ))}\r\n                            </div>\r\n\r\n                            {/* Current PIN */}\r\n                            {step === 'current' && (\r\n                                <div className=\"space-y-4\">\r\n                                    <p className=\"text-white/60 text-sm text-center\">Enter your current PIN</p>\r\n                                    {renderPinInput(currentPin, setCurrentPin, currentRefs, () => setStep('new'))}\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* New PIN */}\r\n                            {step === 'new' && (\r\n                                <div className=\"space-y-4\">\r\n                                    <p className=\"text-white/60 text-sm text-center\">Enter your new PIN</p>\r\n                                    {renderPinInput(newPin, setNewPin, newRefs, () => setStep('confirm'))}\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Confirm PIN */}\r\n                            {step === 'confirm' && (\r\n                                <div className=\"space-y-4\">\r\n                                    <p className=\"text-white/60 text-sm text-center\">Confirm your new PIN</p>\r\n                                    {renderPinInput(confirmPin, setConfirmPin, confirmRefs, handleSubmit)}\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Error */}\r\n                            {error && (\r\n                                <div className=\"flex items-center justify-center gap-2 text-red-500 text-sm mt-4\">\r\n                                    <AlertCircle className=\"w-4 h-4\" />\r\n                                    <span>{error}</span>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Loading */}\r\n                            {isLoading && (\r\n                                <div className=\"flex items-center justify-center gap-2 text-gold-500 mt-4\">\r\n                                    <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                                    <span className=\"text-sm\">Changing PIN...</span>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Navigation */}\r\n                            <div className=\"flex gap-3 mt-6\">\r\n                                {step !== 'current' && (\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            if (step === 'new') setStep('current');\r\n                                            if (step === 'confirm') setStep('new');\r\n                                        }}\r\n                                        className=\"flex-1 py-3 rounded-xl font-bold border border-white/10 text-white/60 hover:bg-white/5\"\r\n                                    >\r\n                                        Back\r\n                                    </button>\r\n                                )}\r\n                                <button\r\n                                    onClick={() => {\r\n                                        if (step === 'current' && currentPin.join('').length === 4) setStep('new');\r\n                                        if (step === 'new' && newPin.join('').length === 4) setStep('confirm');\r\n                                        if (step === 'confirm' && confirmPin.join('').length === 4) handleSubmit();\r\n                                    }}\r\n                                    disabled={isLoading || (\r\n                                        step === 'current' ? currentPin.join('').length !== 4 :\r\n                                            step === 'new' ? newPin.join('').length !== 4 :\r\n                                                confirmPin.join('').length !== 4\r\n                                    )}\r\n                                    className=\"flex-1 py-3 rounded-xl font-bold bg-gold-500 text-black hover:bg-gold-400 disabled:opacity-50\"\r\n                                >\r\n                                    {step === 'confirm' ? 'Change PIN' : 'Next'}\r\n                                </button>\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </motion.div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\staff\\DashboardHeader.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CalendarIcon' is defined but never used.","line":4,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":61,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CalendarIcon"},"fix":{"range":[127,153],"text":""},"desc":"Remove unused variable \"CalendarIcon\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useSearchParams, useRouter, usePathname } from 'next/navigation';\r\nimport { ChevronLeft, ChevronRight, Calendar as CalendarIcon, AlertTriangle, X } from 'lucide-react';\r\nimport { format, addDays, subDays } from 'date-fns';\r\nimport { useState } from 'react';\r\n\r\nimport { WalkInModal } from './WalkInModal';\r\n\r\nexport function DashboardHeader({ earnings = 0, target = 500 }: { earnings?: number, target?: number }) {\r\n    const router = useRouter();\r\n    const pathname = usePathname();\r\n    const searchParams = useSearchParams();\r\n\r\n    // Get date from query string or default to today\r\n    const dateParam = searchParams.get('date');\r\n    const currentDate = dateParam ? new Date(dateParam) : new Date();\r\n\r\n    const [isEmergencyModalOpen, setIsEmergencyModalOpen] = useState(false);\r\n    const [isWalkInModalOpen, setIsWalkInModalOpen] = useState(false);\r\n    const [emergencyReason, setEmergencyReason] = useState('sick'); // Default reason\r\n\r\n    const changeDate = (days: number) => {\r\n        const newDate = days > 0 ? addDays(currentDate, days) : subDays(currentDate, Math.abs(days));\r\n        const formatted = format(newDate, 'yyyy-MM-dd');\r\n        router.push(`${pathname}?date=${formatted}`);\r\n    };\r\n\r\n    const progressPercentage = Math.min((earnings / target) * 100, 100);\r\n\r\n    return (\r\n        <div className=\"flex flex-col sm:flex-row justify-between items-end gap-4 mb-8 border-b border-white/5 pb-8\">\r\n            <div className=\"flex-1 w-full sm:w-auto\">\r\n                <div className=\"flex items-center gap-4 mb-2\">\r\n                    <button onClick={() => changeDate(-1)} className=\"p-2 bg-white/5 hover:bg-white/10 rounded-lg text-white transition-colors\">\r\n                        <ChevronLeft className=\"w-5 h-5\" />\r\n                    </button>\r\n\r\n                    <div className=\"text-center flex-1 sm:flex-none\">\r\n                        <h1 className=\"text-3xl font-display font-bold text-white\">\r\n                            {format(currentDate, 'MMMM do')}\r\n                        </h1>\r\n                        <p className=\"text-white/40 text-sm\">\r\n                            {format(currentDate, 'EEEE, yyyy')}\r\n                        </p>\r\n                    </div>\r\n\r\n                    <button onClick={() => changeDate(1)} className=\"p-2 bg-white/5 hover:bg-white/10 rounded-lg text-white transition-colors\">\r\n                        <ChevronRight className=\"w-5 h-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={() => router.push(`${pathname}?date=${format(new Date(), 'yyyy-MM-dd')}`)}\r\n                        className=\"text-xs bg-gold-500/10 text-gold-500 px-3 py-1 rounded-full border border-gold-500/20 hover:bg-gold-500/20\"\r\n                    >\r\n                        Jump to Today\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setIsWalkInModalOpen(true)}\r\n                        className=\"text-xs bg-white/10 text-white px-3 py-1 rounded-full border border-white/20 hover:bg-white/20 flex items-center gap-1 font-bold\"\r\n                    >\r\n                        + Walk-In\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setIsEmergencyModalOpen(true)}\r\n                        className=\"text-xs bg-red-500/10 text-red-500 px-3 py-1 rounded-full border border-red-500/20 hover:bg-red-500/20 flex items-center gap-1\"\r\n                    >\r\n                        <AlertTriangle className=\"w-3 h-3\" /> Mark Unavailable\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <WalkInModal isOpen={isWalkInModalOpen} onClose={() => setIsWalkInModalOpen(false)} currentDate={currentDate} />\r\n\r\n            <div className=\"text-right hidden sm:block w-64\">\r\n                <div className=\"flex justify-between items-end mb-2\">\r\n                    <p className=\"text-xs uppercase tracking-widest text-gold-500\">Daily Goal</p>\r\n                    <p className=\"text-xs text-white/60\">GHS {earnings} / {target}</p>\r\n                </div>\r\n                <div className=\"h-2 w-full bg-richblack-800 rounded-full overflow-hidden relative\">\r\n                    <div className=\"absolute inset-0 bg-white/5\" />\r\n                    <div\r\n                        className=\"h-full bg-gradient-to-r from-gold-600 to-gold-400 transition-all duration-1000 ease-out\"\r\n                        style={{ width: `${progressPercentage}%` }}\r\n                    />\r\n                </div>\r\n                <p className=\"text-[10px] text-white/30 mt-1 text-right italic\">\r\n                    {progressPercentage >= 100 ? 'Goal reached! 🎉' : `${(target - earnings).toFixed(0)} more to reach target`}\r\n                </p>\r\n            </div>\r\n\r\n            {/* Emergency Modal */}\r\n            {isEmergencyModalOpen && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4\">\r\n                    <div className=\"bg-richblack-800 border border-red-500/30 w-full max-w-md rounded-2xl p-6 shadow-2xl relative\">\r\n                        <button\r\n                            onClick={() => setIsEmergencyModalOpen(false)}\r\n                            className=\"absolute top-4 right-4 text-white/30 hover:text-white\"\r\n                        >\r\n                            <X className=\"w-5 h-5\" />\r\n                        </button>\r\n\r\n                        <div className=\"w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-4 ring-1 ring-red-500/30\">\r\n                            <AlertTriangle className=\"w-8 h-8 text-red-500\" />\r\n                        </div>\r\n                        <h3 className=\"text-2xl font-bold text-white text-center mb-2\">Mark Unavailable?</h3>\r\n                        <p className=\"text-white/60 text-center mb-6 text-sm\">\r\n                            This will block your schedule for the rest of the day and notify any booked clients.\r\n                        </p>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"text-xs uppercase tracking-widest text-white/40 font-bold mb-2 block\">Reason</label>\r\n                                <select\r\n                                    className=\"w-full bg-richblack-900 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-red-500 transition-colors\"\r\n                                    value={emergencyReason}\r\n                                    onChange={(e) => setEmergencyReason(e.target.value)}\r\n                                >\r\n                                    <option value=\"sick\">Feeling Unwell / Sick</option>\r\n                                    <option value=\"family\">Family Emergency</option>\r\n                                    <option value=\"equipment\">Equipment Failure</option>\r\n                                    <option value=\"other\">Other Personal Reason</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={() => {\r\n                                    alert(`Schedule blocked for reason: ${emergencyReason} (Simulation)`);\r\n                                    setIsEmergencyModalOpen(false);\r\n                                }}\r\n                                className=\"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-4 rounded-xl transition-colors shadow-lg shadow-red-900/20\"\r\n                            >\r\n                                Confirm & Block Schedule\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setIsEmergencyModalOpen(false)}\r\n                                className=\"w-full bg-white/5 hover:bg-white/10 text-white font-bold py-3 rounded-xl transition-colors\"\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\staff\\StaffControls.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'breakTime' is assigned a value but never used.","line":14,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport { useState } from 'react';\r\nimport { Coffee, Power, Clock, KeyRound } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\nimport { ChangePinModal } from './ChangePinModal';\r\n\r\ninterface StaffControlsProps {\r\n    staffName: string;\r\n    staffId: string;\r\n}\r\n\r\nexport function StaffControls({ staffName, staffId }: StaffControlsProps) {\r\n    const [status, setStatus] = useState<'active' | 'break' | 'offline'>('active');\r\n    const [breakTime, setBreakTime] = useState<number | null>(null);\r\n    const [isPinModalOpen, setIsPinModalOpen] = useState(false);\r\n\r\n    const toggleStatus = () => {\r\n        if (status === 'active') {\r\n            setStatus('offline');\r\n        } else {\r\n            setStatus('active');\r\n            setBreakTime(null);\r\n        }\r\n    };\r\n\r\n    const handleTakeBreak = () => {\r\n        if (status === 'break') {\r\n            // End break\r\n            setStatus('active');\r\n            setBreakTime(null);\r\n        } else {\r\n            // Start break\r\n            setStatus('break');\r\n            setBreakTime(Date.now());\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"bg-richblack-800 border border-white/5 p-6 rounded-2xl mb-6 shadow-xl relative overflow-hidden\">\r\n                {/* Status Indicator Glow */}\r\n                <div className={`absolute top-0 right-0 w-32 h-32 rounded-full blur-3xl -mr-10 -mt-10 transition-colors duration-500 ${status === 'active' ? 'bg-green-500/20' :\r\n                    status === 'break' ? 'bg-orange-500/20' : 'bg-red-500/10'\r\n                    }`} />\r\n\r\n                <div className=\"relative z-10\">\r\n                    <div className=\"flex justify-between items-start mb-6\">\r\n                        <div>\r\n                            <h3 className=\"text-white font-bold text-lg\">Hello, {staffName}</h3>\r\n                            <div className=\"flex items-center gap-2 mt-1\">\r\n                                <span className={`w-2 h-2 rounded-full animate-pulse ${status === 'active' ? 'bg-green-500' :\r\n                                    status === 'break' ? 'bg-orange-500' : 'bg-red-500'\r\n                                    }`} />\r\n                                <span className=\"text-sm text-white/60\">\r\n                                    Currently: <span className=\"text-white font-medium capitalize\">{status}</span>\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Main Toggle */}\r\n                        <button\r\n                            onClick={toggleStatus}\r\n                            className={`p-3 rounded-full transition-all ${status === 'offline'\r\n                                ? 'bg-white/10 text-white/40 hover:bg-green-500/20 hover:text-green-400'\r\n                                : 'bg-green-500/10 text-green-400 hover:bg-red-500/20 hover:text-red-400'\r\n                                }`}\r\n                            title={status === 'offline' ? \"Go Online\" : \"Go Offline\"}\r\n                        >\r\n                            <Power className=\"w-6 h-6\" />\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Controls */}\r\n                    <div className=\"grid grid-cols-3 gap-3\">\r\n                        <button\r\n                            onClick={handleTakeBreak}\r\n                            disabled={status === 'offline'}\r\n                            className={`flex items-center justify-center gap-2 py-3 rounded-xl font-bold transition-all ${status === 'break'\r\n                                ? 'bg-orange-500 text-black shadow-lg shadow-orange-500/20'\r\n                                : 'bg-white/5 text-white/60 hover:bg-white/10 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed'\r\n                                }`}\r\n                        >\r\n                            <Coffee className=\"w-4 h-4\" />\r\n                            {status === 'break' ? 'End' : 'Break'}\r\n                        </button>\r\n\r\n                        <button\r\n                            onClick={() => setIsPinModalOpen(true)}\r\n                            className=\"flex items-center justify-center gap-2 py-3 rounded-xl font-bold bg-white/5 text-white/60 hover:bg-gold-500/10 hover:text-gold-500 transition-all\"\r\n                        >\r\n                            <KeyRound className=\"w-4 h-4\" />\r\n                            PIN\r\n                        </button>\r\n\r\n                        <button\r\n                            className=\"flex items-center justify-center gap-2 py-3 rounded-xl font-bold bg-white/5 text-white/60 hover:bg-white/10 hover:text-white transition-all disabled:opacity-30\"\r\n                            disabled={true}\r\n                        >\r\n                            <Clock className=\"w-4 h-4\" />\r\n                            Extend\r\n                        </button>\r\n                    </div>\r\n\r\n                    {status === 'break' && (\r\n                        <motion.div\r\n                            initial={{ opacity: 0, height: 0 }}\r\n                            animate={{ opacity: 1, height: 'auto' }}\r\n                            className=\"mt-4 p-3 bg-orange-500/10 border border-orange-500/20 rounded-lg text-xs text-orange-200 text-center\"\r\n                        >\r\n                            You are unavailable for new bookings.\r\n                        </motion.div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <ChangePinModal\r\n                isOpen={isPinModalOpen}\r\n                onClose={() => setIsPinModalOpen(false)}\r\n                staffId={staffId}\r\n            />\r\n        </>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\staff\\TimeIndicator.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'position' is assigned a value but never used.","line":7,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\nexport function TimeIndicator() {\r\n    const [currentTime, setCurrentTime] = useState<string | null>(null);\r\n    const [position, setPosition] = useState(0);\r\n\r\n    useEffect(() => {\r\n        // Initial set\r\n        const updateTime = () => {\r\n            const now = new Date();\r\n            // Format time HH:MM\r\n            setCurrentTime(now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }));\r\n\r\n            // Calculate position (percentage of day form 9am to 9pm)\r\n            // Shop open 9am (540 min) to 9pm (1260 min) = 720 mins total\r\n            const startOfDay = 9 * 60; // 540\r\n            const totalMinutes = 12 * 60; // 720\r\n            const currentMinutes = (now.getHours() * 60) + now.getMinutes();\r\n\r\n            // Only show if within hours\r\n            if (currentMinutes >= startOfDay && currentMinutes <= (startOfDay + totalMinutes)) {\r\n                const percent = ((currentMinutes - startOfDay) / totalMinutes) * 100;\r\n                setPosition(percent);\r\n            }\r\n        };\r\n\r\n        updateTime();\r\n        const interval = setInterval(updateTime, 60000); // Update every minute\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    if (!currentTime) return null;\r\n\r\n    return (\r\n        <div\r\n            className=\"flex items-center gap-2 mb-4 pointer-events-none sticky z-10\"\r\n        // Simple static positioning for list view relative to \"now\"\r\n        // For a list view, we might just want to insert it between items, but since we map items,\r\n        // we will just make it a prominent \"NOW\" badge at the top for specific current time context\r\n        // OR if we want it to float over a timeline, that's different.\r\n        // Requirement was: \"Red line or highlighted section showing NOW: 11:23 AM\"\r\n        >\r\n            <div className=\"w-16 text-right\">\r\n                <span className=\"text-red-500 font-bold text-sm bg-richblack-900 px-1\">{currentTime}</span>\r\n            </div>\r\n            <div className=\"flex-1 h-px bg-red-500 relative\">\r\n                <div className=\"absolute right-0 -top-1 w-2 h-2 bg-red-500 rounded-full\" />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\staff\\WalkInModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":73,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { X, UserPlus, Calendar, Clock, Phone, Loader2, CheckCircle } from 'lucide-react';\r\nimport { format } from 'date-fns';\r\nimport { createAppointment } from '@/actions/booking';\r\n\r\ninterface WalkInModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    currentDate?: Date;\r\n}\r\n\r\nconst POPULAR_SERVICES = [\r\n    { name: 'Haircut', duration: 45, price: 50 },\r\n    { name: 'Haircut + Beard', duration: 60, price: 70 },\r\n    { name: 'Shape Up / Line Up', duration: 20, price: 30 },\r\n    { name: 'Kids Cut', duration: 30, price: 40 },\r\n    { name: 'Shave', duration: 30, price: 40 },\r\n    { name: 'Dye / Color', duration: 60, price: 100 },\r\n];\r\n\r\nexport function WalkInModal({ isOpen, onClose, currentDate = new Date() }: WalkInModalProps) {\r\n    const [loading, setLoading] = useState(false);\r\n    const [step, setStep] = useState<'form' | 'success'>('form');\r\n\r\n    // Form State\r\n    const [clientName, setClientName] = useState('');\r\n    const [clientPhone, setClientPhone] = useState('');\r\n    const [clientBirthday, setClientBirthday] = useState('');\r\n    const [selectedService, setSelectedService] = useState(POPULAR_SERVICES[0]);\r\n    const [customService, setCustomService] = useState('');\r\n    const [time, setTime] = useState(format(new Date(), 'HH:mm')); // Default to now\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleSubmit = async () => {\r\n        setLoading(true);\r\n\r\n        const serviceName = customService || selectedService.name;\r\n        const finalClientName = clientName.trim() || 'Walk-In Client';\r\n        const formattedDate = format(currentDate, 'yyyy-MM-dd');\r\n\r\n        // Construct booking data\r\n        const formData = {\r\n            reference: `WALKIN-${Date.now()}`,\r\n            clientName: finalClientName,\r\n            clientEmail: `walkin-${Date.now()}@noir.internal`,\r\n            clientPhone: clientPhone || 'N/A',\r\n            date: formattedDate,\r\n            time: time,\r\n            barberId: 'current-staff-id',\r\n            serviceName: serviceName,\r\n            servicePrice: selectedService.price,\r\n            duration: selectedService.duration,\r\n            addons: [],\r\n            totalAmount: selectedService.price,\r\n            type: 'walk_in' as const,\r\n            birthday: clientBirthday,\r\n            status: 'confirmed' as const\r\n        };\r\n\r\n        try {\r\n            await createAppointment(formData);\r\n            setStep('success');\r\n            // Auto close after 2 seconds\r\n            setTimeout(() => {\r\n                onClose();\r\n                setStep('form');\r\n                setClientName('');\r\n                setClientPhone('');\r\n            }, 2000);\r\n        } catch (error) {\r\n            alert('Failed to log walk-in. Try again.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4 animate-in fade-in duration-200\">\r\n            <div className=\"bg-richblack-800 border border-white/10 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]\">\r\n\r\n                {/* Header */}\r\n                <div className=\"p-4 border-b border-white/5 flex justify-between items-center bg-richblack-900/50\">\r\n                    <h3 className=\"text-lg font-bold text-white flex items-center gap-2\">\r\n                        <UserPlus className=\"w-5 h-5 text-gold-500\" />\r\n                        Log Walk-In\r\n                    </h3>\r\n                    <button onClick={onClose} className=\"text-white/40 hover:text-white p-1 rounded-full hover:bg-white/10\">\r\n                        <X className=\"w-5 h-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {step === 'success' ? (\r\n                    <div className=\"flex-1 flex flex-col items-center justify-center p-8 text-center min-h-[300px]\">\r\n                        <div className=\"w-20 h-20 bg-green-500/10 rounded-full flex items-center justify-center mb-6 ring-1 ring-green-500/30\">\r\n                            <CheckCircle className=\"w-10 h-10 text-green-500\" />\r\n                        </div>\r\n                        <h4 className=\"text-2xl font-bold text-white mb-2\">Walk-In Logged!</h4>\r\n                        <p className=\"text-white/60\">Schedule updated.</p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"p-4 space-y-5 overflow-y-auto custom-scrollbar\">\r\n\r\n                        {/* Service Selection */}\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-xs uppercase tracking-widest text-white/40 font-bold\">Service</label>\r\n                            <div className=\"grid grid-cols-2 gap-2\">\r\n                                {POPULAR_SERVICES.slice(0, 4).map(s => (\r\n                                    <button\r\n                                        key={s.name}\r\n                                        onClick={() => { setSelectedService(s); setCustomService(''); }}\r\n                                        className={`px-3 py-2 rounded-lg text-sm font-medium border transition-all text-left ${selectedService.name === s.name && !customService\r\n                                            ? 'bg-gold-500 text-black border-gold-500'\r\n                                            : 'bg-white/5 text-white/80 border-transparent hover:bg-white/10'\r\n                                            }`}\r\n                                    >\r\n                                        {s.name}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                            {/* Other Service Input */}\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Or type custom service...\"\r\n                                className=\"w-full bg-richblack-900 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-gold-500 text-sm mt-2\"\r\n                                value={customService}\r\n                                onChange={(e) => setCustomService(e.target.value)}\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Client Details */}\r\n                        <div className=\"space-y-3 pt-2 border-t border-white/5\">\r\n                            <label className=\"text-xs uppercase tracking-widest text-white/40 font-bold\">Client Details</label>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Client Name (e.g. Kwame)\"\r\n                                    className=\"w-full bg-richblack-900 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-gold-500 text-sm\"\r\n                                    value={clientName}\r\n                                    onChange={(e) => setClientName(e.target.value)}\r\n                                    autoFocus\r\n                                />\r\n                                <div className=\"grid grid-cols-2 gap-2\">\r\n                                    <div className=\"relative\">\r\n                                        <Phone className=\"absolute left-3 top-3.5 w-4 h-4 text-white/20\" />\r\n                                        <input\r\n                                            type=\"tel\"\r\n                                            placeholder=\"Phone (Optional)\"\r\n                                            className=\"w-full bg-richblack-900 border border-white/10 rounded-lg pl-10 pr-4 py-3 text-white focus:outline-none focus:border-gold-500 text-sm\"\r\n                                            value={clientPhone}\r\n                                            onChange={(e) => setClientPhone(e.target.value)}\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"relative\">\r\n                                        <Calendar className=\"absolute left-3 top-3.5 w-4 h-4 text-white/20\" />\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            placeholder=\"Birthday (DD/MM)\"\r\n                                            className=\"w-full bg-richblack-900 border border-white/10 rounded-lg pl-10 pr-4 py-3 text-white focus:outline-none focus:border-gold-500 text-sm\"\r\n                                            value={clientBirthday}\r\n                                            onChange={(e) => setClientBirthday(e.target.value)}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Time & Payment */}\r\n                        <div className=\"space-y-3 pt-2 border-t border-white/5\">\r\n                            <label className=\"text-xs uppercase tracking-widest text-white/40 font-bold\">Timing</label>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"relative flex-1\">\r\n                                    <Clock className=\"absolute left-3 top-3.5 w-4 h-4 text-white/20\" />\r\n                                    <input\r\n                                        type=\"time\"\r\n                                        className=\"w-full bg-richblack-900 border border-white/10 rounded-lg pl-10 pr-4 py-3 text-white focus:outline-none focus:border-gold-500 text-sm\"\r\n                                        value={time}\r\n                                        onChange={(e) => setTime(e.target.value)}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"px-4 py-3 bg-white/5 rounded-lg text-sm text-white/60\">\r\n                                    {selectedService.duration} min\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                )}\r\n\r\n                {/* Footer */}\r\n                {step === 'form' && (\r\n                    <div className=\"p-4 border-t border-white/5 bg-richblack-900/50\">\r\n                        <button\r\n                            onClick={handleSubmit}\r\n                            disabled={loading}\r\n                            className=\"w-full bg-gold-500 hover:bg-gold-400 text-black font-bold py-3 rounded-xl transition-colors shadow-lg shadow-gold-500/20 flex items-center justify-center gap-2\"\r\n                        >\r\n                            {loading ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : <CheckCircle className=\"w-5 h-5\" />}\r\n                            {loading ? 'Confirming...' : 'Confirm Walk-In'}\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\ui\\DownloadReceiptButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\ui\\ImageUpload.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'data' is assigned a value but never used.","line":55,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":70,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2338,2341],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2338,2341],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":97,"column":21,"nodeType":"JSXOpeningElement","endLine":104,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport { useState, useRef } from \"react\";\r\nimport { createClient } from \"@/utils/supabase/client\";\r\nimport { Loader2, Upload, X, Image as ImageIcon } from \"lucide-react\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface ImageUploadProps {\r\n    bucketName: string;\r\n    currentImage?: string | null;\r\n    onUploadComplete: (url: string) => void;\r\n    className?: string;\r\n    folderPath?: string; // e.g. \"avatars\" or \"banners\"\r\n}\r\n\r\nexport function ImageUpload({\r\n    bucketName,\r\n    currentImage,\r\n    onUploadComplete,\r\n    className,\r\n    folderPath = \"\"\r\n}: ImageUploadProps) {\r\n    const [isUploading, setIsUploading] = useState(false);\r\n    const [preview, setPreview] = useState<string | null>(currentImage || null);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const supabase = createClient();\r\n\r\n    const handleFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        // Basic validation\r\n        if (!file.type.startsWith(\"image/\")) {\r\n            setError(\"Please select an image file\");\r\n            return;\r\n        }\r\n\r\n        if (file.size > 5 * 1024 * 1024) { // 5MB limit\r\n            setError(\"Image size should be less than 5MB\");\r\n            return;\r\n        }\r\n\r\n        setError(null);\r\n        setIsUploading(true);\r\n\r\n        // Create preview immediately\r\n        const objectUrl = URL.createObjectURL(file);\r\n        setPreview(objectUrl);\r\n\r\n        try {\r\n            // Create unique filename\r\n            const fileExt = file.name.split('.').pop();\r\n            const fileName = `${folderPath ? `${folderPath}/` : ''}${Math.random().toString(36).substring(2)}_${Date.now()}.${fileExt}`;\r\n\r\n            const { data, error: uploadError } = await supabase.storage\r\n                .from(bucketName)\r\n                .upload(fileName, file, {\r\n                    cacheControl: '3600',\r\n                    upsert: false\r\n                });\r\n\r\n            if (uploadError) throw uploadError;\r\n\r\n            // Get public URL\r\n            const { data: { publicUrl } } = supabase.storage\r\n                .from(bucketName)\r\n                .getPublicUrl(fileName);\r\n\r\n            onUploadComplete(publicUrl);\r\n        } catch (err: any) {\r\n            console.error(\"Upload error:\", err);\r\n            setError(err.message || \"Failed to upload image\");\r\n            setPreview(currentImage || null); // Revert preview\r\n        } finally {\r\n            setIsUploading(false);\r\n        }\r\n    };\r\n\r\n    const clearImage = () => {\r\n        setPreview(null);\r\n        onUploadComplete(\"\"); // Notify empty string (removed)\r\n        if (fileInputRef.current) fileInputRef.current.value = \"\";\r\n    };\r\n\r\n    return (\r\n        <div className={clsx(\"w-full\", className)}>\r\n            <input\r\n                type=\"file\"\r\n                ref={fileInputRef}\r\n                onChange={handleFileSelect}\r\n                accept=\"image/*\"\r\n                className=\"hidden\"\r\n            />\r\n\r\n            {preview ? (\r\n                <div className=\"relative rounded-xl overflow-hidden group border border-white/10 bg-white/5 h-48 max-h-48\">\r\n                    <img\r\n                        src={preview}\r\n                        alt=\"Preview\"\r\n                        className={clsx(\r\n                            \"w-full h-full object-cover transition-opacity\",\r\n                            isUploading ? \"opacity-50\" : \"opacity-100\"\r\n                        )}\r\n                    />\r\n\r\n                    {isUploading && (\r\n                        <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                            <Loader2 className=\"w-8 h-8 text-gold-500 animate-spin\" />\r\n                        </div>\r\n                    )}\r\n\r\n                    {!isUploading && (\r\n                        <div className=\"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2\">\r\n                            <button\r\n                                onClick={() => fileInputRef.current?.click()}\r\n                                className=\"p-2 bg-white/10 rounded-full hover:bg-white/20 text-white transition-colors\"\r\n                                title=\"Change Image\"\r\n                            >\r\n                                <Upload className=\"w-5 h-5\" />\r\n                            </button>\r\n                            <button\r\n                                onClick={clearImage}\r\n                                className=\"p-2 bg-red-500/20 rounded-full hover:bg-red-500/40 text-red-500 transition-colors\"\r\n                                title=\"Remove Image\"\r\n                            >\r\n                                <X className=\"w-5 h-5\" />\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            ) : (\r\n                <div\r\n                    onClick={() => fileInputRef.current?.click()}\r\n                    className=\"border-2 border-dashed border-white/10 rounded-xl p-8 flex flex-col items-center justify-center gap-3 cursor-pointer hover:border-gold-500/50 hover:bg-white/5 transition-all group h-full min-h-[160px]\"\r\n                >\r\n                    <div className=\"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center group-hover:bg-gold-500/10 transition-colors\">\r\n                        <ImageIcon className=\"w-6 h-6 text-white/40 group-hover:text-gold-500\" />\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                        <p className=\"text-sm font-medium text-white group-hover:text-gold-400\">Click to upload</p>\r\n                        <p className=\"text-xs text-white/40 mt-1\">PNG, JPG up to 5MB</p>\r\n                    </div>\r\n                    {error && <p className=\"text-red-400 text-xs mt-2\">{error}</p>}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\ui\\LoadingSpinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\ui\\MagneticButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\ui\\SmoothScroll.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[300,303],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[300,303],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport { ReactLenis } from \"@studio-freight/react-lenis\";\r\n\r\nexport function SmoothScroll({ children }: { children: React.ReactNode }) {\r\n    return (\r\n        <ReactLenis root options={{ lerp: 0.15, duration: 1.2, smoothWheel: true, wheelMultiplier: 1.2 }}>\r\n            {children as any}\r\n        </ReactLenis>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\components\\ui\\WhatsAppButton.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageCircle' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":23,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"MessageCircle"},"fix":{"range":[54,99],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\nimport { motion } from \"framer-motion\";\nimport { MessageCircle } from \"lucide-react\";\n\ninterface Props {\n    phone?: string | null;\n}\n\nexport function WhatsAppButton({ phone }: Props) {\n    // Clean phone number for URL (remove spaces, existing +, etc)\n    const cleanPhone = phone ? phone.replace(/[^0-9]/g, '') : \"233200000000\";\n\n    return (\n        <motion.a\n            href={`https://wa.me/${cleanPhone}?text=Hi!%20I'd%20like%20to%20book%20an%20appointment`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"fixed bottom-6 right-6 z-50 w-14 h-14 bg-green-500 hover:bg-green-600 rounded-full shadow-elevated-gold flex items-center justify-center group transition-all hover:scale-110 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-richblack-900\"\n            initial={{ scale: 0, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            transition={{\n                type: \"spring\",\n                stiffness: 260,\n                damping: 20,\n                delay: 1\n            }}\n            whileHover={{ scale: 1.1 }}\n            whileTap={{ scale: 0.95 }}\n            aria-label=\"Chat on WhatsApp\"\n        >\n            {/* Pulse Animation */}\n            <span className=\"absolute inset-0 rounded-full bg-green-500 animate-ping opacity-75\" />\n\n            {/* WhatsApp Icon */}\n            <svg\n                className=\"relative w-7 h-7 text-white z-10\"\n                fill=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n            >\n                <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z\" />\n            </svg>\n\n            {/* Tooltip */}\n            <div className=\"absolute right-full mr-3 px-3 py-2 bg-richblack-900 text-white text-sm font-medium rounded-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none shadow-elevated\">\n                Chat with us on WhatsApp\n                <div className=\"absolute top-1/2 -right-1 transform -translate-y-1/2 w-2 h-2 bg-richblack-900 rotate-45\" />\n            </div>\n        </motion.a>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\data\\barbers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\data\\mock-services.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\store\\booking.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\types\\database.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\utils\\auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\utils\\email.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\utils\\paystack.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\utils\\sms.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'to' is defined but never used.","line":48,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'message' is defined but never used.","line":48,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// =====================================================\r\n// SMS Utility - Flexible SMS Sender\r\n// =====================================================\r\n// Configure your SMS provider in .env.local:\r\n// SMS_PROVIDER=arkesel | hubtel | termii | mock\r\n// SMS_API_KEY=your_api_key\r\n// SMS_SENDER_ID=YourShopName\r\n\r\ninterface SMSResult {\r\n    success: boolean;\r\n    messageId?: string;\r\n    error?: string;\r\n}\r\n\r\ninterface SMSConfig {\r\n    provider: 'arkesel' | 'hubtel' | 'termii' | 'mock';\r\n    apiKey: string;\r\n    senderId: string;\r\n}\r\n\r\n// Get config from environment\r\nfunction getConfig(): SMSConfig {\r\n    return {\r\n        provider: (process.env.SMS_PROVIDER as SMSConfig['provider']) || 'mock',\r\n        apiKey: process.env.SMS_API_KEY || '',\r\n        senderId: process.env.SMS_SENDER_ID || 'Barbershop',\r\n    };\r\n}\r\n\r\n// Format phone number for Ghana (add country code if needed)\r\nfunction formatPhoneNumber(phone: string): string {\r\n    let cleaned = phone.replace(/\\D/g, '');\r\n\r\n    // If starts with 0, replace with 233\r\n    if (cleaned.startsWith('0')) {\r\n        cleaned = '233' + cleaned.slice(1);\r\n    }\r\n\r\n    // If doesn't start with 233, add it\r\n    if (!cleaned.startsWith('233')) {\r\n        cleaned = '233' + cleaned;\r\n    }\r\n\r\n    return cleaned;\r\n}\r\n\r\n// Mock SMS sender (for development)\r\nasync function sendMockSMS(to: string, message: string): Promise<SMSResult> {\r\n    console.log('[MOCK SMS] Sent');\r\n    return { success: true, messageId: 'mock-' + Date.now() };\r\n}\r\n\r\n// Arkesel SMS (Ghana)\r\nasync function sendArkeselSMS(to: string, message: string, config: SMSConfig): Promise<SMSResult> {\r\n    try {\r\n        const response = await fetch('https://sms.arkesel.com/api/v2/sms/send', {\r\n            method: 'POST',\r\n            headers: {\r\n                'api-key': config.apiKey,\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                sender: config.senderId,\r\n                message: message,\r\n                recipients: [to],\r\n            }),\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        if (data.status === 'success') {\r\n            return { success: true, messageId: data.data?.[0]?.id };\r\n        } else {\r\n            return { success: false, error: data.message || 'SMS failed' };\r\n        }\r\n    } catch (error) {\r\n        console.error('Arkesel SMS error:', error);\r\n        return { success: false, error: 'Network error' };\r\n    }\r\n}\r\n\r\n// Hubtel SMS (Ghana)\r\nasync function sendHubtelSMS(to: string, message: string, config: SMSConfig): Promise<SMSResult> {\r\n    try {\r\n        const response = await fetch('https://smsc.hubtel.com/v1/messages/send', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': `Basic ${Buffer.from(config.apiKey).toString('base64')}`,\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                From: config.senderId,\r\n                To: to,\r\n                Content: message,\r\n            }),\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        if (data.Status === 0) {\r\n            return { success: true, messageId: data.MessageId };\r\n        } else {\r\n            return { success: false, error: data.Message || 'SMS failed' };\r\n        }\r\n    } catch (error) {\r\n        console.error('Hubtel SMS error:', error);\r\n        return { success: false, error: 'Network error' };\r\n    }\r\n}\r\n\r\n// Termii SMS (Africa-wide)\r\nasync function sendTermiiSMS(to: string, message: string, config: SMSConfig): Promise<SMSResult> {\r\n    try {\r\n        const response = await fetch('https://api.ng.termii.com/api/sms/send', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                api_key: config.apiKey,\r\n                to: to,\r\n                from: config.senderId,\r\n                sms: message,\r\n                type: 'plain',\r\n                channel: 'generic',\r\n            }),\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        if (data.code === 'ok') {\r\n            return { success: true, messageId: data.message_id };\r\n        } else {\r\n            return { success: false, error: data.message || 'SMS failed' };\r\n        }\r\n    } catch (error) {\r\n        console.error('Termii SMS error:', error);\r\n        return { success: false, error: 'Network error' };\r\n    }\r\n}\r\n\r\n// Main SMS sending function\r\nexport async function sendSMS(to: string, message: string): Promise<SMSResult> {\r\n    const config = getConfig();\r\n    const formattedPhone = formatPhoneNumber(to);\r\n\r\n    switch (config.provider) {\r\n        case 'arkesel':\r\n            return sendArkeselSMS(formattedPhone, message, config);\r\n        case 'hubtel':\r\n            return sendHubtelSMS(formattedPhone, message, config);\r\n        case 'termii':\r\n            return sendTermiiSMS(formattedPhone, message, config);\r\n        case 'mock':\r\n        default:\r\n            return sendMockSMS(formattedPhone, message);\r\n    }\r\n}\r\n\r\n// Convenience function for PIN notification\r\nexport async function sendPinNotification(phone: string, staffName: string, pin: string): Promise<SMSResult> {\r\n    const message = `Hi ${staffName}! Your login PIN has been set to: ${pin}. Use this with your phone number to log in at the staff portal.`;\r\n    return sendSMS(phone, message);\r\n}\r\n\r\n// Appointment Reminder (24h before)\r\nexport async function sendAppointmentReminder(\r\n    booking: {\r\n        customer_name: string;\r\n        booking_date: string;\r\n        booking_time: string;\r\n        customer_phone: string;\r\n    },\r\n    shopName: string = 'His-seer Barbershop'\r\n): Promise<SMSResult> {\r\n    // Format: \"Hi John, reminder for your appointment tomorrow at 10:00 with His-seer Barbershop. See you soon!\"\r\n    const time = booking.booking_time.substring(0, 5); // \"14:00:00\" -> \"14:00\"\r\n    const message = `Hi ${booking.customer_name}, reminder for your appointment tomorrow at ${time} with ${shopName}. See you soon!`;\r\n\r\n    return sendSMS(booking.customer_phone, message);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\utils\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\utils\\supabase\\queries.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BookingAddon' is defined but never used.","line":13,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"BookingAddon"},"fix":{"range":[338,357],"text":""},"desc":"Remove unused variable \"BookingAddon\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// =====================================================\r\n// SUPABASE QUERIES - Centralized Data Access Layer\r\n// =====================================================\r\n\r\nimport { createClient } from './client';\r\nimport { hashPin } from '@/utils/auth';\r\nimport type {\r\n    Service,\r\n    Addon,\r\n    Staff,\r\n    StaffSchedule,\r\n    Booking,\r\n    BookingAddon,\r\n    ShopSettings,\r\n    CreateBookingData,\r\n    AvailableSlot,\r\n    BookingFilters,\r\n    BookingWithDetails,\r\n    DashboardStats,\r\n    BarberPerformance,\r\n    RecentTransaction,\r\n    CreateStaffInput,\r\n    UpdateStaffInput,\r\n    UpdateScheduleInput,\r\n    HeroSlide,\r\n    StaffPayroll,\r\n    Expense,\r\n    ExpenseCategory,\r\n    Customer,\r\n    Review\r\n} from '@/types/database';\r\n\r\n// =====================================================\r\n// REVIEWS\r\n// =====================================================\r\n\r\nexport async function getApprovedReviews(limit = 3): Promise<Review[]> {\r\n    const supabase = createClient();\r\n    const { data } = await supabase\r\n        .from('reviews')\r\n        .select('*')\r\n        .eq('is_approved', true)\r\n        .order('rating', { ascending: false }) // Show best first\r\n        .limit(limit);\r\n    return data || [];\r\n}\r\n\r\nexport async function createReview(review: { booking_id: string; rating: number; comment: string; customer_name: string }) {\r\n    const supabase = createClient();\r\n    return await supabase.from('reviews').insert(review);\r\n}\r\n\r\nexport async function getPendingReviews(): Promise<Review[]> {\r\n    const supabase = createClient();\r\n    const { data } = await supabase\r\n        .from('reviews')\r\n        .select('*')\r\n        .eq('is_approved', false)\r\n        .order('created_at', { ascending: false });\r\n    return data || [];\r\n}\r\n\r\nexport async function approveReview(id: string) {\r\n    const supabase = createClient();\r\n    return await supabase.from('reviews').update({ is_approved: true }).eq('id', id);\r\n}\r\n\r\nexport async function deleteReview(id: string) {\r\n    const supabase = createClient();\r\n    return await supabase.from('reviews').delete().eq('id', id);\r\n}\r\n\r\nexport async function getReviewByBooking(bookingId: string): Promise<Review | null> {\r\n    const supabase = createClient();\r\n    const { data } = await supabase\r\n        .from('reviews')\r\n        .select('*')\r\n        .eq('booking_id', bookingId)\r\n        .single();\r\n    return data;\r\n}\r\n\r\n// =====================================================\r\n// CUSTOMERS\r\n// =====================================================\r\n\r\nexport async function getCustomers(): Promise<Customer[]> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('customers')\r\n        .select('*')\r\n        .order('last_booking_date', { ascending: false });\r\n\r\n    if (error) {\r\n        console.error('Error fetching customers:', error);\r\n        return []; // Fail gracefully\r\n    }\r\n\r\n    return data || [];\r\n}\r\n\r\nexport async function getCustomerById(id: string): Promise<Customer | null> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('customers')\r\n        .select('*')\r\n        .eq('id', id)\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error fetching customer:', error);\r\n        return null;\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\nexport async function updateCustomerNotes(id: string, notes: string) {\r\n    const supabase = createClient();\r\n\r\n    const { error } = await supabase\r\n        .from('customers')\r\n        .update({ notes })\r\n        .eq('id', id);\r\n\r\n    if (error) {\r\n        console.error('Error updating customer notes:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true };\r\n}\r\n\r\n// =====================================================\r\n// SERVICES\r\n// =====================================================\r\n\r\nexport async function getServices(): Promise<Service[]> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('services')\r\n        .select('*')\r\n        .eq('is_active', true)\r\n        .order('display_order', { ascending: true });\r\n\r\n    if (error) {\r\n        console.error('Error fetching services:', error);\r\n        throw new Error('Failed to fetch services');\r\n    }\r\n\r\n    return data || [];\r\n}\r\n\r\nexport async function getServiceById(id: string): Promise<Service | null> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('services')\r\n        .select('*')\r\n        .eq('id', id)\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error fetching service:', error);\r\n        return null;\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\nexport async function createService(serviceData: Partial<Service>) {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('services')\r\n        .insert([{\r\n            name: serviceData.name,\r\n            description: serviceData.description,\r\n            price: serviceData.price,\r\n            duration_minutes: serviceData.duration_minutes,\r\n            is_active: true, // Default to active\r\n            image_url: null // Explicitly null for now as per requirement\r\n        }])\r\n        .select()\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error creating service:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true, data };\r\n}\r\n\r\nexport async function updateService(service: Partial<Service>) {\r\n    const supabase = createClient();\r\n\r\n    if (!service.id) return { success: false, error: \"Service ID required\" };\r\n\r\n    const { data, error } = await supabase\r\n        .from('services')\r\n        .update({\r\n            name: service.name,\r\n            description: service.description,\r\n            price: service.price,\r\n            duration_minutes: service.duration_minutes,\r\n            is_active: service.is_active\r\n        })\r\n        .eq('id', service.id)\r\n        .select()\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error updating service:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true, data };\r\n}\r\n\r\n// =====================================================\r\n// ADD-ONS\r\n// =====================================================\r\n\r\nexport async function getAddons(): Promise<Addon[]> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('addons')\r\n        .select('*')\r\n        .eq('is_active', true)\r\n        .order('display_order', { ascending: true });\r\n\r\n    if (error) {\r\n        console.error('Error fetching addons:', error);\r\n        throw new Error('Failed to fetch add-ons');\r\n    }\r\n\r\n    return data || [];\r\n}\r\n\r\nexport async function getAddonsByIds(ids: string[]): Promise<Addon[]> {\r\n    if (!ids || ids.length === 0) return [];\r\n\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('addons')\r\n        .select('*')\r\n        .in('id', ids);\r\n\r\n    if (error) {\r\n        console.error('Error fetching addons by IDs:', error);\r\n        return [];\r\n    }\r\n\r\n    return data || [];\r\n}\r\n\r\nexport async function createAddon(addonData: Partial<Addon>) {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('addons')\r\n        .insert([{\r\n            name: addonData.name,\r\n            description: addonData.description,\r\n            price: addonData.price,\r\n            duration_minutes: addonData.duration_minutes,\r\n            is_active: true,\r\n            display_order: 0 // Default order\r\n        }])\r\n        .select()\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error creating addon:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true, data };\r\n}\r\n\r\nexport async function updateAddon(addon: Partial<Addon>) {\r\n    const supabase = createClient();\r\n\r\n    if (!addon.id) return { success: false, error: \"Addon ID required\" };\r\n\r\n    const { data, error } = await supabase\r\n        .from('addons')\r\n        .update({\r\n            name: addon.name,\r\n            description: addon.description,\r\n            price: addon.price,\r\n            duration_minutes: addon.duration_minutes,\r\n            is_active: addon.is_active\r\n        })\r\n        .eq('id', addon.id)\r\n        .select()\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error updating addon:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true, data };\r\n}\r\n\r\n// =====================================================\r\n// STAFF\r\n// =====================================================\r\n\r\nexport async function getStaff(): Promise<Staff[]> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('staff')\r\n        .select('*')\r\n        .eq('is_active', true)\r\n        .order('name', { ascending: true });\r\n\r\n    if (error) {\r\n        console.error('Error fetching staff:', error);\r\n        throw new Error('Failed to fetch staff');\r\n    }\r\n\r\n    return data || [];\r\n}\r\n\r\nexport async function getStaffById(id: string): Promise<Staff | null> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('staff')\r\n        .select('*')\r\n        .eq('id', id)\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error fetching staff member:', error);\r\n        return null;\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\nexport async function getStaffSchedules(staffId: string): Promise<StaffSchedule[]> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('staff_schedules')\r\n        .select('*')\r\n        .eq('staff_id', staffId)\r\n        .eq('is_available', true)\r\n        .order('day_of_week', { ascending: true });\r\n\r\n    if (error) {\r\n        console.error('Error fetching staff schedules:', error);\r\n        return [];\r\n    }\r\n\r\n    return data || [];\r\n}\r\n\r\n// =====================================================\r\n// AVAILABLE TIME SLOTS\r\n// =====================================================\r\n\r\nexport async function getAvailableSlots(\r\n    staffId: string,\r\n    date: string,\r\n    durationMinutes: number = 30\r\n): Promise<string[]> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .rpc('get_available_slots', {\r\n            p_staff_id: staffId,\r\n            p_date: date,\r\n            p_duration_minutes: durationMinutes,\r\n        });\r\n\r\n    if (error) {\r\n        console.error('Error fetching available slots:', error);\r\n        return [];\r\n    }\r\n\r\n    // The RPC returns array of objects with time_slot property\r\n    return (data || []).map((slot: AvailableSlot) => slot.time_slot);\r\n}\r\n\r\n// =====================================================\r\n// BOOKINGS\r\n// =====================================================\r\n\r\nexport async function createBooking(bookingData: CreateBookingData): Promise<Booking | null> {\r\n    const supabase = createClient();\r\n\r\n    try {\r\n        // Generate unique reference code\r\n        const generateReference = () => {\r\n            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\r\n            let code = 'REF-';\r\n            for (let i = 0; i < 6; i++) {\r\n                code += chars.charAt(Math.floor(Math.random() * chars.length));\r\n            }\r\n            return code;\r\n        };\r\n\r\n        // 1. Create the booking\r\n        const { data: booking, error: bookingError } = await supabase\r\n            .from('bookings')\r\n            .insert({\r\n                reference: generateReference(),\r\n                customer_name: bookingData.customer_name,\r\n                customer_email: bookingData.customer_email,\r\n                customer_phone: bookingData.customer_phone || null,\r\n                prefer_email_only: bookingData.prefer_email_only || false,\r\n                reminder_preference: bookingData.reminder_preference || 'email_sms',\r\n                service_id: bookingData.service_id,\r\n                staff_id: bookingData.staff_id,\r\n                booking_date: bookingData.booking_date,\r\n                booking_time: bookingData.booking_time,\r\n                service_price: bookingData.service_price,\r\n                addons_price: bookingData.addons_price,\r\n                total_price: bookingData.total_price,\r\n                payment_status: 'paid',\r\n                payment_reference: bookingData.payment_reference,\r\n                paystack_reference: bookingData.paystack_reference || null,\r\n                paid_at: new Date().toISOString(),\r\n                status: 'confirmed',\r\n                customer_notes: bookingData.customer_notes || null,\r\n            })\r\n            .select()\r\n            .single();\r\n\r\n        if (bookingError) {\r\n            console.error('Error creating booking:', bookingError);\r\n            throw bookingError;\r\n        }\r\n\r\n        // 2. Create booking add-ons if any\r\n        if (bookingData.addon_ids && bookingData.addon_ids.length > 0) {\r\n            const addons = await getAddonsByIds(bookingData.addon_ids);\r\n\r\n            const bookingAddons = addons.map(addon => ({\r\n                booking_id: booking.id,\r\n                addon_id: addon.id,\r\n                addon_name: addon.name,\r\n                addon_price: addon.price,\r\n            }));\r\n\r\n            const { error: addonsError } = await supabase\r\n                .from('booking_addons')\r\n                .insert(bookingAddons);\r\n\r\n            if (addonsError) {\r\n                console.error('Error creating booking add-ons:', addonsError);\r\n                // Don't throw here - booking is already created\r\n            }\r\n        }\r\n\r\n        return booking;\r\n    } catch (error) {\r\n        console.error('Error in createBooking:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function getBookings(filters?: BookingFilters): Promise<BookingWithDetails[]> {\r\n    const supabase = createClient();\r\n\r\n    let query = supabase\r\n        .from('bookings')\r\n        .select(`\r\n      *,\r\n      service:services(*),\r\n      staff:staff(*)\r\n    `)\r\n        .order('booking_date', { ascending: false })\r\n        .order('booking_time', { ascending: false });\r\n\r\n    // Apply filters\r\n    if (filters?.staff_id) {\r\n        query = query.eq('staff_id', filters.staff_id);\r\n    }\r\n    if (filters?.customer_email) {\r\n        query = query.eq('customer_email', filters.customer_email);\r\n    }\r\n    if (filters?.booking_date) {\r\n        query = query.eq('booking_date', filters.booking_date);\r\n    }\r\n    if (filters?.status) {\r\n        query = query.eq('status', filters.status);\r\n    }\r\n    if (filters?.payment_status) {\r\n        query = query.eq('payment_status', filters.payment_status);\r\n    }\r\n    if (filters?.start_date) {\r\n        query = query.gte('booking_date', filters.start_date);\r\n    }\r\n    if (filters?.end_date) {\r\n        query = query.lte('booking_date', filters.end_date);\r\n    }\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n        console.error('Error fetching bookings:', error);\r\n        return [];\r\n    }\r\n\r\n    // Fetch add-ons for each booking\r\n    const bookingsWithAddons = await Promise.all(\r\n        (data || []).map(async (booking) => {\r\n            const { data: bookingAddons } = await supabase\r\n                .from('booking_addons')\r\n                .select('addon_id, addon_name, addon_price')\r\n                .eq('booking_id', booking.id);\r\n\r\n            return {\r\n                ...booking,\r\n                addons: bookingAddons || [],\r\n            };\r\n        })\r\n    );\r\n\r\n    return bookingsWithAddons;\r\n}\r\n\r\nexport async function getBookingById(id: string): Promise<BookingWithDetails | null> {\r\n    const supabase = createClient();\r\n\r\n    const { data: booking, error } = await supabase\r\n        .from('bookings')\r\n        .select(`\r\n      *,\r\n      service:services(*),\r\n      staff:staff(*)\r\n    `)\r\n        .eq('id', id)\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error fetching booking:', error);\r\n        return null;\r\n    }\r\n\r\n    // Fetch add-ons\r\n    const { data: bookingAddons } = await supabase\r\n        .from('booking_addons')\r\n        .select('addon_id, addon_name, addon_price')\r\n        .eq('booking_id', booking.id);\r\n\r\n    return {\r\n        ...booking,\r\n        addons: bookingAddons || [],\r\n    };\r\n}\r\n\r\n// =====================================================\r\n// SHOP SETTINGS\r\n// =====================================================\r\n\r\nexport async function getShopSettings(): Promise<ShopSettings | null> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('shop_settings')\r\n        .select('*')\r\n        .limit(1)\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error fetching shop settings:', error);\r\n        return null;\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\nexport async function updateShopSettings(settings: Partial<ShopSettings>) {\r\n    const supabase = createClient();\r\n\r\n    if (!settings.id) {\r\n        return { success: false, error: \"Settings ID is required for update\" };\r\n    }\r\n\r\n    const { data, error } = await supabase\r\n        .from('shop_settings')\r\n        .update({\r\n            shop_name: settings.shop_name,\r\n            shop_email: settings.shop_email,\r\n            shop_phone: settings.shop_phone,\r\n            shop_address: settings.shop_address,\r\n            business_hours: settings.business_hours,\r\n            booking_policies: settings.booking_policies,\r\n            cancellation_hours: settings.cancellation_hours,\r\n            slot_duration_minutes: settings.slot_duration_minutes,\r\n            advance_booking_days: settings.advance_booking_days\r\n        })\r\n        .eq('id', settings.id)\r\n        .select()\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error updating shop settings:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true, data };\r\n}\r\n\r\n// =====================================================\r\n// UTILITY FUNCTIONS\r\n// =====================================================\r\n\r\nexport async function calculateBookingDuration(\r\n    serviceId: string,\r\n    addonIds: string[]\r\n): Promise<number> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .rpc('calculate_booking_duration', {\r\n            p_service_id: serviceId,\r\n            p_addon_ids: addonIds,\r\n        });\r\n\r\n    if (error) {\r\n        console.error('Error calculating booking duration:', error);\r\n        return 30; // Default fallback\r\n    }\r\n\r\n    return data || 30;\r\n}\r\n\r\n// =====================================================\r\n// DASHBOARD STATS\r\n// =====================================================\r\n\r\nexport async function getDashboardStats(): Promise<DashboardStats | null> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .rpc('get_dashboard_stats');\r\n\r\n    if (error) {\r\n        console.error('Error fetching dashboard stats:', error);\r\n        return null;\r\n    }\r\n\r\n    return data as DashboardStats;\r\n}\r\n\r\nexport async function getBarberPerformance(): Promise<BarberPerformance[]> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .rpc('get_barber_performance');\r\n\r\n    if (error) {\r\n        console.error('Error fetching barber performance:', error);\r\n        return [];\r\n    }\r\n\r\n    return (data || []) as BarberPerformance[];\r\n}\r\n\r\nexport async function getRecentTransactions(limit: number = 10): Promise<RecentTransaction[]> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .rpc('get_recent_transactions', { limit_count: limit });\r\n\r\n    if (error) {\r\n        console.error('Error fetching recent transactions:', error);\r\n        return [];\r\n    }\r\n\r\n    return (data || []) as RecentTransaction[];\r\n}\r\n\r\n// =====================================================\r\n// ACCESS LOGGING (for privacy/audit trail)\r\n// =====================================================\r\n\r\nexport async function logBookingAccess(\r\n    bookingId: string,\r\n    userId: string,\r\n    role: 'admin' | 'staff',\r\n    accessType: 'view' | 'edit' | 'delete' = 'view'\r\n): Promise<void> {\r\n    const supabase = createClient();\r\n\r\n    const { error } = await supabase.rpc('log_booking_access', {\r\n        p_booking_id: bookingId,\r\n        p_user_id: userId,\r\n        p_role: role,\r\n        p_access_type: accessType,\r\n    });\r\n\r\n    if (error) {\r\n        console.error('Error logging booking access:', error);\r\n    }\r\n}\r\n\r\n// =====================================================\r\n// STAFF MANAGEMENT MUTATIONS\r\n// =====================================================\r\n\r\nexport async function createStaff(data: CreateStaffInput) {\r\n    const supabase = createClient();\r\n\r\n    const { data: result, error } = await supabase.rpc('create_staff', {\r\n        p_name: data.name,\r\n        p_email: data.email,\r\n        p_phone: data.phone,\r\n        p_pin: data.pin,\r\n        p_bio: data.bio || null,\r\n        p_specialties: data.specialties || [],\r\n        p_payment_details: data.payment_details || null,\r\n        p_avatar_url: data.avatar_url || null // Added\r\n    });\r\n\r\n    if (error) {\r\n        console.error('Error creating staff:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport async function updateStaff(data: UpdateStaffInput) {\r\n    const supabase = createClient();\r\n\r\n    const { data: result, error } = await supabase.rpc('update_staff', {\r\n        p_staff_id: data.id,\r\n        p_name: data.name,\r\n        p_email: data.email,\r\n        p_phone: data.phone,\r\n        p_bio: data.bio || null,\r\n        p_specialties: data.specialties || [],\r\n        p_payment_details: data.payment_details || null,\r\n        p_avatar_url: data.avatar_url || null // Added\r\n    });\r\n\r\n    if (error) {\r\n        console.error('Error updating staff:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport async function toggleStaffStatus(staffId: string, isActive: boolean) {\r\n    const supabase = createClient();\r\n\r\n    const { data: result, error } = await supabase.rpc('toggle_staff_status', {\r\n        p_staff_id: staffId,\r\n        p_is_active: isActive\r\n    });\r\n\r\n    if (error) {\r\n        console.error('Error toggling staff status:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport async function updateStaffSchedule(data: UpdateScheduleInput) {\r\n    const supabase = createClient();\r\n\r\n    const { data: result, error } = await supabase.rpc('update_staff_schedule', {\r\n        p_staff_id: data.staff_id,\r\n        p_schedules: data.schedules\r\n    });\r\n\r\n    if (error) {\r\n        console.error('Error updating staff schedule:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\n// =====================================================\r\n// HERO SLIDES (Dynamic Carousel)\r\n// =====================================================\r\n\r\nexport async function getHeroSlides(): Promise<HeroSlide[]> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('hero_slides')\r\n        .select('*')\r\n        .eq('is_active', true)\r\n        .order('display_order', { ascending: true });\r\n\r\n    if (error) {\r\n        console.error('Error fetching hero slides:', error);\r\n        return [];\r\n    }\r\n\r\n    return data || [];\r\n}\r\n\r\nexport async function getAllHeroSlides(): Promise<HeroSlide[]> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('hero_slides')\r\n        .select('*')\r\n        .order('display_order', { ascending: true });\r\n\r\n    if (error) {\r\n        console.error('Error fetching all hero slides:', error);\r\n        return [];\r\n    }\r\n\r\n    return data || [];\r\n}\r\n\r\nexport async function createHeroSlide(slideData: { image_url: string; title?: string; subtitle?: string }) {\r\n    const supabase = createClient();\r\n\r\n    // Get max order\r\n    const { data: existingSlides } = await supabase\r\n        .from('hero_slides')\r\n        .select('display_order')\r\n        .order('display_order', { ascending: false })\r\n        .limit(1);\r\n\r\n    const maxOrder = existingSlides?.[0]?.display_order ?? -1;\r\n\r\n    const { data, error } = await supabase\r\n        .from('hero_slides')\r\n        .insert([{\r\n            image_url: slideData.image_url,\r\n            title: slideData.title || null,\r\n            subtitle: slideData.subtitle || null,\r\n            display_order: maxOrder + 1,\r\n            is_active: true\r\n        }])\r\n        .select()\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error creating hero slide:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true, data };\r\n}\r\n\r\nexport async function updateHeroSlide(id: string, slideData: Partial<HeroSlide>) {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('hero_slides')\r\n        .update({\r\n            title: slideData.title,\r\n            subtitle: slideData.subtitle,\r\n            display_order: slideData.display_order,\r\n            is_active: slideData.is_active\r\n        })\r\n        .eq('id', id)\r\n        .select()\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error updating hero slide:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true, data };\r\n}\r\n\r\nexport async function deleteHeroSlide(id: string) {\r\n    const supabase = createClient();\r\n\r\n    const { error } = await supabase\r\n        .from('hero_slides')\r\n        .delete()\r\n        .eq('id', id);\r\n\r\n    if (error) {\r\n        console.error('Error deleting hero slide:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true };\r\n}\r\n\r\n// =====================================================\r\n// FINANCIAL MANAGEMENT\r\n// =====================================================\r\n\r\n// --- Transactions (from bookings) ---\r\nexport async function getTransactions(filters?: {\r\n    startDate?: string;\r\n    endDate?: string;\r\n    status?: string;\r\n    staffId?: string;\r\n}) {\r\n    const supabase = createClient();\r\n\r\n    let query = supabase\r\n        .from('bookings')\r\n        .select(`\r\n            id,\r\n            customer_name,\r\n            customer_email,\r\n            booking_date,\r\n            start_time,\r\n            total_price,\r\n            payment_status,\r\n            payment_method,\r\n            payment_reference,\r\n            created_at,\r\n            staff:staff_id (id, name)\r\n        `)\r\n        .order('created_at', { ascending: false });\r\n\r\n    if (filters?.startDate) {\r\n        query = query.gte('booking_date', filters.startDate);\r\n    }\r\n    if (filters?.endDate) {\r\n        query = query.lte('booking_date', filters.endDate);\r\n    }\r\n    if (filters?.status && filters.status !== 'all') {\r\n        query = query.eq('payment_status', filters.status);\r\n    }\r\n    if (filters?.staffId && filters.staffId !== 'all') {\r\n        query = query.eq('staff_id', filters.staffId);\r\n    }\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n        console.error('Error fetching transactions:', error);\r\n        return [];\r\n    }\r\n\r\n    return data || [];\r\n}\r\n\r\n// --- Staff Payroll ---\r\nexport async function getPayrollRecords(filters?: {\r\n    staffId?: string;\r\n    status?: string;\r\n    startDate?: string;\r\n    endDate?: string;\r\n}): Promise<StaffPayroll[]> {\r\n    const supabase = createClient();\r\n\r\n    let query = supabase\r\n        .from('staff_payroll')\r\n        .select(`\r\n            *,\r\n            staff:staff_id (id, name, avatar_url)\r\n        `)\r\n        .order('pay_period_end', { ascending: false });\r\n\r\n    if (filters?.staffId && filters.staffId !== 'all') {\r\n        query = query.eq('staff_id', filters.staffId);\r\n    }\r\n    if (filters?.status && filters.status !== 'all') {\r\n        query = query.eq('status', filters.status);\r\n    }\r\n    if (filters?.startDate) {\r\n        query = query.gte('pay_period_start', filters.startDate);\r\n    }\r\n    if (filters?.endDate) {\r\n        query = query.lte('pay_period_end', filters.endDate);\r\n    }\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n        console.error('Error fetching payroll:', error);\r\n        return [];\r\n    }\r\n\r\n    return (data as StaffPayroll[]) || [];\r\n}\r\n\r\nexport async function createPayrollRecord(record: {\r\n    staff_id: string;\r\n    pay_period_start: string;\r\n    pay_period_end: string;\r\n    base_salary: number;\r\n    commission_earned?: number;\r\n    bonus?: number;\r\n    deductions?: number;\r\n    notes?: string;\r\n}) {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('staff_payroll')\r\n        .insert(record)\r\n        .select()\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error creating payroll:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true, data };\r\n}\r\n\r\nexport async function updatePayrollRecord(id: string, updates: Partial<StaffPayroll>) {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('staff_payroll')\r\n        .update(updates)\r\n        .eq('id', id)\r\n        .select()\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error updating payroll:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true, data };\r\n}\r\n\r\nexport async function deletePayrollRecord(id: string) {\r\n    const supabase = createClient();\r\n\r\n    const { error } = await supabase\r\n        .from('staff_payroll')\r\n        .delete()\r\n        .eq('id', id);\r\n\r\n    if (error) {\r\n        console.error('Error deleting payroll:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true };\r\n}\r\n\r\n// --- Expenses ---\r\nexport async function getExpenses(filters?: {\r\n    category?: ExpenseCategory | 'all';\r\n    startDate?: string;\r\n    endDate?: string;\r\n}): Promise<Expense[]> {\r\n    const supabase = createClient();\r\n\r\n    let query = supabase\r\n        .from('expenses')\r\n        .select('*')\r\n        .order('expense_date', { ascending: false });\r\n\r\n    if (filters?.category && filters.category !== 'all') {\r\n        query = query.eq('category', filters.category);\r\n    }\r\n    if (filters?.startDate) {\r\n        query = query.gte('expense_date', filters.startDate);\r\n    }\r\n    if (filters?.endDate) {\r\n        query = query.lte('expense_date', filters.endDate);\r\n    }\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n        console.error('Error fetching expenses:', error);\r\n        return [];\r\n    }\r\n\r\n    return (data as Expense[]) || [];\r\n}\r\n\r\nexport async function createExpense(expense: {\r\n    category: ExpenseCategory;\r\n    amount: number;\r\n    description?: string;\r\n    expense_date: string;\r\n    receipt_url?: string;\r\n}) {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('expenses')\r\n        .insert(expense)\r\n        .select()\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error creating expense:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true, data };\r\n}\r\n\r\nexport async function updateExpense(id: string, updates: Partial<Expense>) {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('expenses')\r\n        .update(updates)\r\n        .eq('id', id)\r\n        .select()\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error updating expense:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true, data };\r\n}\r\n\r\nexport async function deleteExpense(id: string) {\r\n    const supabase = createClient();\r\n\r\n    const { error } = await supabase\r\n        .from('expenses')\r\n        .delete()\r\n        .eq('id', id);\r\n\r\n    if (error) {\r\n        console.error('Error deleting expense:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true };\r\n}\r\n\r\n// --- Financial Summary ---\r\nexport async function getFinancialSummary(startDate: string, endDate: string) {\r\n    const supabase = createClient();\r\n\r\n    // Get revenue from bookings\r\n    const { data: bookings } = await supabase\r\n        .from('bookings')\r\n        .select('total_price, payment_status')\r\n        .gte('booking_date', startDate)\r\n        .lte('booking_date', endDate)\r\n        .eq('payment_status', 'paid');\r\n\r\n    const totalRevenue = bookings?.reduce((sum, b) => sum + (b.total_price || 0), 0) || 0;\r\n\r\n    // Get expenses\r\n    const { data: expenses } = await supabase\r\n        .from('expenses')\r\n        .select('amount')\r\n        .gte('expense_date', startDate)\r\n        .lte('expense_date', endDate);\r\n\r\n    const totalExpenses = expenses?.reduce((sum, e) => sum + (e.amount || 0), 0) || 0;\r\n\r\n    // Get payroll costs\r\n    const { data: payroll } = await supabase\r\n        .from('staff_payroll')\r\n        .select('total_pay')\r\n        .gte('pay_period_start', startDate)\r\n        .lte('pay_period_end', endDate)\r\n        .eq('status', 'paid');\r\n\r\n    const totalPayroll = payroll?.reduce((sum, p) => sum + (p.total_pay || 0), 0) || 0;\r\n\r\n    return {\r\n        revenue: totalRevenue,\r\n        expenses: totalExpenses,\r\n        payroll: totalPayroll,\r\n        profit: totalRevenue - totalExpenses - totalPayroll,\r\n        bookingCount: bookings?.length || 0,\r\n    };\r\n}\r\n\r\n// =====================================================\r\n// CALENDAR BOOKINGS\r\n// =====================================================\r\n\r\nexport async function getBookingsForCalendar(startDate: string, endDate: string, staffId?: string) {\r\n    const supabase = createClient();\r\n\r\n    let query = supabase\r\n        .from('bookings')\r\n        .select(`\r\n            id,\r\n            customer_name,\r\n            customer_email,\r\n            customer_phone,\r\n            booking_date,\r\n            start_time,\r\n            end_time,\r\n            total_price,\r\n            status,\r\n            payment_status,\r\n            notes,\r\n            staff:staff_id (id, name, avatar_url),\r\n            services:booking_services (\r\n                service:service_id (id, name, duration_minutes)\r\n            )\r\n        `)\r\n        .gte('booking_date', startDate)\r\n        .lte('booking_date', endDate)\r\n        .neq('status', 'cancelled')\r\n        .order('booking_date', { ascending: true })\r\n        .order('start_time', { ascending: true });\r\n\r\n    if (staffId && staffId !== 'all') {\r\n        query = query.eq('staff_id', staffId);\r\n    }\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n        console.error('Error fetching calendar bookings:', error);\r\n        return [];\r\n    }\r\n\r\n    return data || [];\r\n}\r\n\r\n// =====================================================\r\n// STAFF PIN AUTHENTICATION\r\n// =====================================================\r\n\r\nexport async function setStaffPin(staffId: string, pin: string) {\r\n    const supabase = createClient();\r\n    const pinHash = await hashPin(pin);\r\n\r\n    const { error } = await supabase\r\n        .from('staff')\r\n        .update({ pin_hash: pinHash })\r\n        .eq('id', staffId);\r\n\r\n    if (error) {\r\n        console.error('Error setting PIN:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true };\r\n}\r\n\r\nexport async function clearStaffPin(staffId: string) {\r\n    const supabase = createClient();\r\n\r\n    const { error } = await supabase\r\n        .from('staff')\r\n        .update({ pin_hash: null })\r\n        .eq('id', staffId);\r\n\r\n    if (error) {\r\n        console.error('Error clearing PIN:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true };\r\n}\r\n\r\nexport async function getStaffBookings(staffId: string, startDate?: string, endDate?: string) {\r\n    const supabase = createClient();\r\n\r\n    let query = supabase\r\n        .from('bookings')\r\n        .select(`\r\n            id,\r\n            customer_name,\r\n            customer_email,\r\n            customer_phone,\r\n            booking_date,\r\n            start_time,\r\n            end_time,\r\n            total_price,\r\n            status,\r\n            payment_status,\r\n            notes,\r\n            services:booking_services (\r\n                service:service_id (id, name, duration_minutes, price)\r\n            )\r\n        `)\r\n        .eq('staff_id', staffId)\r\n        .order('booking_date', { ascending: true })\r\n        .order('start_time', { ascending: true });\r\n\r\n    if (startDate) {\r\n        query = query.gte('booking_date', startDate);\r\n    }\r\n    if (endDate) {\r\n        query = query.lte('booking_date', endDate);\r\n    }\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n        console.error('Error fetching staff bookings:', error);\r\n        return [];\r\n    }\r\n\r\n    return data || [];\r\n}\r\n\r\nexport async function getStaffEarnings(staffId: string, startDate: string, endDate: string) {\r\n    const supabase = createClient();\r\n\r\n    const { data: bookings } = await supabase\r\n        .from('bookings')\r\n        .select('total_price')\r\n        .eq('staff_id', staffId)\r\n        .eq('payment_status', 'paid')\r\n        .gte('booking_date', startDate)\r\n        .lte('booking_date', endDate);\r\n\r\n    const { data: staff } = await supabase\r\n        .from('staff')\r\n        .select('commission_percentage')\r\n        .eq('id', staffId)\r\n        .single();\r\n\r\n    const totalRevenue = bookings?.reduce((sum, b) => sum + (b.total_price || 0), 0) || 0;\r\n    const commissionRate = staff?.commission_percentage || 0;\r\n    const earnings = totalRevenue * (commissionRate / 100);\r\n\r\n    return {\r\n        totalRevenue,\r\n        commissionRate,\r\n        earnings,\r\n        bookingCount: bookings?.length || 0,\r\n    };\r\n}\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\src\\utils\\supabase\\server.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\EtornamKoko\\Downloads\\Barbershop\\booking-app\\tailwind.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]